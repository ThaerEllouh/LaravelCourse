
اول 10 فيديوهات بيتكلم فيهم بشكل عام عن اللارافيل وشو بيلزمنا فيهم
بالنسبة للمحرر بى اتش بى ستورم انا نزلته ..وبيعطينه لحال 30 يوم مجانى
ولكن صاحب الدورة
منزل ملف باتش بفيديو رقم 8 بالدورة ..حاطه بالوصف تحت الفيدو انا نزلته هيو عندى
بالداونلود اسمه reset.bat فتحته وغيرت التاريخ فيه خليته نفس الاصدار الى عندى
لما نزلته كان 2019.2 قال بتخير التاريخ لاى تاريخ بدك يوم الى هو اصدار المحرر
الى نزلته اعتقد انا الى نزلته مان 2021.2 قال بتغير وبعدين كل اخر شهر
لما يخلص بتضغط عالملف دبل كليك بحدثلك 30 يوم زيادة
عشان تغيرو ..بتعمل ايديت بيفتح معك الملف ..بس قال هو مرة واحدة بيتغير بعدين
كل اخر شهر بتضغط عليه مرتين خلص بحدثلك 30 يوم زيادة

-بالنسة للتيرمينال الى موجود عنا بالمحرر سواء الفيجول كود او البى اتش ستورم
عشان تنزل عليه القيت ...بس بتعطيه الامر git هو لحاله خلص بحمله معو وبتصير
تشتغل قيت من نفس التيرمينال تاع المحرر

======================================================================================

-فتحت ع موقع اللارافيل ع الراوت وكنت اقرا عنها

//ازا حابب امرر بارميتر اختيار سواء كتبته ولا لا ..مثثال من الموقع نفسه من شرح الراوت

Route::get('user/{name?}', function ($name = null) {
  return $name;
});

Route::get('user/{name?}', function ($name = 'John') {
  return $name;
});

=============================

//مثال تانى باستخدام دالة الوير لو حابب تحط قيود ع الاى دى انو يكون ارقام فقط
//والاسم يكون احرف فقط ...لو كتب اى شى غير القيد الى انا حاطه بيطلعله ايرور 404
//يا بتغير اسم الراوت user لاسم تانى عشان ما يتعارض مع الى فوق
//او بتوقف واحد وشغل واحد ..او سميه اى اسم وخلص سميه ثائر وفوت عليه

Route::get('user/{id}/{name}', function ($id, $name) {
  return "your id is [ " . $id ." ] and your name is [ " . $name . " ] ";
})->where(['id' => '[0-9]+', 'name' => '[a-z]+']);


===============================
/**
 * لو حابب يكون القيد عام ع كل الموقع ..اى اى دى امرره لازم يكون ارقم فقط
 * بدل ما استخدم دالة الوير زى المثال الى فوق ..الموقع شارحلى الطريقة هاى
 */

Global Constraints
If you would like a route parameter to always be constrained by a given regular expression, you may use the pattern method. You should define these patterns in the boot method of your RouteServiceProvider:

/**
 * Define your route model bindings, pattern filters, etc.
 *
 * @return void
 */
public function boot()
{
    Route::pattern('id', '[0-9]+');

    parent::boot();
}
Once the pattern has been defined, it is automatically applied to all routes using that parameter name:

Route::get('user/{id}', function ($id) {
    // Only executed if {id} is numeric...
});

 /**
  * بروح ع ملف app/Providers/RouteServiceProvider.php
  *او اكتب فوق بالبحث بيطلعلك
  *بنفوت جوا الملف بنلاقى فى عنا دالة اسمهاboot
  * بلاقيها فاضية زى هيك ازا اول مرة استخدمها
  */

  public function boot()
    {
        //

        parent::boot();
    }

  /**
   * بكتب فيها الامر Route::pattern('id', '[0-9]+');
   * بدها تصير هيك
   */

   public function boot()
    {
        //
        Route::pattern('id', '[0-9]+');

        parent::boot();
    }

   /**
   * وبروح ع ملف الراوت بعمل شغلى وبمرر ال اى دى
   */


Route::get('users/{id}', function ($id) {
    // Only executed if {id} is numeric...
    return "your id is [ " . $id . " ]";

});
=================================================

-شارح كمان شغلة وجربتها

Encoded Forward Slashes
The Laravel routing component allows all characters except /. You must explicitly allow / to be part of your placeholder using a where condition regular expression:

Route::get('search/{search}', function ($search) {
    return $search;
})->where('search', '.*');

-اخدت الروات هاد وحطيته عندى بملف الروات ..وهيك لما اكتب بالرابط بعد كلمة
سيؤش اى حاجة برجعلى اياها ..كتبت اتش 1 رجلعى اياها بس لما كتبت سكريبت ما رجعها

-مش فاهم الفكرة تبعت القيد بس اعتقد عشان البحث انو اى كلمة ببحث عنها
بس اعتقد فى كاركترز ما رضى فيها

-يعنى انا دخلت بالرابط هيك
http://127.0.0.1:8000/search/tyfd25_)$<h1>teto</h1>

-طبعلى
tyfd25_)$
teto

-تيتو طبعها بالخط العريض ك اتش 1

========================================================




=====================================================================================

         #011 - Create First Laravel Project - انشاء مشروع لارافل

-بيشرح كيف ننشا مشروع لارافيل جديد بالطريقتين الى شرحهم الزيرو

-بس لما انشا المشروع دخا لاامر هيك خلى الفيرجن اخر اشى
composar creat-project laravel/laravel Starter "6.*"

-ممكن انت المشروع الفاضى هاد الى نزلنا تاخده وتحطه ع جنبه ولما بدك مسلا مشروع ع فيرجن 7 تيجى تاخده نفسه بدل ما تضل تنزله من جديد

-انت لما ترفع مشروعك عالقيت هاب ما بيرفع معو ملف الفيندور ..ملف الفيندور ضخم جدا
هو روح المشروع فى كل اكواد اللارافيل والباكيجات تبعهتها

-ولو حابب تعطى المشروع لصحابك بتعطيه اياه ع فلاش بدون ملف الفيندور
مسلا لو كان مشروع 500 ميجا بتلاقى ملف الفيندور لحاله يمكن 400

-انت بتعطيه مشروع بدون الفيندور ...وكل حاجة موجودة بالفيندور كانت ..راح تكون موجودة
بملف الكمبوزر الى انت اعطبته اياه

-هو لما ياخد المشروع بدون الفيندور عندو ...بس بيكتب امر واحد
composer istall

-وهو هاد الامر بنزلو ملف الفيندور الى كان عندك ..بدى اجربها اخد المشروع بدون الفيندور واروح اعمل الامر هاد

-فعلا اخدته بدون الفيندور وعملت الامر composer install نزل عندى الفيندر
ضل ينزل ينزل بالفيندور وباكيجاته اخر اشى كتبلى
Package manifest generated successfully.
74 packages you are using are looking for funding.
Use the `composer fund` command to find out more!
PS C:\xampp\htdocs\TetoLaravel>

-من ضمن اوامر الكومبوزر لما تكتب كومبوزر ويطبلعك كل الاوامر كاتبلى عن الانستول
install   Installs the project dependencies from the composer.lock file if present,
          or falls back on the composer.json.

-ملاحظة اخرى
عنا ملف بالمشروع اسمه .gitignore
كاتبلك فيه شو هى الملفات الى ما بيرفعه مع البروجيكت لما ترفعه عالقيت
من اسم الملف قيت اقنور ..يعنى ما برتفع عالقيت
/node_modules
/public/hot
/public/storage
/storage/*.key
/vendor
.env
.env.backup
.phpunit.result.cache
Homestead.json
Homestead.yaml
npm-debug.log
yarn-error.log

-ازا بتلاحظ من ضمنها ملف الفيندور
-وازا فيه ملفات مش مهمة انا ما بدى اياها تروح معى عالقيت لما ارفعه ..بحط اسمها بالملف هاد بروضو عشان ما ترتفع

-ملف ال .env هاد الى فيه الربط تبع الداتا بيز تبعتنا

-المهندس راح يعمل بوش لكل محاضرة بيعملها عالقيت هاب عالريبو تبع البروجيكت
وانت بس عليك تعمل pull وتاخد اى تحديث بصير

================================================================================

       #012 - What Is Laravel Routing - routes شرح

-الروات هو الرابط اليو ار ال الموجود عنا فوق
-موجود فى فولدر الراوت فى ملف web.php

-كاتب النا انو روات صفحة الويلكم هو الباك سلاش /
-لما نعمل رن للمشروع بنفتحه بنفتحك هيك
http://localhost:8000
-نفسها كانى كتبت http://localhost:8000/
ولكن الباك سلاش الاخيرة ما بنكتبها

-الراوت ممكن يرجع فيو ..ممكن يرجع سترنق ..ممكن يرجع قيمة ..اى حاجة زى ما درسنا مع الزيرو

-الروات الها اكتر من شكل get - post - put - patch -delete - opyions
-فى ناس بتستغنى عن البوت ..بالبوست او الباتش

-القيت مفهوم ...البوست لما يكون عنا فورم وبنبعت للداتا بيز وبنرجع وهكذا

-الديليت والبوت ممكن نستغنى عنهم بالبوست

-ولنفترضو انو عنا زر تحت كل الاعلان ..الزر هاد لما اضغط عليه بيمسح الاعلان
لما اضغط عالزر ..بيبعتنى ع رابط الرابط هاد بيبعتنى ع مكان بالكونترولر
الى انا بكون كاتب فيه كود الحذف من الداتا بيز

-الرابط هاد نوعه شو بكون ...الستاندرد بكون انو استخمده ديليت طالما بدك تحذف
ولكن انت ممكن تستبدله ب بوست

-طبيعة الراوت بينكتب زى هيك
Route::get('/test', function () {
    return "Hello Teto";
});

-ولكن انا الميثود هادى الى هان او الفنكشن لقدام راح نستبدلها بكونترولر
لانو ما بينفع نكتب كود هان ..الكود بنكتبه بالكنترولر والراوت هاد بيعتنى عالكونترولر
وبالكنترولر ان بعمل ريتيرن للفيو الى بدى اياها


==========

Route With Parameters
-ممكن امرر بارميتر للروات ..مسلا انا عندى زر بيعمل عرض تفاصيل المنتج ..لما اضغط عليه
يبعتنى ع الاى دى تبعت المنتج هاد نفسه

-البارميتر نوعين ...اجبارى واختيارى
-الاجبارى ..غصب عنك لازم تمرر باميتير لو ما مررت راح يطلعلك ايرور
الاختيار بدك تمرر مرر ..ما بدك خلص ..راح نستخدمها بحالات كتيرة بمشروعنا

-اجبارى
Route::get('/test1/{id}', function ($id) {
    return "Hello Teto Your id = " . $id ;
});

-اختيارى ..لو مررت او ما مررت راح تشتغل
Route::get('/test2/{id?}', function () {
    return "Hello Teto Your id is Optinal " ;
});

==============

- name of route

Route::get('/test3', function () {
    return "Hello Teto Your id is Optinal " ;
})->name("teto");

بدل ما اقله بالفيو عندى للنافبار لما استدعى الراوت هاد بدل اقله هيك
<li><a href="/Laravel_Course/public/test3">About</a></li>

او

<li><a href="{{ url("/test3") }}">About</a></li>

-بقله باسم الروت الى اعطيته اياه
<li><a href="{{ route('teto') }}">About</a></li>

route: تسمى helper method

-لو الو بارميتر

Route::get('/test3/{id?}', function ($id) {
    return "Hello Teto Your id is Optinal " . $id  ;
})->name("teto");

-هان لازم اباسى معو بارميتر
<li><a href="{{ route('teto', 55) }}">About</a></li>

====================================================================================

                 #013 - Route Structure & Route Service Provider

-ك شغلة احترافية وعشان تظم شغلك وتكون محترف
-مش صح تحط كل الروات تبعتك بملف واحد كلهم تحت بعض ..هى صح بس عشان تحترف
خلى كل راوت معين بصفحة لحاله

-مسلا خلى بصفحة الويب هاى الرئيسة ..الراوت الخاصة بالموقع الرئيسى
خد منها نسخها وسميها admin.php مسلا ...هاى الصفحة بتحط فيها الروابط
الخاصة بصفحة الادمن مسلا ...عند مسلا بالموقع جزء مشرفين
يا بتخليهم بفحة روابط الادمن او بتعملههم صفحة راوت لحالهم وهكذا

-بدى اعمل صفحى اسميها ادمن واخلى فيها الراوت الخاص بالادمن

-هلقيت عملنا ملف اسمه ادمن ..زيه زى الويب وحطينا فيه راوت ..ولكن لو انت رحت تزوره
مش راح يفتح معك راح يقلك الصفحة غير موجودة 404

-عشان نخليه يزبط معنا زى ملف الويب
لازم نربطه بملف الروت سيرفر بروفايدر RouteServiceProvider.php

-موجود بفولدر app->Providers->RouteServiceProvider.php

-هاد الملف بنحط فيه ملفات الراوت تبعتنا اازا بدنا نقسمها لاكتر من صفحة زى ما حكينا
عشان نظم شغلنا ...لما نفتح راح نلاحظ مكتوب هيك

public function map()
    {
        $this->mapApiRoutes();

        $this->mapWebRoutes();

        //
    }

-وبعدها عامل الميثود تبعت ملف الويب
protected function mapWebRoutes()
    {
        Route::middleware('web')
            ->namespace($this->namespace)
            ->group(base_path('routes/web.php'));
    }

-ازا بتلاحظ بفنكش الماب اول واحطة حاطط $this->mapWebRoutes(); لملف الويب
بدنا نعمل نفس الخطوة لملف الادمن الجديدة مع مراعاة الكامل كيس اكتبها زى هيك
$this->mapAdminRoutes();

-بدها تصير عناه هيك

public function map()
    {
        $this->mapApiRoutes();

        $this->mapWebRoutes();

        $this->mapAdminRoutes();

        //
    }

-هيك احنا عملنا الميثود
-الخطوة التانية .. لازم نكريت هاى الميثود عنا تحت زى ما هو مكريت ميثود الويب
-هاى ميثود الويب
protected function mapWebRoutes()
    {
        Route::middleware('web')
            ->namespace($this->namespace)
            ->group(base_path('routes/web.php'));
    }

-بدنا ننسخها ونحطها تحتها ولكن نخليها لملف الادمن ..يعنى اخر سطر فيها
بدنا اياه يبعتنا ع راوت صفحة الادمن مش صفحة الويب واسمها نخليه ادمن بدل ويب
-وبالنسبة للميدل وير هان  مش عايزينه هو المفروض يكون ادمن لكن ..لسا بدنا نعرفه ونشرحه لقدام

-صارت ميثود تبعت ملف الادمن هيك
protected function mapAdminRoutes()
    {
        Route::namespace($this->namespace)
            ->group(base_path('routes/admin.php'));
    }

-وكل كلف راوت بنعمل جديد ..لازم نيجى عالملف هاد ونعمل نفس هاى الخطوات
-هلقيت روح افتح الراوت الى عملنا بصفحة الادمن راح يفتح معك عادى

-وهيك انا قسمت روابط موقعى ..روابط الموقع لحال وروابط الادمن لحال ..ولقدام راح نخلى روابط الموبايل لحال وهكذا

===================================================================================

               #014 - Naming Routing and Namespaces - شرح routes

-انا قريت الراوت كله من الموقع

-هلقيت هان بدو يشرح الروت نيم سبيس ..كيف نعمل راوت ل نيم سبيس معين
النيسم سبيس تقدر تقول عنو فولدر لحاجة معين ..مسلا بدى اعمل راوح لنيم سبيس
الفرونت ..بس لازم اسمها يكون كابيل لتر

Route::namespace('Front')->group(function() {

    //all route only access controller or method in folder name Front
    Route::get('users/{id}', function ($id) {

    });

});

-القروب راح نشرحها ..القروب يعنى مجموعة روابط معينة بحطها مع بعض
-طيب هان انا بقله نيم سبيس اسمها فرونت
-يعنى كل الروات الى بحطها هان ..لازم تبعتنى على كونترولر موجود بالنيم سبيس الى
اسمه فرونت

-الفكرة العامة الى لازم تفهمها ...الروات بيبعتنى ع كونترولر ..والكونترولر
بكون فى الاكود تبعتنا والشغل والميثودات تعتنا ..والكنترولر هو الى برجعلى فيو معينة او اى شى

-هلقيت مبدايا الكنترولر موجود بفولدر app->Http->controllers
-انا مسلا بدى اعمل للفرونت الرئيسى فولدر لحاله  للكنترولز تبعته
بروح بعمل فولدر جوا فولدر الكنترولر بسميه Front

-جوا الفولدر هاد بحط الكنترولر الى بدى اياه
بدنا نعمل داخله مسلا كنترولر اسمه UserController.php
- بدى اعمل الميثود هاى جوا الكنترولر الى عملته

-هى الكنترولر الى عملته وعملت فيه ميثود
<?php

namespace App\Http\Controllers\Front;

// use Illuminate\Foundation\Auth\Access\AuthorizesRequests;
// use Illuminate\Foundation\Bus\DispatchesJobs;
// use Illuminate\Foundation\Validation\ValidatesRequests;
use Illuminate\Routing\Controller as BaseController;

class UserController extends BaseController
{
    public function showUserName(){
        return "thaer Ellouh";
    }
}

-اخدت نسخ من الكنترولر الى كان معنا الاصلى بس النيم سبيس كانت
namespace App\Http\Controllers;

-انا عدلتها ضفت الها ملفه الفرونت الى عملته
namespace App\Http\Controllers\Front;

-هلقتيت بملف الويب تبع الراوت بقله

Route::namespace('Front')->group(function() {

    //all route only access controller or method in folder name Front

    Route::get("user", "UserController@showUserName");

});

-اى راوت انا بعمله هان لازم تكون الكنترولر الى بيبعتنى عليها تكون موجودة بفولد الفرونت
او نيم سبيس الفرونت
@ : يعنى بدى انادى على ميثود داخل هاى الكنترولر الى هى showUserName

-وهاى الميثود بتعمل ريتيرن لاسمى ثائر اللوح

-هلقيت مفروض انا اكتب الراوت هيك

    Route::get("user", "Front\UserController@showUserName");

-ولكن عشان انا جوا النيم سبيس نفسها الى اسمها فرونت خلص ما بكتبها
لو كان عندى 50 راوت بكتب اسم الكنترولر مباشرة بدون ما احط قبله اسم النيم سبيس تبتعه الى هى فرونت ..لانو انا فعليا جوا الفرونت بالطريقة هاى

-هلقيت لو تفوت عالرابط
http://localhost:8000/user
فعلا راح يطبعلنا Thaer Ellouh

-لو كتبناها بالطريقة التانية غلط
-لو بدك تكتبها بهاى الطريقة
    Route::get("user", "Front\UserController@showUserName");
-بتعمل الروات تبعك بدون ما تقله النيم سبيس فوق وهو بيفهم هيك


-اخر ملعومة ..هلقيت لو انا حطيت اى كنترولر مش موجود بالنيم سبيس الى اسمه فرونت
بالراوت هاد تبعنا ..راح يطلعلى ايرور ....اى كنترولر بدك تحطها لازم تكون جوا الفولدر فرونت الى انت حاكيله عنه

-يعنى هلقيت لما اقول نيم سبيس يعنى انت افهم انو فولدر

-الطريقة هاى عشان نرتب شغلنا يعنى مسلا كان عندى 50 روات انا اسمهم زى هيك
    Route::get("user", "Front\UserController@showUserName");
    Route::get("user", "Front\UserController@showUserName");
    Route::get("user", "Front\UserController@showUserName");
    Route::get("user", "Front\UserController@showUserName");
    Route::get("user", "Front\UserController@showUserName");

-انا ليش اضل اكتبه بالطريقة هاى ...خلص بكتب النيم سبيس تبعتهم فوق ..وبصير اكتبهم بدون كلمة فرونت ...عشان تكون محترف يعنى ومش مبتدا

====================================================================================

          #015 - laravel Route Group , prefix and middleware - routes شرح

-Route Groups
Route groups allow you to share route attributes, such as middleware or namespaces, across a large number of routes without needing to define those attributes on each individual route. Shared attributes are specified in an array format as the first parameter to the Route::group method.

-الراوت قروب بتسمح الك مشاركة السمات الى بتشترك فيها كل الراوت الى عندك
مسلا كل الروات الى عنا تابعين ل نيم سبيس معين
زى ما عملنا الدرس الى فات بنكتب النيم سبيس بعدين بنقله قروب وبنحط فيه كل
الروات الى بتتعامل مع النيم سبيس هاد

-غير النيم سبيس ..مسلا كل الراوت الى عنا الها نفس البريفكس ..البادئة يعنى
مسلا بدى اياهم كلهم يبدا بكلمة ادمن مسلا ..او كلهم يبدا بكلمة يوزر مسلا
بحط الكلمة هاى عندى فوق بدالة بريفكس ..وعشان تنطبق عليهم كلهم بعملهم بقروب

-غير هيك كمان مسلا بدهم يشتركو بنفس الميدل وير ..الميدل وير راح نشرحه لقدام
بس حاليا انت اعرف انو هو زى قيد ..زى لا كنا نقله ازا الشخصص هاد ادمن خليه يفوت
ع الكنترول بانيل ازا مش ادمن ..حوله ع صفحة الدخول او نبعته ع اى صفحة مسلا
-مسلا عندى قيد معين ميدل وير معين انا عامله وبدى كل الروات الى اعملها يكون عليها الميدل وير هاد ....خلص بحطهم بقروب وقبل القروب بقله الميدل وير كزا ..بالتالى كل الراوت الى انا عامله جوا القروب هاد راح تاخد نفس الميدل وير

-هى هاد القروب

-نيجى نشرح البريفكس

Route Prefixes
The prefix method may be used to prefix each route in the group with a given URI. For example, you may want to prefix all route URIs within the group with admin:

Route::prefix('admin')->group(function () {
    Route::get('users', function () {
        // Matches The "/admin/users" URL
    });
});

-معناها البائة ..مسلا بدى كل الراوت الى احطها بالقروب هاط يبقى قبلها كلمة ادمن
خلص بحط كلمة ادمن فوق
-يعنى الروات هاد الى انا كتبته
Route::get('users', function () {
        // Matches The "/admin/users" URL
    });

-لما اروح ادخل عليه لازم يكون اسمه
http://localhost:8000/admin/users

-هى معنى البريفكس

-الكلام الى شرحه المهندس

//Group And Prefix
Route::prefix('users')->group(function() {
    Route::get("show", "UserController@showUserName");
    Route::delete("delete", "UserController@showUserName");
    Route::get("edit", "UserController@showUserName");
    Route::put("update", "UserController@showUserName");
});

-انا هيك لازم اكتب
http://localhost:8000/users/show
http://localhost:8000/users/edit

-هدول القيت ..اما الديليت والبوت الهم شغل تانى

-وعشان يشتغلو معى صح بالكنترولر الى انا عامله لازم اضيف النيم سبيس فوق كمان

//Group And Prefix
Route::prefix('users')->namespace('Front')->group(function() {
    Route::get("show", "UserController@showUserName");
    Route::delete("delete", "UserController@showUserName");
    Route::get("edit", "UserController@showUserName");
    Route::put("update", "UserController@showUserName");
});

-يعنى القروب الى عندى هاد ..اشترك بالبريفكس واشترك بالنيم سبيس كمان
-هلقيت لو رحت كتبت
http://localhost:8000/users/show
راح يطبعلى اسمى الى انا عامله ريتيرن بالميثود
-ولو كتبته برضو
http://localhost:8000/users/edit
-برضو راح يطبعلى نفس لااشى لانو انا مستخدم نفس الميثود بس عشان ابين الفكرة

-طيب هلقيت فى طريقة تانية هاى لكتابتها وهى الى راح نمشى عليها دايما

-جوا القروب بمرر الميزات المشتركة معى باريه زى هيك

Route::group(['prefix' => 'users'],function() {
    Route::get("show", "UserController@showUserName");
    Route::delete("delete", "UserController@showUserName");
    Route::get("edit", "UserController@showUserName");
    Route::put("update", "UserController@showUserName");
});

-ازا كان الها نيم سبيس بمررها برضو

Route::group(['prefix' => 'users', 'namespace' => 'Front'],function() {
    Route::get("show", "UserController@showUserName");
    Route::delete("delete", "UserController@showUserName");
    Route::get("edit", "UserController@showUserName");
    Route::put("update", "UserController@showUserName");
});

-ازا كان بيشتركوا بنفس الميدل وير برضو بمررها عادى

-هلقيت لو انا عملت راوت يبعتنى عالباك سلاش لحالها
Route::group(['prefix' => 'users', 'namespace' => 'Front'],function() {
    Route::get('/', function () {
        return "teto";
    });
    Route::get("show", "UserController@showUserName");
    Route::delete("delete", "UserController@showUserName");
    Route::get("edit", "UserController@showUserName");
    Route::put("update", "UserController@showUserName");
});

-هاد معناه انى اكتبه users لحالها انا كتبتها لحالها او بعدها باك سلاش نفس الاشى مهى
هان برجعلى كلمة تيتو
-زى هيك
http://localhost:8000/users
-بيطبعلى تيتو



-خلينا نشوف شو هى الميدل وير
Middleware
To assign middleware to all routes within a group, you may use the middleware method before defining the group. Middleware are executed in the order they are listed in the array:

Route::middleware(['first', 'second'])->group(function () {
    Route::get('/', function () {
        // Uses first & second Middleware
    });

    Route::get('user/profile', function () {
        // Uses first & second Middleware
    });
});

-نيجى لشرح المهندس

الميدل وير هو الية معينة بتسمحلك انو انت تفوت عالرابط هاد او ما تفوت بناءا على كود معين ...زى لما حكتلك السماح لدخول اصفحة الادمن ازا انت ادمن بسمحلك ..مش ادمن برجعلك ع صفحة تسجيل الدخول ...هيك كنا نعمل زمان

-اللارفيل نفسها ..عاملة ميدل وير اسمه auth الاس هاد نفس تبعنا زمان الادمن
هما هان عاملينه ازا انت مسجل بالموقع وعامل تسجيل دخول ...يسمحلك تفوت عالروابط
ازا مش عامل تسجيل دخول بحولك ع صفحة اسمها اللوق ان

-وقدام راح نعرفها بالتفسصيل وكيف انشا ميدل وير وشو هى الميدل وير

-الميدل وير بنكتب بكزا طريقة ....ازا عندك قروب زى ما كنا نعمل

-اوا ازا عندك راوت لحاله وبدك تحط عليه ميدل وير بتنكتب بالطريقة هاى

-بدنا نتعامل مبدايا بالميدل وير الى عاملاه لارارفيل نفسها اسمه اوس
-ازا حطيته ع اى رابط ...بيمنعك تفوت عالرابط هاد الا تكون عامل اوثونتيكيتد
يعنى عامل تسجيل دخول والك يوزر نيم وباسورد غير هيك ما بدخلك

-لو عنا راوت لحاله بينكتب بالشكل هاد
Route::get('chek', function () {
    return "teto";
})->middleware('auth');

-هلقيت لو رحت دخلت عالرابط هاد
http://localhost:8000/chek

-منعنى وطلعلى اكسبشن
Symfony\Component\Routing\Exception\RouteNotFoundException
Route [login] not defined.

-بقلى صفحة اللوق ان غير موجودة ..وفعلا احنا لسا مش عاملينها وع فكرة هى جاهزة بتكون باللارفيل بس لسا ما علمناها ...لانو الميدل وير الاوس هاد حكينا انو لو انا مش عامل تسجيل دخول ..برجعنى ع صفحة اللوق ان ...وهان عشان ثفحة اللوق ان مش موجودة طلعلى اكسبشن

-طيب لو عملنا الروات هيك بدون ميدل وير
Route::get('chek', function () {
    return "teto";
});

-دخلنى عليه عاد وطبعلى تيتو

-طيب لو عنا مجموعة روابط مشتركة بنفس الميدل وير بتنكتب بالطريقة الى كنا نشتغل فيها
Route::group(['prefix' => 'users', 'namespace' => 'Front', 'middleware' => 'auth'],function() {
    Route::get('/', function () {
        return "teto";
    });
    Route::get("show", "UserController@showUserName");
    Route::delete("delete", "UserController@showUserName");
    Route::get("edit", "UserController@showUserName");
    Route::put("update", "UserController@showUserName");
});

-صارو الروابط هدول بيشتركو بنفس البريفكس ونفس النيم سبيس ونفس الميدل وير
-وهيك ولا رابط راح يفتحلى الا اكون عامل تسجيل دخول

-الشكل الاحترافى الى ممكن نمشى عليه طول عمرنا بكتابة الكود هو هاد الى عملناه اخر اشى
نكتب القروب وفيها نعمل اريه ونمرر الاشياء المشتركة

===========

-معلومة اخيرة وجبتها من الموقع ما حكى عنها المهندس

Route Name Prefixes
The name method may be used to prefix each route name in the group with a given string. For example, you may want to prefix all of the grouped route's names with admin. The given string is prefixed to the route name exactly as it is specified, so we will be sure to provide the trailing . character in the prefix:

Route::name('admin.')->group(function () {
    Route::get('users', function () {
        // Route assigned name "admin.users"...
    })->name('users');
});

=====================================================================================

             #016 - creating Laravel Controller - شرح لارافل controllers

-الكونترولر هو المكان الى انا بكتب فيه اللوجيك تبعى ..الكود تبعى
باى ديفولت لما انا انشا كونترولر ..بينزل بفولدر الكونترولر نفسه
ولكن لو انا بدى اعمل نيم سبيس لكونترولر معينة ..عادى بعمل فولدر جوا فولدر الكنترولر زى ما عملنات الفرونت قبل هيك وبحط فيه الكنترولر تعينى

-يعنى الكود او البيزنس او اللوجيك سميها زى ما تحب بنكتبه بالكنترولر

-كيف بدنا ننشا كنترولر جديد ..ممكن زى ما عملنا بالاول ..ناخد الكنترولر الى موجود عنا وننسخ منو بملف تانى ونعطيه تسمية

-وومكن بطريقة التيرمينال اعطيه امر

php artisan make:controller FirstController

-هيك انشا الى كنترولر اسمه FirstController داخل فولدر الكنترولر نفسه
-هيو هيك انشاه الى

<?php

namespace App\Http\Controllers;

use Illuminate\Http\Request;

class FirstController extends Controller
{
    //
}

-ازا بتلاحظ النيم سبيس فوق اسمها namespace App\Http\Controllers; انو بفولدر الكنترولر نفسه

-بالنسة للاسم سميه اى اسم تحبه ولكن يبدا بحرف كابيتل
-هان المهندس بحب يعطيه الاسم وبعده كلمة كنترولر عشان هاى طريقة بحبها وماشى عليها
مسلا بدو يسمى دكتور كنترولر ..يوزر كنترولر ..ادمن كنترولر

-لو بدى انشا كنترولر بالنيم سبيس او الفولدر الى انا عملته الى اسمه فروند
بنقله داخل الفولدر فرونت الى عنا وبغير الني سبيس بضيف بالاخر الها م\كلمة فرونت
namespace App\Http\Controllers\Front;

=====================================================================================

               #017 - Laravel Controllers & Namespaces

========================

-هاد الكلام عرفته وعملته لحالى قبل ما اشوف شرح المهندس

-لو بدى انشا الكنترولر داخل النيم سبيس فرونت نفسها

 php artisan make:controller Front/FirstController

-هيك عملى كنترولر اسمها FirstController جوا الني سبيس فرونت نفسها

-لاحظ هان كيف نزل شكلها

<?php

namespace App\Http\Controllers\Front;

use App\Http\Controllers\Controller;
use Illuminate\Http\Request;

class FirstController extends Controller
{
    //
}

-جابها جاهزة ..خلى النيم سبيس فوق كامل بدون ما افوت اعدل عليه
-وعملى ايمبورت لهاى
use App\Http\Controllers\Controller;
-عشان انا عامل اكستند من الكنترولر ..ف لازم اعمله ايمبورت عندى عشان يشوفه
هو عملى اياه لحاله

-هلقيت بدنا نفهم الكلام هاد شو يعنى

-ك انى انا ما عملت المثال الى فوق بالطريقة الجديدة ..خلينى امشى مع شرح المهندس ..لسا ما حكى كيف اعمل الكنترولر جوا فولدر يكون جوا فولدر الكنترولر هو  ... بس انا عملت الامر لحالى وزبط

=====================================

-نبدا محاضررة المهندس

-مسلا انا انشات كنترولر بدى اسمها secondController داخل فولدر الكنترولر نفسه
-اعطبته الامر
 php artisan make:Controller SecondController

-انشالى الكنترولر الجديد السكند
<?php

namespace App\Http\Controllers;

use Illuminate\Http\Request;

class SecondController extends Controller
{
    //
}

-لاحظ انو هو بالنيم سبيس كنترولر نفسها ..الفولدر الرئيسى

-بدى اعمل فيها ميثود اسميها showString مسلا
-واروح اعمللها راوت

-صارت عنا هيك
class SecondController extends Controller
{
    public function showString(){
        return "Teto..Second Controller";
    }
}

-بدنا نعمللها راوت خلينى اسميها second مسلا عشان اعرف بس ع وين بدو يبعتنى
Route::get('second', 'SecondController@showString');

-انا هان كتبت اسم الكنترولر مباشرة بدون ما حط قبله نيم سبيس
لانو هو بالنيم سبيس الاصلى الكنترولرز ..خلص ما بحطها قبله
ولكن لو هو بالنيم سبيس الفرونت لازم اكتبه هيك
Route::get('second', 'Front/SecondController@showString');

-هلقيت رحت عالرابط هاد
http://localhost:8000/second
-فعلا طبعلى
Teto..Second Controller

-طيب هلقيت خلينا ننقل هاد الكنترولر للنيم سبيس فرونت نعمله نسخ لصق مسلا
او تعمل قص لصق المهم انقله جوا ..نفسه هو هوا بس بدنا ننقله داخل النيم سبيس الفرونت
-او خلينا نعمل فولدر جديد ..يعنى نيم سبيس جديد نسميه Admin وننقل هاد الكنترولر عليه

-سحبته بالماوس الكنترولر سكند ..ورميته بالنيم سبيس الجديد الادمن
-هلقيت لو تروح تفوت ع نفس الرابط ..راح يطلعلك اكبشن خطا
lluminate\Contracts\Container\BindingResolutionException
Target class [App\Http\Controllers\SecondController] does not exist.
http://localhost:8000/second

-بقلك الكنترولر هاد [App\Http\Controllers\SecondController]
مش موجود ..وهو فعلا فش كنترولر اسمه سكند كنترولر بالنيم سبيس الى اسمها كنترولرز
لانو انا نقله ع الادمن هلقيت

-شو بدنا نعمل ...بدنا نروح نقله بالراوت خليه هيك
Route::get('second', 'Admin\SecondController@showString');

-برضو راح يطلعلى نفس الغلط ..ليش لانو انا نقلته زى ما هو وما غيرت النيم سبيس تبعته
-انا نقلته هيك
<?php

namespace App\Http\Controllers;

use Illuminate\Http\Request;

class SecondController extends Controller
{
    public function showString(){
        return "Teto..Second Controller";
    }
}

-لازم اخليه هيك
<?php

namespace App\Http\Controllers\Admin;

use Illuminate\Http\Request;

class SecondController extends Controller
{
    public function showString(){
        return "Teto..Second Controller";
    }
}

-ضفنا كلمة ادمن عالنيم سبيس صارت هيك namespace App\Http\Controllers\Admin;

-هلقيت اول ما ضفتها ..طلعلى خطا بالاحمر المحرر تحت كلمة كنترولر
class SecondController extends Controller
الى انا عامل وراثة اكستند منها ..لانو هو هيك بطل شايفها ...بالاول لما كانت النيم سبيس ..كنترولز كان شايف كلاس الكنترولر نفسه ..لكن هلقيت لما غيرت النيم سبيس
بطل شايفها ...انت عامل اكستند من كنترولر مين هو هاد كنترول انا مش عارفه
-بالتالى بدى اروح اعمله ايمبورت عندى عشان يشوفه

-قبل ما نعمل ايمبورت ..خلينا نروح عالرابط نشوف شو يقللنا
طلعلى نفس الى كان يطلعه ..بس المرة كتبتلى ايرور
Error
Class 'App\Http\Controllers\Admin\Controller' not found
http://localhost:8000/second

-لازم اروح اعمله ايمبورت

-هلقيت الكنترولر هاد الى بعمل منو اكستند class SecondController extends Controller
هاد باى ديفولت لارفيل عاملاه ..ولكن هو لما انت غيرت النيم سبيس تبعه بطل شايفه

-عشان اعمله ايمبورت بعد ما غيرت النيم سبيس ...بالنسبة للمحر تبعى الفيجول كود
بروح بمسح كلمة كنترولر وبكتبها من جديد ..اول ما بكتب حرفين تلاتة منها المحرر بكمل معى وبيطلعلى اسمها جاهز بضغط عليها ..بعرفلى اياه فوق مباشرة بعمللها ايمبورت زى هيك
use App\Http\Controllers\Controller;

-عمل الها يوز مباشرة

-صارت عندى الكنترولر سكند الى بالنيم سبيس ادمن زى هيك
<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use Illuminate\Http\Request;

class SecondController extends Controller
{
    public function showString(){
        return "Teto..Second Controller";
    }
}

-ولكن هاى use Illuminate\Http\Request; صارت باللون الفاتح خلص انا ما استخدمتها لهلقيت ...هاى اعتقد كانت ايمبورت لكلاس الكنترولر الى بالنيم سبيس الاصلى
ولكن انا هان غيرت النيم سبيس صارت ادمن ..ف صار يستخدم الكنترولر الى ماخده من هان
se App\Http\Controllers\Controller;

-بالنسبة للمهندس بيشتغل عالبى اتش بى ستورم ..كان يقف ع كلمة كنترولر ..وتطلعلو قائمة يضغط عليها يعمل ايبمورت مباشرة

-هلقيت الراوت تبعنا صار  هيك
Route::get('second', 'Admin\SecondController@showString');

-صار يشتغل عادى معنا ..دخلت ع نفس الرابط
http://localhost:8000/second
وطبعلى
Teto..Second Controller

-ولو بدك تستخدك طريقة النيم سبيس تبعتنا الى تعلمناه عادى برضو
Route::group(['namespace' => 'Admin'], function() {
    Route::get('second', 'SecondController@showString');
});

-نفس الى فوق هى هى

-بالنسبة لكل الشرح الى شرحته بس عشان اعرفك الاخطاء وكيف تتعامل معها

-ولا انت ريح راسك واعمل الكنترولر بالنيم سبيس الى بدك اياها مباشرة زى ما شرحت باول الدرس ..بيعطيك اياها جاهز وعاملة ايمبورت للكنترولر جاهز كله

-بالنسبة للراوت ممكن تمرر فيه باراميتر عادى زى ما شرحنا قبل ..وبالبارميتر هاد تبعته للكنترولر تستخدمه بالميثود عادى ..هاد لقدام راح نشرحه

-هينى عملتها لحالى

Route::group(['namespace' => 'Admin'], function() {
    Route::get('second/{id}', 'SecondController@showString');
});

-وبالميثود استخدمته هيك ..انى طبعته

class SecondController extends Controller
{
    public function showString($id){
        return "Teto..Second Controller " . $id;
    }
}

-هلقيت روح فوت عالرابط --بس هان اجبارى بدك تكتب بعد كلمة سكند اى دى
http://localhost:8000/second/50

-طبعلى
Teto..Second Controller 50

=================================

-اخر ملعومة برضو عرفتها لحالى
-بالنسبة لكلاس الكنترولر الى بنعمل منو اكستند ...هو نفسه الاصلى الموجود بفولدر الكنترولز الاصلى اسمه Controller.php لو تفوت عليه تفتحه
<?php

namespace App\Http\Controllers;

use Illuminate\Foundation\Auth\Access\AuthorizesRequests;
use Illuminate\Foundation\Bus\DispatchesJobs;
use Illuminate\Foundation\Validation\ValidatesRequests;
use Illuminate\Routing\Controller as BaseController;

class Controller extends BaseController
{
    use AuthorizesRequests, DispatchesJobs, ValidatesRequests;
}

-هو كلاس ...ونفسه عامل اكستند من كلاس تانى  اسمه BaseController

-عشان هيك لما اعمل كنترولر بالفولدر الاصلى او النيم سبيس الاصلى
ما بيعمل ايمبورت لكلاس الكنترولر ...ليش لانه بشوفو خلص لانو بنفس النيم سبيس اصلا ..جنب بعض الاتنين بنيمم سبيس واحدة

-ولكن لما اعمل نيم سبيس جديدة جواتها ..واستخدم هاد الكلاس الى اسمه كنترولر
واعمل استند منو ...بدى اعرف النيم سبيس الجديدة تبعتى وين هاد الكلاس الى اسمه كنترولر موجود ..ف بعمله ايمبورت بقلى لما اعمل ايمبورت الو
use App\Http\Controllers\Controller;

-يعنى استخدم كلاس الكنترولر الموجود بالكنترولز الموجود بالتش تى تى بى الموجود بال ااب الرئيسى
-يعنى كانو صار عندى بالصفحة وانا شايفه لما استخدمت كلمة يوز
زى ما درسنا بالتريت ازا بتتزكر

=======================================

=================================================================================

            #018 - Laravel Controller Middleware شرح وبناء

Controller Middleware
Middleware may be assigned to the controller's routes in your route files:

Route::get('profile', 'UserController@show')->middleware('auth');
However, it is more convenient to specify middleware within your controller's constructor. Using the middleware method from your controller's constructor, you may easily assign middleware to the controller's action. You may even restrict the middleware to only certain methods on the controller class:

class UserController extends Controller
{
    /**
     * Instantiate a new controller instance.
     *
     * @return void
     */
    public function __construct()
    {
        $this->middleware('auth');

        $this->middleware('log')->only('index');

        $this->middleware('subscribed')->except('store');
    }
}
Controllers also allow you to register middleware using a Closure. This provides a convenient way to define a middleware for a single controller without defining an entire middleware class:

$this->middleware(function ($request, $next) {
    // ...

    return $next($request);
});

You may assign middleware to a subset of controller actions; however, it may indicate your controller is growing too large. Instead, consider breaking your controller into multiple, smaller controllers.

====================

-شرح المهندس
-عرفن كيف نحط الميدل وير عالراوت لحاله بنكتبه ..وبارخ بنقله ميدل وير كزا
يعنى الميدل وير راح يتطبق بس ع هاد الراوت ..او نعمل بطريقة القروب يكون
ع اكتر من راوت ....هاد ع مستوى الراوت

-طيب ع مستوى الكنترولر
-عنا طريقة تانية نحط الميدل وير عالكنترولر نفسه ..يعنى اى ميثود موجودة
داخل هاد الكنترولر يتطبق عليها هاد الميدل وير ...عن طريق ميثود كونستركت

-بدى اعمل كنترولر جديد داخل النيم سبيس ادمن اسميه ThirdController عشان بدى اشتغل عليه الدرس هاد
-عملنا الكنترولر تبعنا
<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use Illuminate\Http\Request;

class ThirdController extends Controller
{
    //
}


-بدى اعمل فيه اكثر من ميثود
<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use Illuminate\Http\Request;

class ThirdController extends Controller
{
    public function showString0(){
        return "This Is String 0";
    }

    public function showString1(){
        return "This Is String 1";
    }

    public function showString2(){
        return "This Is String 2";
    }

    public function showString3(){
        return "This Is String 3";
    }
}


-هلقيت بدنا نروح ع صفحة الراوت ..صفحة الويب ونعمل شغلنا
-او خلينا نعملهم بصفحة الادمن ..راوتات الادمن عشان انسق برضو

-عملت هاد الراوت
Route::get('third0', 'Admin\ThirdController@showString0');

http://localhost:8000/third0
-طبعلى This Is String 0

-لو بدى احط عليه الميدل وير اوث

Route::get('third0', 'Admin\ThirdController@showString0')->middleware('auth');

-حولنى ع صفحة اللوق ان وعشانها مش موجودة قلى
Symfony\Component\Routing\Exception\RouteNotFoundException
Route [login] not defined.

-طيب خلينا نعمل راوت يبعتنا ع صفحة اللوق ان عشان ما يضل يقللنا مش  موجودة

Route::get('login', function () {
    return "You Must Log In In This Site To See This Route";
});

-لو عملتها زى هيك برضو مش راح يتعرف عليها ...لازم تقلو النيم تبعتها لوق ان
هيك باى ديفولت اللارفيل عاملاها ..انو النيم لوق ان

-صار شغلنا هيك

Route::get('third0', 'Admin\ThirdController@showString0')->middleware('auth');

Route::get('login', function () {
    return "You Must Log In In This Site To See This Route";
})->name('login');

-هلقيت انا عامل ميدل وير اوس ع اول راوت لو دخلت عليها ..مباشرة راح يحولنى
ع راوت اللوق ان

-دخلت هان
http://localhost:8000/third0

-حولنى هانhttp://localhost:8000/login
-طبعلى
You Must Log In In This Site To See This Route


-عشان اادك الك انو هو بيعترف بانيم تكون لوق ان ..لو غيرت اسم الراوت لتيتو
وخليت النيم لوق ان

Route::get('third0', 'Admin\ThirdController@showString0')->middleware('auth');

Route::get('teto', function () {
    return "You Must Log In In This Site To See This Route";
})->name('login');

-حولنى ع رابط http://localhost:8000/teto
-وطبعلى نفس الجملة
You Must Log In In This Site To See This Route


--===========================

-نيجى هلقيت لو بدنا نعلم اكتر من راوت


Route::group(['namespace' => 'Admin'], function () {
    Route::get('third0', 'ThirdController@showString0')->middleware('auth');
    Route::get('third1', 'ThirdController@showString1');
    Route::get('third2', 'ThirdController@showString2');
    Route::get('third3', 'ThirdController@showString3')->middleware('auth');

});

-لو دخلت على 0 و3 راح يحولنى عاللوق ان
-لو دخلت ع third1 و third2  راح يدخل معى عادى ويطبعلى اياهم

-طيب لو خليت الميدل وير فوق من ضمن القروب
Route::group(['namespace' => 'Admin', 'middleware' => 'auth'], function () {
    Route::get('third0', 'ThirdController@showString0');
    Route::get('third1', 'ThirdController@showString1');
    Route::get('third2', 'ThirdController@showString2');
    Route::get('third3', 'ThirdController@showString3');

});

-هيك كلهم راح يحولنى عاللوق ان

-هاد الكلام كلو مفهوم من الدرس الى فات

=========================

-نيجى هلقيت كيف نعمل الميدل وير على الكنترولر نفسه
-بعمل ميثود كنستراكت ...عشان اى ميثود تانية عندى جوا الكنترولر ..تتطبق عليها الكونستراكت هاى ...لانو ااحنا عارفين الكونستراكت دايما اول حاجة بتستدعى

-نروح عالكنترولر ونعمل شغلنا

-الراوت عنا هيك بدون ميدل وير
Route::group(['namespace' => 'Admin'], function () {
    Route::get('third0', 'ThirdController@showString0');
    Route::get('third1', 'ThirdController@showString1');
    Route::get('third2', 'ThirdController@showString2');
    Route::get('third3', 'ThirdController@showString3');
});

-الكنترولر حطيت فيه الميدل وير بميثود كنستراكت
class ThirdController extends Controller
{

    public function __construct()
    {
        $this->middleware('auth');
    }

    public function showString0(){
        return "This Is String 0";
    }

    public function showString1(){
        return "This Is String 1";
    }

    public function showString2(){
        return "This Is String 2";
    }

    public function showString3(){
        return "This Is String 3";
    }
}

-هى الميدل وير الى حطيته
public function __construct()
    {
        $this->middleware('auth');
    }

-هلقيت اى راوت موجود فيه اى ميثود من هدول الى داخل الكنترولر هاد الى انا
عامل عليه ميدل وير ..راح ينطبق عليه الميدل وير اوث هاد

-يعنى لو رحت ع اى راوت من الاربعة الى عنا ..راح يحولنى عاللوق ان

-طيب انا عملت راوت جديد جوا القروب ...بس ما بدى يكون فيها ميوثد وكنترولر
Route::group(['namespace' => 'Admin'], function () {
    Route::get('third0', 'ThirdController@showString0');
    Route::get('third1', 'ThirdController@showString1');
    Route::get('third2', 'ThirdController@showString2');
    Route::get('third3', 'ThirdController@showString3');

    Route::get('third4', function () {
        return "This Rout Did Not Auth";
    });

});

-هلقيت لو فتت على راوت Third4 راح يشتغل معك عادى
http://localhost:8000/third4
-طبعلى
This Rout Did Not Auth

====================================

-نرجع للدرس ..فرضا انا عملت ميدل وير عالكنترولر كلو ...وفيه ميثود واحدة
ما بدى ينطبق عليها هاد الميدل وير بستخدم كلمة except وبحط فيها الدالة
تبعتى الى ما بدى ينطبق عليها

public function __construct()
    {
        $this->middleware('auth')->except('showString1');
    }

-هلقيت كلهم راح ينطبق عليهم الميدل ويل ..الا ميثود showString1

-يعنى الروات الى بيبعتنى عالميثود هاى راح يفتح معى عادى الى هو
    Route::get('third1', 'ThirdController@showString1');

-يعنى لما افوت ع هاى الراوت
http://localhost:8000/third1
-راح يطبعلى عادى ..لانو انا استثنيت الميثود تبعته

-طيب لو بدى استثنى ميثود 0 كمان هى و 1
public function __construct()
    {
        $this->middleware('auth')->except('showString1', 'showString0');
    }

-هيك اول راوتين بيفتحوا عادى معى لكن راوت 2 و 3 راح يكون عليهم ميدل وير

=============================

-طيب لو بدى احط الميدل وير ع ميثود واحدة فقط بستخدم دالة only

public function __construct()
    {
        $this->middleware('auth')->only('showString1');
    }

-هيك كلهم راح يفتحو معى ما عدا راوت الى بتعامل مع ميثود 1 راح يكون عليه ميدل وير الاوس

-طيب لو بدى اطبقه ع ميثود لحالهم

public function __construct()
    {
        $this->middleware('auth')->only('showString1', 'showString0');
    }

-هيك ميثود 0 وميثود 1 هما بس الى عليهم الميدل وير

================================================================================

              #019 - laravel controller and route resource شرح

Resource Controllers
Laravel resource routing assigns the typical "CRUD" routes to a controller with a single line of code. For example, you may wish to create a controller that handles all HTTP requests for "photos" stored by your application. Using the make:controller Artisan command, we can quickly create such a controller:

php artisan make:controller PhotoController --resource
This command will generate a controller at app/Http/Controllers/PhotoController.php. The controller will contain a method for each of the available resource operations.

Next, you may register a resourceful route to the controller:

Route::resource('photos', 'PhotoController');
This single route declaration creates multiple routes to handle a variety of actions on the resource. The generated controller will already have methods stubbed for each of these actions, including notes informing you of the HTTP verbs and URIs they handle.

You may register many resource controllers at once by passing an array to the resources method:

Route::resources([
    'photos' => 'PhotoController',
    'posts' => 'PostController',
]);

Actions Handled By Resource Controller

Verb	    URI	                  Action	  Route Name

GET	        /photos	              index	      photos.index
GET	        /photos/create        create      photos.create
POST        /photos	              store	      photos.store
GET	        /photos/{photo}	      show	      photos.show
GET	        /photos/{photo}/edit  edit	      photos.edit
PUT/PATCH	/photos/{photo}	      update	  photos.update
DELETE	    /photos/{photo}	      destroy	  photos.destroy

======================

-شرح المهندس

-احنا انواع الروات عارفينهم 5 انواع حكينا
get  post put patch delete

-لسا راح نشرحهم قدام بالتفصيل لما نبدا نتعامل مع الداتا بيز وناخد بيناتا ونبعت بيانات ونحذف ونعدل وهكذا

-طيب مثلا انا عندى البوست ..او الاعلان ..او صورة
صح كنا نعمل الهم بوست ..بعدين نعمللهم انسسيرت بعدين ايدت بعدين ابديت بعدين ديليت

-ونخلى كل واحدة بزر ...وهكذا ...وهان عنا بلارفيل نفس القصة
لو انت عندك اعلان ..بددك تعمله اضافة من الفورم للداتا بيز ...بعدين لو بدك تعمله
تعديل ..بعدين كان عنا حاجة التحديث لو حابب تعمله ابديت ..يعدين كنا نعمل الحذف

-عنا هان بنعرف كيف نعمل الكنترولر ...بيعطينى كنترولر فاضى ..وانت
تكتب فيه الميثودات تبعينك

-لارفيل اعطتنا حاجة حلوة اسمها اسمها
-Resource Controllers

-هاى بتعملى كنترولر كامل بكل ميثوداته ..الى حكينا عنها ..بدل ما اكتبها بايدى

-بيعطينى كنترولر فيه ميثود البوست والحذف والايديت والابديت وغيره

-يعنى بتنفعنا بحاجة مهمة جدا اسمها Crud شو يعنى creat  read  update  delete
-اختصار لهدول الاربعة ..بس الريد مش عارف شو هى ..شكلها الانسير والاصافة وباقى العمليات

-زى مسلا البوس ..انت بتعمل شو ..بعدين ايديت ..بعدين ابديت ..بعدين لو حابب بتعمل كرييت لبوست معين

-كلهم راح نفهمه لقدام لما نشوف الفيوز ونتعامل معها

-اليوم بس بدنا نفهم ايش يعنى ريسورسس

-بدى اعمل كنترولر ريسورس داخل النسم سبيس الى اسمها ادمن عشان اشتغل عليه

-الامر تبعنا الى بيعمللنا كنترولر ريسورس كامل ..زى هيك
-نفس الامر القديم ولكن بالاخر بتقله --resource
-بدى اعمل كنترولر اسميها PostController وتكون ريسورس

php artisan make:controller Admin\PostController --resource

-هى الكنترولر تبعنا ..شوف كم ميثود عملى فيه لحاله وريحنى

<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use Illuminate\Http\Request;

class PostController extends Controller
{
    /**
     * Display a listing of the resource.
     *
     * @return \Illuminate\Http\Response
     */
    public function index()
    {
        //
    }

    /**
     * Show the form for creating a new resource.
     *
     * @return \Illuminate\Http\Response
     */
    public function create()
    {
        //
    }

    /**
     * Store a newly created resource in storage.
     *
     * @param  \Illuminate\Http\Request  $request
     * @return \Illuminate\Http\Response
     */
    public function store(Request $request)
    {
        //
    }

    /**
     * Display the specified resource.
     *
     * @param  int  $id
     * @return \Illuminate\Http\Response
     */
    public function show($id)
    {
        //
    }

    /**
     * Show the form for editing the specified resource.
     *
     * @param  int  $id
     * @return \Illuminate\Http\Response
     */
    public function edit($id)
    {
        //
    }

    /**
     * Update the specified resource in storage.
     *
     * @param  \Illuminate\Http\Request  $request
     * @param  int  $id
     * @return \Illuminate\Http\Response
     */
    public function update(Request $request, $id)
    {
        //
    }

    /**
     * Remove the specified resource from storage.
     *
     * @param  int  $id
     * @return \Illuminate\Http\Response
     */
    public function destroy($id)
    {
        //
    }
}

===========

-نيجى هلقيت نشرح حاجة اسمها راوت ريسورس ..هاى الى بتتعامل مع الكنترولر ريسورس

-Route Resource

-كنا لما نعمل الراوت نقله ..قيت يا بوست يا ديليت ...هلقيت بنستخدم حاجة اسمها راوت ريسورس ...يعنى بيتعامل مع كل الميثودات الى موجودة عندى

-يعنى ما بنحدد الو ميثود فيها ..لانو راح يتعامل معهم كلهم ..انا بس بنادى ع اسم الكنترولر نفسه الى عملنا ريسورس

Route::resource('post', 'PostController');
Route::resource('post', 'Admin\PostController');


-هيك انا عملت الو الراوت ..بدون ما انادى على اى ميثود فيهم

-هلقيت لو تكتب هاد الامر
λ php artisan route:list

-بيعطيك كل الراوت الى احنا عاملينها وبفصلك اياهم
راح تلاحظ من ضمن الرواتات انى عاملى 7 او 8 راوت  انا ما عملتهم
هو عملى اياهام مجرد ما انا عملت روات الريسورس تبع الكنترولر ريسورس


λ php artisan route:list
+--------+-----------+------------------+--------------+--------------------------------------------------------+------------+
| Domain | Method    | URI              | Name         | Action                                                 | Middleware |
+--------+-----------+------------------+--------------+--------------------------------------------------------+------------+
|        | GET|HEAD  | /                |              | Closure                                                | web        |
|        | GET|HEAD  | admin            |              | Closure                                                |            |
|        | GET|HEAD  | api/user         |              | Closure                                                | api        |
|        |           |                  |              |                                                        | auth:api   |
|        | GET|HEAD  | chek             |              | Closure                                                | web        |
|        |           |                  |              |                                                        | auth       |
|        | POST      | post             | post.store   | App\Http\Controllers\Admin\PostController@store        |            |
|        | GET|HEAD  | post             | post.index   | App\Http\Controllers\Admin\PostController@index        |            |
|        | GET|HEAD  | post/create      | post.create  | App\Http\Controllers\Admin\PostController@create       |            |
|        | DELETE    | post/{post}      | post.destroy | App\Http\Controllers\Admin\PostController@destroy      |            |
|        | PUT|PATCH | post/{post}      | post.update  | App\Http\Controllers\Admin\PostController@update       |            |
|        | GET|HEAD  | post/{post}      | post.show    | App\Http\Controllers\Admin\PostController@show         |            |
|        | GET|HEAD  | post/{post}/edit | post.edit    | App\Http\Controllers\Admin\PostController@edit         |            |
|        | GET|HEAD  | second/{id?}     |              | App\Http\Controllers\Admin\SecondController@showString | web        |
|        | GET|HEAD  | test             |              | Closure                                                | web        |
|        | GET|HEAD  | test1/{id}       |              | Closure                                                | web        |
|        | GET|HEAD  | test2/{id?}      |              | Closure                                                | web        |
|        | GET|HEAD  | test3/{id?}      | teto         | Closure                                                | web        |
|        | GET|HEAD  | teto             | login        | Closure                                                |            |
|        | GET|HEAD  | third0           |              | App\Http\Controllers\Admin\ThirdController@showString0 | auth       |
|        | GET|HEAD  | third1           |              | App\Http\Controllers\Admin\ThirdController@showString1 | auth       |
|        | GET|HEAD  | third2           |              | App\Http\Controllers\Admin\ThirdController@showString2 |            |
|        | GET|HEAD  | third3           |              | App\Http\Controllers\Admin\ThirdController@showString3 |            |
|        | GET|HEAD  | third4           |              | Closure                                                |            |
|        | GET|HEAD  | user             |              | App\Http\Controllers\Front\UserController@showUserName | web        |
|        | GET|HEAD  | users            |              | Closure                                                | web        |
|        | DELETE    | users/delete     |              | App\Http\Controllers\Front\UserController@showUserName | web        |
|        | GET|HEAD  | users/edit       |              | App\Http\Controllers\Front\UserController@showUserName | web        |
|        | GET|HEAD  | users/show       |              | App\Http\Controllers\Front\UserController@showUserName | web        |
|        | PUT       | users/update     |              | App\Http\Controllers\Front\UserController@showUserName | web        |
+--------+-----------+------------------+--------------+--------------------------------------------------------+------------+



-عملى هدول من ضمنهم وانا فعليا ما عملتهم بايدى

Method      URI    Name          Action
POST        post    post.store   App\Http\Controllers\Admin\PostController@store

GET|HEAD   post     post.index   App\Http\Controllers\Admin\PostController@index

GET|HEAD post/create post.create App\Http\Controllers\Admin\PostController@create

DELETE post/{post} post.destro  App\Http\Controllers\Admin\PostController@destroy

PUT|PATCH post/{post} post.updateApp\Http\Controllers\Admin\PostController@update

GET|HEAD  post/{post}  post.show  App\Http\Controllers\Admin\PostController@show

GET|HEAD post/{post}/edit post.editApp\Http\Controllers\Admin\PostController@edit

-هيو عامل الى 7 راوت ب 7 ميثود ..لحاله بدون ما اتعب فيهم
ومعى للروات نيم كمان ازا بتلاحظ ..ولما تروح تكتب الرابط فوق بتكب ال URI هاد
الى معطيك اياه

-يعنى هو وفر عليا انى اكتب الروتس هاى كلها

Route::post('post', 'Admin\PostController@store');
Route::get('post', 'Admin\PostController@index');
Route::get('post/create', 'Admin\PostController@create');
Route::delete('post/{post}', 'Admin\PostController@destroy');
Route::put('post/{post}', 'Admin\PostController@update');
Route::get('post/{post}', 'Admin\PostController@show');
Route::get('post/{post}/edit', 'Admin\PostController@edit');

-بدل ما اكتبهم كلهم ..كتبت بس

Route::resource('post', 'Admin\PostController');

-طبعا انت ممكن ما تحتاج كل الوظايف هاى بكنترولر معين ..مسلا لدك اضافة وتعديل بس
خلص بتعملهم بايدك ..ولكن لو انت بدك كل هاى الوظايف بتعملها عن طريق الريسورس

-وع فكرة ازا انت بدك تعملو بايدك ..الميثود بتسميها ايش ما بدك مش ضرورى اندكس وشو
المهم تكون بتعبر عن شغلك

-لكن بالريسورس هو هيك بسميهم

-خلينا هلقيت نشتغل ع الميثودات الى بتتعامل مع القيت عشان اقدر ازورهم الى هما

public function index()
    {
        return "this is index method";
    }

public function create()
    {
        return "this is create method";
    }

public function show($id)
    {
        return "this is show metho <br> This Post id is : " . $id;
    }

public function edit($id)
    {
        return "this is edit metho <br> This Edit Post id is : " . $id;
    }

-انا عمرلت راوت الريسورس ..خلينى اروح ازورهم

http://localhost:8000/post
-طبعلى
this is index method

http://localhost:8000/post/create
-طبعلى
this is create method

http://localhost:8000/post/20
-طبعلى
this is show metho
This Post id is : 20

http://localhost:8000/post/20/edit
-طبعلى
this is edit metho
This Edit Post id is : 20

-وهيك عرفنا كيف نزور الرواتس القيت ..بضل عنا الرات تبعت البوست والديليت
وميثوداتهم كيف نتعامل معهم راح نفهمهم لقدام

public function store(Request $request)
    {
        //
    }

-راح نفهم ايش يعنى ريقويست هاى الى موجودة عنا لقدام

================================================================================

             #021 - introduction to laravel view - ماهو view

-معلومة ...انا ممكن اكون بدى افتح 2 بروجيكت مع بعض ممكن اعمللهم رن كل واحد لحال
عن طريقى انى اغير البورت
php artisan serve --port=8001

-الداتا تبعتنا بتنعرض لليوزر ك اتش تى ام ال وسى اس اس ..جوا الفيوز

-ممكن داخل ملف الفيوز اعمل فولدرات انظم شغلى ..فولدر ادمن فولدر فرونت فولدر لياوت فولدر للى بدى اعمللهم انكلود وهكذا

-الفولدرات هان بكون سمول ..ولكن بالكنترولر والامور الى فوق حكينا كابيتل اول حرفين

-بدى اعمل عنا فولدرين ..ادمن وفرونت

-الفيو اما بنادى عليه من الراوت مباشرة ..او الروات بنادى ع ميثود بالكنترولر
والكنترولر هو الى بنادى عالفيو وهو هاد الطريقة الصح

-عملت فيو اسمها about.blade.php داخل فولدر front
<body>
    <h1>Hello {{$name}}</h1>
</body>
-رحت ع الكنترولر الى اسمه FirstController داخل فولدر Front
وناديت عالفيو هاى

class FirstController extends Controller
{
    public function showString(){
        return view('front.about', [
        'name'=> 'Thaer'
        ]);
    }
}

-هلقيت بصفحة الويب تبعت الروات بدنا نعمل راوت ينده على الفيو الكنترولر هاد
الى بنادى على الفيو تبعتى
Route::get('about', 'Front\FirstController@showString');


==============================================================================

   #022 - laravel passing data to views from controller - عرض البيانات

-كيف نمرر الدااتا للفيو

-اول طريقة نمرر داتا من الراوت نفسه ..ولكن هذا مش الطريقة الصحيحة ..
حكينا الصح انو الراوت يبعت ع كنترلر والكنترولر يستدعى الفيو

-عملنا فيو الكنتاكت جوا فولدر الفرونت
<h1>Hello Your Id is {{$id}}</h1>

-وهى مررنا الداتا من الروات نفسه
Route::get('contact', function () {
    return view('front.contact')->with('id', 2);
});

-قدر امرر اكتر من داتا واكتر من نوع ..سترنق انتجر اوبجيكت اى حاجة

Route::get('contact', function () {
    return view('front.contact')->with([
        'id' => 2,
        'name' => "thaer"
    ]);
});

-طبعتها هيك بالفيو
<body>
    <h1>Hello {{$name}} Your Id is {{$id}}</h1>
</body>

-ممكن بطريقة الى حكاها الزيرو ع طول بعد اسم الفيو بدون كلمة وذ
Route::get('contact', function () {
    return view('front.contact', [
        'id' => 5,
        'name' => "teto"
    ]);
});

-طريقة تالتة لو كان عندى داتا كتيرة بالمشاريع الكبيرة ..بخليها باريه

Route::get('contact', function () {
    $data = [];
    $data['pass'] = 'tate123';
    $data['name'] = 'Thaer';
    $data['email'] = 't@gmail.com';
    return view('front.contact', $data);
});

<div>
    hello {{$name}} your password is {{$pass}}  And your email is {{$email}}
</div>

-هلقيت حكينا هاى الطريقة مش صح ..الطريقة الصح انو الروات يبعتنى عالكنترولر
وبالكنترولر بعمل كل عملياتى اللوجيك وبمرر بياناتى

-بدى اعمل نفس الى عملته ولكن بالكنترولر

Route::get('contact', 'Front\FirstController@showContact');

-الكنترولر
public function showContact(){
        $data = [];
        $data['id'] = 4;
        $data['name'] = 'teto';
        $data['pass'] = 'thaer1475';
        $data['email'] = 't@hotmail.com';

        return view('front/contact', $data);
    }

-الفيو

<div>
        hello {{$name}} <br>
        your password is {{$pass}} <br>
        And your email is {{$email}} <br>
        And your id is {{$id}}

    </div>

-طبعلى
hello teto
your password is thaer1475
And your email is t@hotmail.com
And your id is 4

==================
-يعنى هاى هى الطريقة الصح ...عدا ازا كنت بدك تعرف كونستانت ثابت
ممكن نخليه بصفحة الروات نفسه
زى مسلا لقدام لما نيجى نشتغل بالباجينيشن ..الى هو تعدد الصفحات
ممكن اعرفله ثابت اقله انو عدد العناصر مسلا يكون بكل صفحة 5 مسلا ع مستوى الموقع كله بروح بقله عادى
define('PAGINATE', 5);
-بس هاد الكلام لسا قدام راح نشرحه
===================

-ممكن امرر الداتا بكمان طريقة ..لو مسلا عندى اوبجيكت كبير جدا
-بدى اعمل اوبجيكت مسلا ..واحط فيه بروبيرتز تبعينه
-وعشان امرره للفيو ..عنا ميثود من البى اتش بى اسمها compact بمرر الها هاد المتغير تبع الاوبجيكت من غير علامة الدولار

public function showContact(){

        $obj = new FirstController();
        $obj-> gender = 'male';
        $obj-> name = 'teto';
        $obj-> univ = 'Al-Azher';
        $obj-> email = 't@hotmail.com';
        $obj-> id = 'teto525';


        return view('front/contact', compact('obj'));
    }

-عملنا اوبجيكت من اى كلاس هان بس لتوضيح الفكرة
-كيف بدى استقبلهم بالفيو

<div>
        hello {{ $obj -> name }} <br>
        you are {{ $obj -> gender }} <br>
        your Univercity is {{ $obj -> univ }} <br>
        And your email is {{ $obj -> email }} <br>
        And your id is {{ $obj -> id }}
    </div>

-طبعلى

hello teto
you are male
your Univercity is Al-Azher
And your email is t@hotmail.com
And your id is teto525

-طيب بدى امرر الاريه القديمة والوبجيكت مع بعض ..بقدر اه طبعا

public function showContact(){
        $data = [];
        $data['id'] = 4;
        $data['name'] = 'teto';
        $data['pass'] = 'thaer1475';
        $data['email'] = 't@hotmail.com';

        $obj = new FirstController();
        $obj-> gender = 'male';
        $obj-> name = 'teto';
        $obj-> univ = 'Al-Azher';
        $obj-> email = 't@hotmail.com';
        $obj-> id = 'teto525';


        return view('front/contact', compact('obj'), $data);
    }

-الفيو هيك

<body>

    <div>
        hello {{$name}} <br>
        your password is {{$pass}} <br>
        And your email is {{$email}} <br>
        And your id is {{$id}}
    </div>

    <br>

    <div>
        hello {{ $obj -> name }} <br>
        you are {{ $obj -> gender }} <br>
        your Univercity is {{ $obj -> univ }} <br>
        And your email is {{ $obj -> email }} <br>
        And your id is {{ $obj -> id }}
    </div>

</body>

-طبعلى
hello teto
your password is thaer1475
And your email is t@hotmail.com
And your id is 4

hello teto
you are male
your Univercity is Al-Azher
And your email is t@hotmail.com
And your id is teto525

===============================================================================

          #023 - create Landing Page with laravel blade and bootstrap

-بدنا نعمل لاندق بيج نحطها عنا بمشروعنا ..عان بعد هيك نفهم الفيو انهيريتانس
-مش الوراثة الى بنعرفها ..لا كيف نقسم صفحتنا لفوتر وهيدر والكلام الى شفناه مع الزيرو

-بالنسبة للبيج الى بدنا نركبها انا حملتها وهى موجودة عنا بالدوانلود اسمها
startbootstrap-freelancer-gh-pages
حملتها من الموقع من هان
https://startbootstrap.com/theme/freelancer

-فكيت الضغط عنها ..فيها ملف سى اس اس وملف جافا سكريبت وملف اسيست وصفحة الاندكس

-بدنا نتعلم كيف نحطهم بموقعنا ووين نحطهم

-او جرب ع اى مشروع من القدام الى عنا جرب تحطه بالبروجيكت هان واشتغل عليه

-الملفات الى عنا كلها بناخدها وبنحطها بفولدر public لانو حيكنا انو هاد الملف بتحط فيه ملفات السى اس اس وغيرها ..الامور الى بتنشاف

-صفحة الاندكس ..طبعا بدنا نحطها بملف الفيوز
روح اعمل صفحة مسلا اسمها Landing.blade.php
وانسخ صفحة الاندكسس زى ما هى وحطها بالصفحة الجديدة تبعتنا

-هلقيت كيف بدنا نصل للفيو هاى الى عملناها ..بدنا نعمللها راوت
خلينا نعمل روات عالفيو مباشرة عشان ما ناخد وقت بكنترولر ..خلينا نعمله مباشرة عالفيو

Route::get('landing', function () {
    return view('landing');
});

-وهيك روح زور الروات http://localhost:8001/landing
راح يجيبلك الصفحة نفسها

-وهيك صارت الصفحة عنا بالمشروع بالسى اس اس تبعها بكل اشى

-نيجى نعرف كيف نتعامل مع ملفات السى اس اس والجاف الى بالبليك

-هان ازا بتلاحظ تعرف عالملفات مباشرة لانهم موجودين مباشرة داخل ملف البابليك

-ازا بتلاحظ بصفحتنا ال لاندق الى عملناها ..كيف مستدعى ملف السى اس اس ..هيك
عنا فولدر اسمه css وفى ملف اسمه style.css
-عشان الفولدر نفسه موجود داخل الببليك مباشرة ..شافو ع طول زى ما كان مكتوب بصفحة اللاندق زى هيككك

        <link href="css/styles.css" rel="stylesheet" />

-ممكن نخليها هيك ..وممكن نعملو بطريقة تانية عن طريق ميثود هيلبر فنكشن اللارفيل
عاملاها عشان تفوت تجيب الى الملفات الى جوا فولدر الببليك اسمها asset()

-بالرطيقة الجديدة هيك بدها تصير

        <link href="{{ URL::asset('css/styles.css') }}" rel="stylesheet" />

-ونروح تحت ع ملف الجافا سكريبت نعملهم بنفس الطريقة برضو
-كان هيك
        <script src="js/scripts.js"></script>

-خليناه هيكك
        <script src="{{ URL::asset('js/scripts.js')}}"></script>

-طيب انا فهمت الطريقة وهلقيت عشان ارتب شغلى بدى اعمل ملف اسمه landing-page
جوا الببليك ..واحط فيها ال3 ملفات تعين اللاندق

-هلقيت لو تروح تشغل لاصفحة راح تلاقيها بدون سى اس اس وبدون جى اس ...لانو ما لقى ملفاتها بعد ما غيرت مكانهم ..راح تشوف الصفحة معفنة زى لما يكون النت بطئ بدون سى اس اس او جى اس

-طيب عشان نشغلهم من مكانهم الجديد الهلقيت ..بدنا نروح نغير المسارات
-صار عنا ممسار السى اس اس هيك
<link href="{{ URL::asset('landing-page/css/styles.css') }}" rel="stylesheet" />

-ومسار الجى اس هيك
        <script src="{{ URL::asset('landing-page/js/scripts.js')}}"></script>

-زودنا قبلهم اسم الفولدر الجديد الى حطيتهم فيه

-يعنى المعلومة الى بدك تعرفها ...انو ما بنكتب قبل المسار اسم فولدر الببليك خلص
لانو هاى الهيلبر ميثود بتفوت جوا الببليك نفسه وبتبحث عن الملف الى انت بدك اياه

================================================================================

   #024 - laravel multilanguage views & switch language تعدد اللغات بلارافل

-بما انو بنشرح بالفيو والملفات الى حواليها ..خلينا نشرح فولدر اللغات
-موجود بفولدر resource مملف اسمه lang
-اللارافيل بتخلينا نعمل موقع متعدد اللغات بطريقة سهلة جدا
-اللغة الديفولت عنا هان الانجليزية

-مسلا بدنا نعمل ملف اسمه ar
-كل الملفات الى موجود بملف الانجليزى لازم كلها ناخدها عنا بملف العربى
عشان نغيرها
-ولو بدنا نعمل لغة فرنسى بنعمل الها فولدر ..وكل الملفات الى عنا راح ناخدها بنفس الطريقة برضو ونحطها بفولدر الفرنس وهكذا

-عنا بالمشروع الاصلى 4 ملفات ملف الوس والباجينيشن والباسورد والفاليديشن

-كل ملف فيهم موجود فيه كلمات بالكى تبعتها وجو مترجمة بالانجليزى

-نشوف مسلا ملف الباسورد
 'reset' => 'Your password has been reset!',
    'sent' => 'We have emailed your password reset link!',
    'throttled' => 'Please wait before retrying.',
    'token' => 'This password reset token is invalid.',
    'user' => "We can't find a user with that email address.",

-هى الكلمات الموجودة بملف الباسورد مسلا ..لو انت حابب تعمل موقعك عربى كمان
بتاخد هاد الملف وبتحطه بفولدر العربى وبترجمهم للعربى

-مسلا بدى اعمل صفحة جديدة ..اخليها للكمات الرسائل ..المسجات الى بتطلعى
-بعمل صفحة اسمها message.php وبحطها بفولدر لعربى وبفولدر الانجليزى ..نفس الاسم لازم تكون خلى بالك
والكى نفس الكى تبع الكلمات زى ما احنا عارفين

-خد صفحة الباسورد واسنخها جوا صفحة المسجات الى عملناها وامسح كلماتها وابدا اكتب كلمات الى بدك اياها

-عملنا صفحة المسجات وهى بدنا نحط فيها الكلمات
-صفحة المسجات الى بفولدر العربى
return [

    'hello admin' => 'مرحبا بك ايها المسؤل فى اللغة العربية ',
    'hello user' => 'مرحبا بكم ايها الاعضاء فى اللغة العربية ',


];
-صفحة المسجات الى بفولدر لانجلش


return [

    'hello admin' => 'hello all admin in English lang',
    'hello user' => 'hello all user in English lang',

];


-هلقيت كيف بدنا نستدعى الكلمات هدول بالفيو

-خلينا نشتغل عالفيو الويلكم الرئيسية

-تحت كلمة لارفيل بدى استدعى اى كلمة من هدول

<div class="title m-b-md">
    Laravel
    <p>{{ __('messages.hello admin')}}</p>
    <p>{{ __('messages.hello user')}}</p>
</div>

-بكتبهم بالطريقة هادى {{ __('messages.hello admin')}}
-بقله اسم الملف بعدين دوت ..بعدين بعطيه الكى تبعى الى بدى يجيبلى كلمته
-هان طبعلنا

Laravel
hello all admin in English lang

hello all user in English lang

DOCS LARACASTS NEWS BLOG NOVA FORGE VAPOR GITHUB


-لانو اللغة الديفولت تبع التطبيق عنا انجليزى

-طيب لو بدنا الموقع عربى ...لقدام راح نتلعم كيف نحول ما بين عربى وانجليزى عن طريق زر مسلا او انو نحطهم فوق بالنافبار وانت تختار منهم

-ولكن هلقيت عشان نشوف الفكرة بس ...بدنا نروح نغير الديفولت تبع الموقع
نخليه من انجليزى لعربى

-بنروح ع فولدر الكونفيق config  -> بعدين ملف app.php

-راح تلاقى من ضمن الملف كاتبلك اللغة

    'locale' => 'en',

-غيرها خليها

    'locale' => 'ar',

-روح حدث الصفحة راح تلاقيها تغيرت لعربى

Laravel
مرحبا بك ايها المسؤل فى اللغة العربية

مرحبا بكم ايها الاعضاء فى اللغة العربية

DOCS LARACASTS NEWS BLOG NOVA FORGE VAPOR GITHUB

-رجعها تانى لانجلش ..راح ترجع الصفحة بالانجليزى


==============================================================================

        #025 - view inheritance & Layouts extends - شرح layouts

-بدو يشرح كيف نقسم الصفحة ونستخدم الييلد والسكشن ..انا عارفها من الزيرو
-وهان عنده صار يشتغل ع صفحة اللاندق الى عملها

-انا بدى اجيب المشروع القديم تبعنا الى اسمه template3 واشتغل عليه
-عملته نفس ما عملت صفحة اللاندق
-حطيت ملفاته باللبليك
-وعملت فيو اسمها template3 وحطيت فيها صفحة الاندكس نسختها
وعدلت عالمسارات انو حطيتهم بالببليك بفولدر اسمه template3
-حيتى مسارات الصور عدلتها كمان

-بالنسبة للمسارات ممكن اخلى المسارات القديمة عادى ..وممكن اعملها بالطريقة الجديدة الى اخدناها

<!--My Code-->
    <title>Template3</title>
    {{-- <link rel="stylesheet" href="template3/css/font-awesome.css"> --}}
    <link rel="stylesheet" href="{{URL:: asset('template3/css/font-awesome.css') }}">
    {{-- <link rel="stylesheet" href="template3/css/normalize.css"> --}}
    <link rel="stylesheet" href="{{URL:: asset('template3/css/normalize.css') }}">

    {{-- <link rel="stylesheet" href="template3/css/style.css"> --}}
    <link rel="stylesheet" href="{{URL:: asset('template3/css/style.css') }}">

-وعشان تتاكد ..السى اس اس اعملتهم عالطريقة الجديدة
-والجيكويرى تحت خليتهم عالطريقة القديمة ..وضل شغال عادى الموقع

<script src="template3/js/jquery-3.1.1.min.js"></script>
<script src="template3/js/jquery.nicescroll.min.js"></script>
<script src="template3/js/custome.js"></script>


-وعملت الها راوت

Route::get('template', function () {
    return view('template3');
});

-يعنى فوت عالروات هاد
http://localhost:8001/template

-بيفتحلك مشروعنا القديم نفسه

-طيب عشان ابدا اقسم مشروعى ...بدى اخد نفس المشروع واعمله بفولدر اسمه
tanats داخل فولدر الفرونت نفسه

-اعملت فيه فولدرين ..واحد احط فيه صفحات الانكلود ..الهيدر والفوتر
-والتانى لصفحة اللى اوت ..عملت داخله صفحة اسمها الماستر عشان اورث منها

-وداخل فولدر التناتوس نفسه عملت صفحتين ..2 فيو واحدة اسمها tanatos.blade.php
بدى اعرض نفس الصفحة القديمة ولكن عن طريق انى اعمل اكستند وانكلود

-وصفحة تانية اسمها tanatos-contact.blade.php
-بدى اغير حتوى البادى تبعها

-عالعموم عملت للصفحتين لكل واحدة راوت مباشرة بالاول زى هيك


Route::get('tanatos', function () {
    return view('front/tanatos-template/tanatos');
});

Route::get('tanatos-contact', function () {
    return view('front/tanatos-template/tanatos-contact');
});

-بعدين عملتلهم كنترولر جوا فولدر اسمه Tanatos موجود جوا فولدر الكنترولر الاساسى
-عملت داخله كنترولر عشان اعمل فيه ميثودات واقدر امرر بيانات

Route::group(['namespace' => 'Tanatos'], function() {
    Route::get('tanatos-home', 'TanatosController@showHome');
    Route::get('tanatos-contact', 'TanatosController@showContact');
});

-لما تراجع الشغل راح تفهم كل اشى

===============================================================================

                     #026 - view directives

-بدو يشرح كيف نتعامل بملف البليد مع if if-else
والشغلاتى هاى كلها

-عملت فيو جديدة اسمها aboutme.blade.php بفولدر التناتس
وعملتها راوت بميثود ..بيبعتنى ع نفس الكنترولر الى بنشغل فيه
وضفت ميثود جديدة للفيو الاباوت
وعملت فيها كل شغلى ...ضرورى تروح شوفها مشروح فيها كل الدرس هاد
Route::group(['namespace' => 'Tanatos'], function() {
    Route::get('tanatos-home', 'TanatosController@showHome');
    Route::get('tanatos-contact', 'TanatosController@showContact');
    Route::get('tanatos-about', 'TanatosController@showAbout');
});

-هى الراوت الاخير الى بودى عليها

===============================================================================

  #027-Auth Login and Register with laravel part1 نظام التسجيل وتسجيل الدخول بلارافل

- بدنا نتكلم عن التسجيل وتسجيل الدخول ..اللارافيل عاملاه النا جاهز بس بدنا نعرف كيف نعملهم
-بعدين بدنا نتعلم كيف نعمل ريسيت للباسورد ..ازا نسيت كلمة السر كيف تعمللها استرجاع
-بعدين بدنا نتعلم كيف نعمل فيرفيكسشن للايميل ...يعنى التسجيل عنا كيف بكون
انت بتحط ايميلك والباسورد ..وهو بضيفك عالداتا بيز خلص ..انت بتروح بتعمل تسجيل دخول بعدها

-احنا بدنا نتعلم كمان كيف لما يسجل بالموقع يجى اله ايميل عالايميل تبعه ..اقه روح ع ايميل
بعتلك ايميل عشان نتاكد انو هاد ايميلك ولا لا ..واضغط علارابط الى بعتلك اياه ..عشان تتفعل عنا بالموقع

-هاد الكلام كل بدا من لارافيل 6 ...لانو الصفحات الجاهزة الى عاملى اياها للوق ان وريجيستر
معمولين بالفيو جى اس ..واصدارات لارافيل قبل الاصدار السادس ما كان فيها فيو جى اس

-الفيو جى اس ..هى فريم وورك تابعة للجافا سكريبت بنستخدمها عشان نعمل سنقل بيج ابلكيشن
من غير ما نعمل ريلود ما بين الصفحات ولا ريفريش ولا اى حاجة لما نتنقل بين الصفحات

-ولكن هاد الديفولت لوثنتيكشن ..لوق ان وريجيستر
-يطب ممكن نعمل لو ان وريجيستر بايدينا من الصفر ..اكيد ممكن..بدون ما تستخدم الديفولت راوتس تبعته ولا الديفولت اوثنتكيش ولا الفيوز الديفولت كل هاد هو بيعطينا اياه جاهز

-ولكن مستقبل انت ممكن تحتاج تعمل تسجيل دخول وتسجيل ..كاستمايز خاص فيك انت ..ممكن تحتاج تعمل لوق ان اوثنتكيشن للدكتور مسلا ..وبنفس الوقت بدك لوق ان اوثنتيكشن للمشرف كمان وبنفس الوقت تعمل لوق ان اوثنتكيشن لليوزر العادين ..كل هاد بنفس المشروع بدك تعمله ...بالتالى اللوق ان الديفولت تبعت اللارافيل مش راح تنفعك هان


-نبدا الشغل العملى

-اول حاجة زى ما تعلمنا مع الزيرو وزى ما قرينا بالموقع بدنا نعمل الامر
The Bootstrap and Vue scaffolding provided by Laravel is located in the laravel/ui Composer package, which may be installed using Composer:

composer require laravel/ui:^2.4

-هاد الامر هو الى بيعمل عنا سيت اب للفيوز تبعتنا والرواتس تعتنا ..جاهزة من غير من نكتب اى اشى

========

-المهندس اول اشى عمل الامر هيك

composer require laravel/ui --dev

dev : قال عنها عشان الديفيلومب عشان التطوير بيستخدموها تبعين النود جى اس ..يعنى زى ما حكى الزيرو وشرحها

-بعدين قال هو بنفذ هاد الامر بنزل النا اللارافيل يو اى..يعنى اليوزر انترفيس
وبحطها بالديف بيربوس..فى الديفيلوبر...خلى الامر يخلص وبنرجع تانى

========
معلومة عالهامش ...انا فتحت الامر هاد بلافيل 6 وبلارفيل 7

لارفيل 7 كان هيك بالموقع
composer require laravel/ui:^1.0 --dev

لارافيل 7 كان هيك بالموقع
composer require laravel/ui:^2.4

-وانا ع فكرة بشتغل ع 7 مش ع 6 ...والمهندس لسا شكلو راح يرجع يقول طلع عندو خطا من الامر

========

-نرجع للمهندس

-لما خلص الامر عندو طلع عندو خطا ..قال انو ايرور بسيط وبقول انو هو اتعمد انو يعمل هاد الايرور ..عشان يفهمنا الفرق بين لارافيل 6 ولارافيل 7

-بقول انو الخطا تبعه بقله ..انو عامل تنزيل ل لارفيل يو اى 2 ..وفيرجن 2 هاد بينزل مع لارافيل 7 ..ولكن لارفيل 6 الو هو شغال عليه بيشتغل ع لارفيل يو اى الاصدار 1

-راح خلى الامر تبعه هيك
composer require laravel/ui:^1.2

-انا عشان لارفيل 7 بدى اعمل نفس الامر الى بالموقع واجرب الى هو
composer require laravel/ui:^2.4

-اعملت الامر وهيو خلص
C:\xampp\htdocs\Laravel_Course
λ composer require laravel/ui:^2.4
./composer.json has been updated
Running composer update laravel/ui
Loading composer repositories with package information
Updating dependencies
Lock file operations: 1 install, 0 updates, 0 removals
  - Locking laravel/ui (v2.4.0)
Writing lock file
Installing dependencies from lock file (including require-dev)
Package operations: 1 install, 0 updates, 0 removals
  - Downloading laravel/ui (v2.4.0)
  - Installing laravel/ui (v2.4.0): Extracting archive
Generating optimized autoload files
> Illuminate\Foundation\ComposerScripts::postAutoloadDump
> @php artisan package:discover --ansi
Discovered Package: facade/ignition
Discovered Package: fideloper/proxy
Discovered Package: fruitcake/laravel-cors
Discovered Package: laravel/tinker
Discovered Package: laravel/ui
Discovered Package: nesbot/carbon
Discovered Package: nunomaduro/collision
Package manifest generated successfully.
74 packages you are using are looking for funding.
Use the `composer fund` command to find out more!

C:\xampp\htdocs\Laravel_Course
λ

-هلقيت بدنا نفهم ايش الى صار ..والامر وين تنفذ والريكوير يو اى هادى وين راحت

-طالما قلنا بالاومر كومبوزر ..يبقى راح نفتح ملف الكمبوزر دوت جيسون

-لو رحت تفتح ملف composar.json ...راح تلاقيها انضافت جوا الريكوير
-افتح الملف وروح ع الريكوير راح تلاقيها اخر اشى
"require": {
        "php": "^7.2.5|^8.0",
        "fideloper/proxy": "^4.4",
        "fruitcake/laravel-cors": "^2.0",
        "guzzlehttp/guzzle": "^6.3.1|^7.0.1",
        "laravel/framework": "^7.29",
        "laravel/tinker": "^2.5",
        "laravel/ui": "2.4"
    },

-بالاول كانت هيك بدونها
"require": {
        "php": "^7.2.5|^8.0",
        "fideloper/proxy": "^4.4",
        "fruitcake/laravel-cors": "^2.0",
        "guzzlehttp/guzzle": "^6.3.1|^7.0.1",
        "laravel/framework": "^7.29",
        "laravel/tinker": "^2.5"
    },

-بعد ما نقذنا الامر نزلت هان

-هيك شغلنا تمام ..وخلصنا اول خطوة بعد ما نفذنا الامر ونزلنا اللارفيل يو اى بالفيجن تعبها الى حكناله عنو

==========
لو ترجع عالموقع راح تلاقى الامر التانى

// Generate basic scaffolding...
php artisan ui bootstrap
php artisan ui vue
php artisan ui react

// Generate login / registration scaffolding...
php artisan ui bootstrap --auth
php artisan ui vue --auth
php artisan ui react --auth
=============

-نرجع للمهندس

-هلقيت نعمل الامر التانى الى هو
php artisan ui vue --auth

-هاد الامر راح يعملى دبفولت اوثونتكيشن ...الراوتس تعتها والميثود لوق ان
والميثود ريجيستر بالكنترولر تبعتهم وراح يعملى الديفولت فيوز كمان الهم ..ولكن راح يستخدمهم معهم الفيو جى اس ...يعنى راح تبقى سنقل بيج ابلكيشن ..بنتنقل بينهم بدون ما يصير عنا ريلود بين لاصفحات

-نروح ننفذ الامر ..المهندس لما نفذ الامر ..قلو لازم يكون عندك npm ..صار يشرح شو هو وكيف ننزله

-انا نفذت الامر برضو عمل عندى زى المهندس
C:\xampp\htdocs\Laravel_Course
λ php artisan ui vue --auth
Vue scaffolding installed successfully.
Please run "npm install && npm run dev" to compile your fresh scaffolding.
Authentication scaffolding generated successfully

-ااااه ...هان بقلى الفيو ..انستول سكسس ..نزل بنجاح
-بعدين بقلى اعمل الامر npm install && npm run dev " to compile your fresh scaffolding

-npm install && npm run dev هان عبارة عن امرين زى كانى حكتله الامر الاول بعده الامر التانى زى هيك
npm install
npm run dev

-ولكن بينفع ننفذهم بامر واحد عاد زى هيك بعلامة الاند npm install && npm run dev
-الامر التانى  npm run dev يعنى انا بقله خليها بالمود ديف الى كنا نحكى عنو ايام الزيرو

-انا عندى npm خلينى اعمل الامر الى قلى عليه لنشوف
-عملت الامر
npm install && npm run dev

=================
-طول واخد وقت لما خلص ..وعمل شغل كتير وبلنهاية كتبتلى

98% after emitting SizeLimitsPlugin

 DONE  Compiled successfully in 49850ms                                                                                                                       5:33:43 PM

       Asset      Size   Chunks             Chunk Names
/css/app.css   179 KiB  /js/app  [emitted]  /js/app
  /js/app.js  1.41 MiB  /js/app  [emitted]  /js/app

C:\xampp\htdocs\Laravel_Course
λ
===================

-هلقيت احنا قلنالها بالامر --dev يعنى للتطوير زى ما قال الزيرو

-لو تروح ع ملف package.json راح تلاقيها انضافت بالتطوير

"devDependencies": {
        "axios": "^0.19",
        "bootstrap": "^4.0.0",
        "cross-env": "^7.0",
        "jquery": "^3.2",
        "laravel-mix": "^5.0.1",
        "lodash": "^4.17.19",
        "popper.js": "^1.12",
        "resolve-url-loader": "^2.3.1",
        "sass": "^1.20.1",
        "sass-loader": "^8.0.0",
        "vue": "^2.5.17",
        "vue-template-compiler": "^2.6.10"
    }

-هيها ضافلى اياها
"vue": "^2.5.17",

-وضافلى كمان اعتقد الجيكويرى والبوتستراب معهم وحاجة اسمها بوبر جى اس
"bootstrap": "^4.0.0",
"jquery": "^3.2",
"popper.js": "^1.12",

-شوف الفرق ما بين الملف هان ...والملف بالمشرورع القديم تاع الزيرو قبل ما نعمل الامر هاد
-بالمشروع القديم كانو بس هدول
"devDependencies": {
        "axios": "^0.19",
        "cross-env": "^7.0",
        "laravel-mix": "^5.0.1",
        "lodash": "^4.17.19",
        "resolve-url-loader": "^3.1.0",
        "sass": "^1.15.2",
        "sass-loader": "^8.0.0",
        "vue-template-compiler": "^2.6.14"
    }


==============

اااااه تزكرت ....هدول الامرين الى عملناهم مع الزيرو برضو الامر الاول لما عملنا
npn run i وحيكنا هى نفسها npn run install

-الامر الى نزللنا فولدر الكبير الى فيه مئات الملفات node_modules
-ولكن احنا هان بمشروعنا ما كنا عاملينه
-عشان هيك لما عملنا الفيو ...حكالنا انو الفيو نزلت وتمت بنجاح ولكن اعمل انستول ل ان بى ام

-والامر التانى
npm run dev
هاد الى عملناه مع الزيرو الى كان يضيف النا الميكس الى بتعمللنا كومبايل للملفات
وللميكس تاسك كلها ...وبينشا النا فولدرين سى اس اس وجى اس جوا البابليك وهيكا

-هو هان هى الامرين الى طلبهم منا ..يعنى لو ما فهمتهم ارجع لشرح الزيرو بتفهمهم

-وازا بتلاحظ هان كمان لما نفذناه برضو ضاف النا الميكس عالديفيلوبر بملف الباكييج جيسون "laravel-mix": "^5.0.1", زى ما انضافت معنا ايام الزيرو

======================

-ما علينا نرجع لمشروعنا

-بعد ما نفذنا الامرين ..راح تلاحظ زى ما حكينا ملف package.json
شو صار فيه ..وشو انضاف عليه زيادة

-وراح تلاحظ تغير كتير صار عنا بالفولدرات

-مسلا فولدر الفيوز ...راح تلاقيه ضاف النا فولدر اسمه auth
-داخله ملفات صفحات ...لوق ان..ريجيستر ..فيريفاى
-وكمان فولدر اسمه passwords
-داخله 3 صفحات ..كونفيرم ..ايميل ..ريسيت
-هدول الصفحات الفيوز الى راح تشوفهم بوجهك بالموقع

-لو رحت ع فولدر الكنترولر برضو راح تلاقى عمل النا ملف اسمه auth
وفى 6 صفحات كنترولر كمان جاهزين

-وبرضو لو رحت ع فولدر البابليك ..راح تلاقى انشا النا ملف سى اس اس وملف جى اس برضو
وفيهم ملفات سى اس اس معمول الها كومبايل من ملف جديد نحط جنب ملف الساس ..وملف الساس عمل الو ايمبورت لحاله ولما عملت امر الكومبايل طلعه النا ..وكذلك ملف جى اسى

-لو تروح ع ملف الساس ...راح تلاقيه ضاف النا ملف اسمه _variable.scss
جنب ملف app.scss مباشرة واخد منو ايمبورت ملف الاب
-ومع امر الكومبايل الى عملناه ..طلعلنا ملف السى اس اس الى بالببليك

-واعتقد كمان انو انضاف معنا فيو جديدة جوا فولدر الفيو مباشرة جنب الويلكم الرئيسية
اسمها home.blade.php

-الفيوز الجديدة الى نزلت بفولدر auth انت بتقدر تعدل ع اى صفحة فيهم
عادى جدا ..بتفتحهم وبتعدل فيهم الى بدك اياه

================================================================================

   #028-Auth Login and Register with Laravel 6 laravel 7 part2 - تسجيل الدخول بلارافل

-حكى انو لما اعملنا الامر طلع عنا حاجة اسمها "laravel-mix": "^5.0.1"
طبعا عارفينها ومشروعه عند الزيرو

-الفولدر الضخم الى نزل عنا لما عملنا npm install الى هو node_modules
-هل لما نرفع ملفنا عالقيت هب بيترفع معنا ..اكيد لا ..وازا بتروح ع ملف
.gitignore راح تلاقيه انضاف معهم الى معمول الهم اقنور ..هيو اول واحد
/node_modules
/public/hot
/public/storage
/storage/*.key
/vendor
.env
.env.backup
.phpunit.result.cache
Homestead.json
Homestead.yaml
npm-debug.log
yarn-error.log

-لارافيل عامله حسابها عالكلام هاد ولحالها حطته بملف الاقنور

-نفس ما حكينا ايام ملف الفيندور ..لو المهندس رفع المشروع الى بيشتغل عليه عالقيت هب ..وانا اخدت منو كلون ..اكيد ما راح ينزل معى هاد الفولدر ..بالتالى احنا لحالنا بنروح بنعمل سيت اب بايدينا لل npm i بنعمل داخل المشروع الى اخدناه كلون

================

-نرجع للدرس تبعنا

-كيف بدنا نعمل الرواتس لللفيوز ولكل الشغل الى عملناه تبع اللوق ان والريجيستر

-لارافيل مجمعاه النا كله براوت واحد اسمه
Auth::routes();

-هيك كانك عملت لكل الميثودات والكنترولز والفيوز الى بخصو اللوق ان والريجيستر ..كانك عملت الهم راوتات

-هلقيت روح عالموقع تبعنا راح تلاقيه ضاف النا فوق
-كلمة Login وكلمة Register
-لو تضغط ع لوق ان ..بيبعتك ع صفحة اللوق ان ...الى فيها الفورم
-لو تضغط عالريجسيتر ..بيبعتك ع صفحة ريجستر الى فيها فورم التسجيل

-ريحنا عالجاهز بس علينا نكتب كلمة
Auth::routes();
-حطيناها بملف web.php تحت شغلنا القديم ..تحت الرواتس الى كنا عاملينها بالاول

-ازا بتتزكر زمان ..لما كنا نحط الميدل وير اوس ع اى فيو...كان يقللنا
انو صفحة اللوق ان مش موجودة ...لانو ميدل وير الاوث بيبعتنا ع صفحة اللوق ان


-ورحنا عملنا بادينا راوت اسمه لوق ان ..عشان ما يضل يقلى اللوق ان غير موجودة ..هلقيت خلص مش لازمة الى
رحت ووقفتها لانو صار عندى صفحة اسمها لوق انو والها روات والها كل اشى

-خلينا هلقيت نروح ع اى روات قديم محطوط عليه الميدل وير اوث ..ونفوت عليه
نشوف وين بدو يبعتنا

-رحنا عالروات هاد هى محطوط الو ميدل وير الاوس

//Middleware
Route::get('chek', function () {
    return "teto";
})->middleware('auth');

-لو دخلنا الرابط هلقيت
http://127.0.0.1:8000/chek

-مباشرة راح يحولنى ع صفحة اللوق ان الى فيها الفورم لانو احنا حطيناها خلص مجرد ما عملنا الراوت تبعها الى هو هاد
Auth::routes();

-طيب جرب وقفها ..يعنى فش عنا روات بيبعتنا عاللوق ان هلقيت ..وروح زور الرابط
http://127.0.0.1:8000/chek

-راح يطلعلك ايرور انو اللوق ان غير موجودة
Symfony\Component\Routing\Exception\RouteNotFoundException
Route [login] not defined.
http://127.0.0.1:8000/chek

==================================

-نرجع نكمل مع المهندس

-قبل ما نكمل مع المهندس
-لما عملنا شغلنا وشفنا التغيرات الى بالمشروع صارت
-انا قلت انو ضاف الى فيو جديدة اسمها home.blade.php
-ولاحظت انو انضاف الها كنترولر اسمها HomeController بفولدر الكنترلرز مباشرة
-داخلها فيها ميدل وير الاوث محطوط كونستركت ..وفيها ميثود اندكس
بتعمل ريتورن لفيو الهوم

-هلقيت المهندس لما عمل الشغل الى عملنا ...هو اعتقد انو طلع عندو بملف الروات الويب
-انعمل الو عالجاهز هيك
Auth::routes();

Route::get('/home', 'HomeController@index')->name('home');

-ما بعرف هما انكتبوا لحالهم ..ولا هو كتبهو بايدوا

-بس انا بعد ما عملت شغل اللوق ان والريجيستر ..ما لقيتهم مكتوبين
انا رحت ع ملف الويب وكتبت
Auth::routes();

-وهى كتبت الروات التانى تبع صفحة الهوم كمان
Route::get('/home', 'HomeController@index')->name('home');

-برضو هان لما تروح صفحة الهوم ..بحولك مباشرة ع صفحة اللوق ان
-روح والى نظرة ع فيو الهوم ..من ضمن الكلام الى فيها
 {{ __('You are logged in!') }}

-وروح الى نظرة عالكنترولر تبعها كمان ...اعتقد هاى الى بتطللعنا لما نعمل لوق ان
بتطلعلى رسالة انو انت الان عملت تسجيل دخول

================

-نرجع للمهندس
-نبدا نشرح هلقيت Register لو ضغطنا عليها راح تطلعلى الفورم تبع التسجيل

-طيب هاى من وين اجت ..من الفيو الى اسمه register.blade.php داخل فولدر الاوث

-روح وشوفها والقى نظرة عليها

-الخطوة الاولى عنا ...انو لازم اعمل هلقيت داتا بيز عندى عشان الى يسجل
يتسجل بالداتا بيز ع طول ..ولما يعمل لوق ان ..ازا موجود بالداتا بيز ..يعنى عمل ريجستر وسجل ...خلص يعمل لوق ان ويقدر يفوت الموقع

-خلينا نشوف كيف نعمل الداتا بيز عشان نخزن فيها اليوزر

-طالما انا راح اعمل داتا بيز ...يبقى انا لازم اكريت الداتا بيز والربط تبعها

-الربط تبعها بكون بملف .env
-لو دخلنا الملف ..موجود فيه

DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=laravel
DB_USERNAME=root
DB_PASSWORD=

-هو بقلى انو اعمل داتا بيز اسمها لارفايل ..اليوزر نيم الروت عارفينه محنا
وعارفين انو نا فيه باسورد ..من ايام كورس الداتا بيس

-طيب انا فرضا بدى اخلى الداتا بيز تبعتى اسمها authdb مسلا
DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=authdb
DB_USERNAME=root
DB_PASSWORD=

-هيك انا ربطت مشروع بداتا بيز اسمها authdb

-طيب هلقيت بدنا ننشا الداتا بيز تبعتنا هادى ..صح ولا لا

-خلينا نروح عالداتا بيز وننشا داتا بيز بنفس الاسم هاد

-او خلينى اسميها بنفس اسم المشروع تبعى عشان اعرف انها لمشروع بلاش اتخربط
خلينى اسمسها laravel_course

-اعمل الربط من جديد بالاسم الجديد
DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=laravel_course
DB_USERNAME=root
DB_PASSWORD=

-عملت الداتا بيز بنفس الاسم ...والداتا بيز لسا فاضية طبعا ما فيها اى جدول

-هلقيت بدنا نحط الجداول الموجودة عنا باى ديفولت ..جوا الداتا بيز هاى ..طالما انا بستخدم الديفولت اوثنتكيش لوق ان والكلام هاد كله تبعنا الى بنشرح فيه ..اكيد الهم جداول جاهزة لارافيل عاملهم

-لو تروح ع فولدر اسمه database  فيها فولدر اسمه migrations
-لو تفتحه راح تلاقى انو فيه 3 ملفات ..الى هما 3 جداول
- الاول اسمه
2014_10_12_000000_create_users_table.php

-التانى اسمه
2014_10_12_100000_create_password_resets_table.php

-التالت اسمه
2019_08_19_000000_create_failed_jobs_table.php

-احنا الى بفهمنا اول جدول ..جدول اليوزر الى راح اسجل فيه اليوزر تعونى
-لو تفتحه راح تلاقيه عبارة عن
public function up()
    {
        Schema::create('users', function (Blueprint $table) {
            $table->id();
            $table->string('name');
            $table->string('email')->unique();
            $table->timestamp('email_verified_at')->nullable();
            $table->string('password');
            $table->rememberToken();
            $table->timestamps();
        });
    }

-عنا عمود اى دى ..وعمود للاسم وعمود للايميل وعمود لتاكيد الايميل وعمود باسورد
وعمود التوكين وعمود التايم ستامب

-ولقدام راح نتعلم كيف ننشا جدول عن طريق المايقريشين زى هيك
او كيف نزود عمود هان او نحذف عمود

-وبينفع تعمل اى جدول بدك اياه بايدك جوا البى اتش بى ادمن عادى زى ما كنا نعمله


-طيب هلقيت عشان نبعت هدول الجداول للداتا بيز تبعتنا الى عملناها وربطناها مع المشروع ..بدنا نعطيه الامر

php artisan migrate

-نفذنا الامر

C:\xampp\htdocs\Laravel_Course
λ php artisan migrate
Migration table created successfully.
Migrating: 2014_10_12_000000_create_users_table
Migrated:  2014_10_12_000000_create_users_table (0.71 seconds)
Migrating: 2014_10_12_100000_create_password_resets_table
Migrated:  2014_10_12_100000_create_password_resets_table (0.49 seconds)
Migrating: 2019_08_19_000000_create_failed_jobs_table
Migrated:  2019_08_19_000000_create_failed_jobs_table (0.33 seconds)

C:\xampp\htdocs\Laravel_Course
λ

-هلقيت لو تروح الداتا بيز راح تلاقى فيها ال3 دجداول الى حكينا عنهم
failed_jobs
migrations
password_resets
users

-هيك راح تلاقيهم بالداتا بيز ..فوت عليهم وشوف  من ايش بيتكونو وشو فيهم اعمدة
-جدول اليوزر راح تلاقى فيه 8 اعمدة
الى حكينا عنهم لما شرحناه

id	name email	email_verified_at password	remember_token	created_at updated_at

-هلقيت كل اشى عنا جاهز بدون ام نكتب اى كود ..روح عالموقع واعمل ريجيستر باى اسم
راح تلاقى مباشرة انضاف هان بجدول اليوزر

-المهندس عندو وامب سيرفر ...كان لازم يعمل ريتارت للسيرفر ..انا عندى
مجرد ما الامر تنفذ لقيتهم انضافو عادى بكل سهولة

-المهندس تغلب فيها بالاخير اكتشف انو هو مشغل اكتر من مشروع عالسيرفر
ما كانت زابطة معو عالبورت هاد
DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=laravel_course
DB_USERNAME=root
DB_PASSWORD=

-خلاها ع بورت 3308 قال انتو راح تشتغل معكم من اول مرة بس انا عشان عامل اكتر من مشروع
وما تشغلو بالكم بالكلام هاد بكرا راح تفهموا كله
-ولما خلص القصة هاى ..طلع عندو اكسبشن تانى ..المهندس بقول انو هاد الاكسبشن باى ديفولت لازم يطلعلك لما انت تعمل مايقريشن بايدك
-وازا ما طلعلك بتكون انات شغال صح
-الاكشبشن الى طلع بالتيرمنال معو كان من ضمن الكلام
 انو specified kay was too long

-قال الحل تبعه بتروح ع فولدر ال app -> Providers ->AppServiceProvidr.php
-جوا الملف هاد بدنا نحط اللينقث تبعنا ..كانت ميثود البوت فاضية زى هيك
public function boot()
    {
        //
    }

-راح كتب فيها ..وقال انو جابها من مشروع تانى لازم يطلعنا هاد الاكسبشن ونحطه
public function boot()
    {
        //
    }

-كتب فيها هيك
 public function boot()
    {
        //
        Scehema::defaultStringLength(Length: 191);
    }

-بس انا لما كتبتها عشان اجربها طلعلى خطا رحت عملتها هيك
 public function boot()
    {
        //
        Scehema::defaultStringLength(191);
    }

-ضل الخطا الاحمر تحت كلمة Scehema نفسها
-هو عشان بيشتغل لارافيل 6 اعتقد ..ولكن انا ما حصل اى ايرور ولا اى اكسبشن من الى قال عنو وانضاف الى الجداول بسهولة بعد الامر
-ولكن كتب الشكلة وحلها ..عشان لو واجعتك بالمشتقبل تعرف تحلها

-ااااه خلص هيها زبطت هيك بالزبط لازم تنكتب
public function boot()
    {
        //
        Schema::defaultStringLength(191);
    }

-كان مطلع الى خطا عشان مش عامل ايبمورت لكلاس السكيما فوق
كتبت سكيما اى حاجة ..عشان يعملى ايمبورت فوق ...وبعدين مسحته وكتبه الديفولت طلعلى لحالها الكلمة كلها اصلا
هى الايمبورت تبعته
use Illuminate\Support\Facades\Schema;

-خلص انا مستحت لاشغل الى عملته ..وخليتها فاضية زى الاول ..لانو ما كان عندى اى مشاكل انا

-هلقيت المهندس رجع نفذ الامر تانى الى بخلى الجداول تصير بالداتا بيز الى عملناه
-رجع طلعلو كمان اكسبشن ..لانو بابالاول هو رفع جدول اليوزر اجى يكمل الباقى ..ضرب طلعلو اكسبشن قلو انو اللينقث توو لونق ..وراح حلها

-هلقيت عشان يحل الاكسبشن التانى ...راح حذف الجدول الى ارتفع عشان يرفعو كلو من جديد ينفذ الامر مرة تانية للكل الجداول
-كان مرفوع عنده جدول اليوزر والمايقريشن الرابع مهما 3 جداول بالاساس ..ولكن انا لما ارتفعو عندى فى حاجة اسمها مايقريشن ظهرت الداتا بيز عندى معهم

-المهم حذفهم ..ورجع نفذ الامر من جديد ..زبطت معو
=================================================================================

       #029 - complete Auth Login and Register with popularexceptions

- هلقيت خلينا نعمل ريجيستر لاى يوزر جديد

-دخلت انا بيوزر جديد
الاسم : thaer
الايميل : thaer@gmail.com
الباسورد : 12345678
تاكيد الباسورد : 12345678

-هان حطيت بالاول الباسورد 123
طلعلى رسالة فالدييشن ...بقلى انو الباسورد اقل حاجة يكون 8 احرف
خليته من 1 ل 8

-اول ما عملت تسجيل بالموقع ..دخلنى ع صفحة الهوم ..الى حكيت عنها المرة الى فاتت
وعملت الها راوت ...دخلنى عليها وكتبلى الرسالة الى فيها
You are logged in!

-والنافبار صار عندى هيك
Laravel                    thaer

-وعند الاسم دروب جاون ليست فيها روات اسمه logout

-شغل نضيف نضيف نضيف

-طيب هلقيت نروح عالداتا بيز نشوف انضاف الاسم بجدول اليوزر ولا لا

id	name email	email_verified_at password	remember_token	created_at updated_at

1 thaer thaer@gmail.com Null $2y$10$H7JmO/HdG0KtAKeEc.DGw.kZqEVbJBALMl/isuuKrcvrac1QbCpu2  Null  2021-08-13 17:20:32  2021-08-13 17:20:32

-ضاف كل بيااتى بجدول اليوزر ..حتى الباسورد عامل الها هاش كمان

-هلقيت خلينا نعمل logout  لما عملت تسجيل خروج ..رجعنى عالصفحة الرئيسية تبعت الموقع ...الويلكم

-المهندس اول ما بدا يشرح تسجيل الدخول والريجيستر ..مسح كل الراوتات القديمة الى عندو انا خليتها

-المهندس لما اجى عمل تسجيل خروج ..قلو انو الصفحة غير موجودة 404
لانو ما في عندو راوتات قديمة ....وراوت تسجيل الخروج
بيعتك ع الموقع نفسه /  يعنى ع ملف البابليك مباشرة
واحنا عنا راوت عن /  تعرضلى صفحلة الويلكم

-عالعموم هو راح عمل راوت جديد زى هيك برجعله كلمة هوم
Route::get('/', function () {
    return "Home";
});

-وصار لما يعمل تسجيل خروج تطلعلو بس كلمة هوم ..ومفيش فوق عندو لوق ان وريجيستر
صار عشان يفوت عاللوق ان يكتب فوق بالرابط لوق ان ويفوت عليها

-ولكن انا الامور تمام بعمل تسجيل خروج بيبعتنى ع صفحة الويلكم وفيها موجود فوق
ريجستر ولوق ان

-طيب نرجع لموضوعنا

-بعد ما عملت تسجيل خروج ..هلقيت روح اعمل تسجيل دخول بنفس الايميل والباسورد الى سجلت فيهم
-دخل عالسريع..وانا لما سجلت المتصفح قلى نحفظك ..حكلتله اه ..ف لما اجيت
اعمل تسجيل دخول لقيته لحالو كاتبلى الايميل والباسورد

-وفورم اللوق ان برضو فيها remmeber me كمان ازا بتعلم عليها صح بيحفظ خلص

-عملت يوزر تانى اسمه teto teto@gmail.com 12345678

-صار عندى 2 يوزر بالموقع وبالداتا بيز ..بفوت باى واحد فيهم

================================================================================

  #030 - Login Via Mobile Number with Laravel 6 & laravel 7 تسجيل الدخول برقم الموبيل

-انا كنت لاحظ انو لما بتنقل بين اللوق ان والريجيستر ..عادى بيعمل ريلود للصفحات
مش زى ما قال المهندس ..انا بفكر انو زى الاجاكس بدون ما تعملى ريلود

-عاد المهندس ببداية الدرس بقول ..عرفنا كيف نعمل ريجيستر ولوق ان ..بالديفولت تعين اللارافيل وعرفنا ايش معنى سنقل بيج ابليكيشت عن طريق الفيو
وبعد شوية بقول ...لو تلاحظ واحنا بنتنقل بين الصفحات ..هو معتمد عالفيو
ولكن مش عاملها سنقل بيج ابلكيشن معنا حاليا هنا ولكن هو معتمد على الفيو بالشغل تبعه

- بالدرس هاد ...بدنا نتعلم كيف نعمل حاجة كستمايز ..نعرف كيف نغير
-بدل ما بعمل تسجيل دخول بالايميل والباسورد ..بدنا نعمل تسجيل دخول برقم الجوال والباسورد

-وبالتالى بدنا نغير بالفورم تبعت الريجيستر كمان ..نزود الها خانة لرقم الجوال
-وراح نتعلم كيف نزود الها فييلد ونحذف منها فييلد كمان لو بدنا

-اول حاجة بدنا نروح عالفيو تبعت اللوق ان

============
@extends('layouts.app')

    @section('content')
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card">
                    <div class="card-header">{{ __('Login') }}</div>

                    <div class="card-body">
                        <form method="POST" action="{{ route('login') }}">
                            @csrf

                            <div class="form-group row">
                                <label for="email" class="col-md-4 col-form-label text-md-right">{{ __('E-Mail Address') }}</label>

                                <div class="col-md-6">
                                    <input id="email" type="email" class="form-control @error('email') is-invalid @enderror" name="email" value="{{ old('email') }}" required autocomplete="email" autofocus>

                                    @error('email')
                                        <span class="invalid-feedback" role="alert">
                                            <strong>{{ $message }}</strong>
                                        </span>
                                    @enderror
                                </div>
                            </div>

                            <div class="form-group row">
                                <label for="password" class="col-md-4 col-form-label text-md-right">{{ __('Password') }}</label>

                                <div class="col-md-6">
                                    <input id="password" type="password" class="form-control @error('password') is-invalid @enderror" name="password" required autocomplete="current-password">

                                    @error('password')
                                        <span class="invalid-feedback" role="alert">
                                            <strong>{{ $message }}</strong>
                                        </span>
                                    @enderror
                                </div>
                            </div>

                            <div class="form-group row">
                                <div class="col-md-6 offset-md-4">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" name="remember" id="remember" {{ old('remember') ? 'checked' : '' }}>

                                        <label class="form-check-label" for="remember">
                                            {{ __('Remember Me') }}
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group row mb-0">
                                <div class="col-md-8 offset-md-4">
                                    <button type="submit" class="btn btn-primary">
                                        {{ __('Login') }}
                                    </button>

                                    @if (Route::has('password.request'))
                                        <a class="btn btn-link" href="{{ route('password.request') }}">
                                            {{ __('Forgot Your Password?') }}
                                        </a>
                                    @endif
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
@endsection
======================

-اول حاجة عنا بالصفحة
                <div class="card-header">{{ __('Login') }}</div>

-مكتوبة بالطريقة هاى الى هى طريقة اللغات {{ __('Login') }} الى حكينا عنها بالاول
-مكتوبة بالطريقة هاى طريقة الترجمة انو ترجمة الكى الى اسمه Login حسب اللغة الى انا فيها

-بعد هيك عنا
<form method="POST" action="{{ route('login') }}">

-يعنى الفورم هادى بتروح عالروات الى اسمه login طيب انت لو تروح ع صفحة الراوتس
مش راح تلاقى عنا راوت اسمه لوق ان ..ولكن هو فعليا موجود بالراوت تبعنا هاد
Auth::routes();
قلنا هاد الروات فيه كل الرواتا تعينى الى بتجيل الدخول والخروج والتسجيل وكل الامور هاى

-بعدين جوا الفورم عامل النا حقل للايميل وحقل للباسورد ..ولقدام راح نفهم شو الى مكتوب فيهم ومش مفهوم
-هى حقل الايميل مسلا

<div class="form-group row">
                            <label for="email" class="col-md-4 col-form-label text-md-right">{{ __('E-Mail Address') }}</label>

                            <div class="col-md-6">
                                <input id="email" type="email" class="form-control @error('email') is-invalid @enderror" name="email" value="{{ old('email') }}" required autocomplete="email" autofocus>

                                @error('email')
                                    <span class="invalid-feedback" role="alert">
                                        <strong>{{ $message }}</strong>
                                    </span>
                                @enderror
                            </div>
                        </div>

-لقدام راح نفهم ايش الايرور @error('email') وشو فايديتها
@error('email')
    <span class="invalid-feedback" role="alert">
        <strong>{{ $message }}</strong>
    </span>
@enderror

-وشو هو هاد المسج كمان <strong>{{ $message }}</strong>
-فى عنا كم فيديو لقدام عن الفالديشن ..منهم راح نفهم هاد الكلام كلو

-فى عنا كمان csrf
<form method="POST" action="{{ route('login') }}">
 @csrf

-مفهوم طبعا وما بدو شرح ..حكينا انو لسد الثغرات انو بيعملى حقل مخفى وبيبعت معى توكن عشان الهجمات من الثغرة الى اسمها csrf الزيرو شرحها بالتفصيل
-لازم نبعته مع اى فورم معمولة بميثود بوست
-لو ما حطيته راح يطلع عندك اكسبشن ويقلك البيج اكسبير ..لانو بالميدل وير الى عنا بشيك عالتوكن وعالكلام هاد ازا مبعوت ولالا
-لو تروح عالانسبكت تبعت فورم اللوق ان ..بتلاقيه تحت الفورم عبارة عن حقل مخفى وفيه توكن
<input type="hidden" name="_token" value="IV1RWCkjd22Hn77b4EOp18zxvG2RiNCslvjmNHkV">

-زى ما حكينا لو ما حطيته راح يطلعلك اكسبشن ...لانو ملف الويب تبع الرواتس
معمول فيه غصب عنك اللارافيل عاملاه ..ميدل وين اسمه csrf عشان الامان بتشيك هل
انت باعت الى حكينا عليه ولا لا ..خوفا عليك من انو حد يبعتلك اشى اختراق او حاجة من هالكلام

-الميدل وير هاد اسمه csrf field انت ممكن تعمله ايقاف عادى فش مشكلة
ولكن هاد الكلام مفروغ منو ومش راح نتكلم فيه

-نرجع للدرس تبعنا ..كيف نعمل تسجيل الدخول برقم الجوال

-اول حاجة بدنا نعمل فيلد جديدة للموبايل ..ونوقف فيلد الايميل
-بدى اخد فيلد الايميل نسخ لصق واغير كل اسى من ايميل لموباييل
-ونخلى نوع الحقل text بدل email ..وشغلة تانية نرفع منو الاوتو كومبليت كمان مش عايزينها

-واسم الحقل بدنا نكتبه بايدينا بدون ما نستخدم ترجمة اللغات نكتبه هيك Mobile Number

-عملنا الحقل هيك

<div class="form-group row">
    <label for="mobile" class="col-md-4 col-form-label text-md-right">Mobile Number</label>

    <div class="col-md-6">
        <input id="mobile" type="text" class="form-control @error('mobile') is-invalid @enderror" name="mobile" value="{{ old('mobile') }}" autofocus>

        @error('mobile')
            <span class="invalid-feedback" role="alert">
                <strong>{{ $message }}</strong>
            </span>
        @enderror
    </div>
</div>

-طيب هلقيت طالما عملنا فييلد عنا اسمه موبايل ..لازم يكون الو حقل بالداتا بيز برضو ...وفييلد بفورم الريجيستر كمان

-بدنا نزود عمود لرقم الجوال بالداتا بيز ..اما بنروح ع فولدر المايقريشن ع جدول اليوزر وبنضيفه من هان

-او بنروح ع بى ات بى ما ادمن ..وبنضفيه عادى عالجدول بايدينا ..طريقة اسرع ونشتغل الوقت

-رحنا عالجدول وزردنا عمود اسمه mobile بعد عمود الباسورد حطيته
عملته فار تشار ..وخليته 11 رقم خلص بكفى لرقم جوال

-هلقيت اى عمود بضيفه جددديد ..عشان ينقبل معى وينشاف
-لازم اروح عالمودل الى اسمه يوزر ..احنا بنعرف انو كل جدول بالداتا بيز
بكون الو عنا حاجة اسمها model بتكافاه

-هلقيت بعد ما ضفت العمود بالداتا بيز لازم اروح فولدر app
بلاقيه فيه المودل الى اسمه User.php هو هاد المودل الى بكافا جدول اليوزر عنا

-لو فتحناه راح تلاقى عنا حاجة اسمها ..فيلابل ..يعنى الحاجات الى تنشاف معى
protected $fillable = [
        'name', 'email', 'password',
    ];

-وفى الحاجات الهدن كمان الى ما تنشاف ..هاد المهندس قدام بالكورس شارحهم
protected $hidden = [
        'password', 'remember_token',
    ];

-هلقيت بدنا نحط عمود الموبايل ..ضمن الفيلبل
protected $fillable = [
        'name', 'email', 'password', 'mobile'
    ];

-هينا زودناها ..خلى بالك من النقطة هادى ..لو ما ضفته هان عالفيلبل ممكن لما تروح تعمل ريجيستر ما يقبلك

-هلقيت زودناها هان وبالداتا بيز ..مش لازم ازودها بالميقريشن عادى خلص

-هلقيت خلينى اروح ادخل رقك جوال بايدي مباشرة عاليوزر الى باداتا بيز ثائر
-عشان ما اقعد اغير فورم الريجيستر وادخل منها رقم الجوال يعنى ونكسب وقت

-دخلت ل اليوزر thaer 491533 رقم جوالى
-بس ما قبل عشان كنت عامل الحق فار تشار ..خليته انتجر 11

-هلقيت روح ادخل بفورم اللوق ان ..برقم الجوال والباسوورد تبعنا من1 ل 8

-برضو ما راح يدخلك ..ليش ..لانو هو بدور على الايميل كمان

-طيب لازم نعرف وين الكود الى بيعمل ميثود اللوق ان نفسه وميثود الريجيستر نفسه

-بدنا نروح عالكنترولر ع فولدر الاوس ..ع كنترولر اللوق ان
-لو تفتحه مش راح تلاقى فيه حاجة ..يعنى كود مكتوب ..لانو هو فاصله ب تريت
وعامل يوز للتريت هاد

use AuthenticatesUsers;

-لو تروح تفتح التريت هاد
-التريت هاد هو الى بنادى ع الفيو لوق ان

-المهندس ضغط عليه اعتقد وفتح لحاله لانو بشتغل ع بى اتش بى ستورم
-انا اخدت اسم التريت ..وبحثت عنو ctrl + p وطلعلى الملف وفتحته

-جوا التريت هاد مكتوب
-راح تلاقى اول حاجة عامل الى ميثود ترجعلى فيو اللوق ان
public function showLoginForm()
    {
        return view('auth.login');
    }

-ولو تنزل تحت بالتريت راح تلاقى كمان ميثود اسمها يوزر نيم
public function username()
    {
        return 'email';
    }

-معلومة ازا هو تريت ..عادى بقدر اخد الميثود هادى واعمل عليها اوفر رايد عندى عادى

-اخدت الميثود وحطيتها بالكنترولر تبعت اللوق ان ..الى بيستخدم التريت هاد
عشان اعمل عليها اوفر رايد ..اعدل عليها يعنى

-كنترولر اللوق ان كان فيه بس ميثود كنتسرتك
public function __construct()
    {
        $this->middleware('guest')->except('logout');
    }

-انا جبت الميثود اليوزر نيم وحطيتها تحته

public function __construct()
    {
        $this->middleware('guest')->except('logout');
    }

public function username()
    {
        return 'mobile';
    }

-ميثود اليوزر نيم هادى مش عشان هو بفوت باليوزنيم ..لا اليوزر نيم هادى يعنى بقلك هادى الميثود الى انا راح افوت فيها ..انت بدك تعمل فالديشن بشو
باى دبفولت هى بالايميل
-انا خليتها فالديشن بالموبايل

-هلقيت روح فوت برقم الجوال ومن1 ل 8 ..راح يفوت معك مباشرة خلص

=================================================================================

     #031 - Laravel 6 email verification and configration -التحقق من البريد الالكتروني

- بدنا نتعلم كيف نعمل فيرفكيشن للايميل ..لما تعمل تسجيل ..ابعتلك ايميل
عالايميل الى انت سجلت فيه ..وتروح عليه وتضغط عالرابط الى بعتلك اياه عشان تتفعل ويدخلك عالموقع عنا وانت عامل لووق ان وجاهز

-وعنا بلارفيل 6 واطلع ..ديفولت ايميل فيرفكيشن ..بدنا نتعلم كيف نعملها ونفعلها ..هى جاهزة عنا برضو ..مريحنا بكل اشى ..راح نعملها باقل من 10 دقايق ..ولكن لو بدك تعمل القصة هادى بالبى اتش بى بيور ..بدك ساعات فيها

-اول خطوة لازم يكون عنا سيرفر انو نبعت منو الايميل ..طيب احنا لسا فش عنا سيرفر ولا لوحة تحكم شو نعمل

-راح نستخدم الميل تراب ..انا عملت عليها حساب قبل فترة سجلت فيه
https://mailtrap.io/signin#

-عملت تسجيل جديد ..احكيله تسجيل دخول باستخدام حساب قوقل ..بيطلعلك حسابات قوقل تبعتى دخلت بايميل eng.thaerellouh@gmail.com

-موجود بالانبوكس عندك حاجة اسمها Show Credintails اضغط عليها
-معطينى فيها

SMTP
Host:     smtp.mailtrap.io
Port:     25 or 465 or 587 or 2525
Username: 1b0cb0996a1a51
Password: 33262fe28274e6
Auth:     PLAIN, LOGIN and CRAM-MD5
TLS:      Optional (STARTTLS on all ports)

-انا محتاج اخد منها اليوزر نيم والباسورد

-بدنا ناخد اليوزر نيم هاد الى اعطانى اياه موقع الميل تراب ...ونربط فيه بملف
.env زى ما ربطنا الداتا بيز تبعتنا

-روح ع ملف .env راح تلاقيه عامل حسابه ومجهز الك عشان تستخدم الميل تراب تبعت منو مسجات عشان تجرب عليه ..لانو عامل حسابه انو ما فيه عندك سيرفر لسا ومعطيك حاجة تجرب عليها

MAIL_MAILER=smtp
MAIL_HOST=smtp.mailtrap.io
MAIL_PORT=2525
MAIL_USERNAME=null
MAIL_PASSWORD=null
MAIL_ENCRYPTION=null
MAIL_FROM_ADDRESS=null
MAIL_FROM_NAME="${APP_NAME}"

-بدنا ناخد اليوزر نيم والباسورد الى عنا بالميل تراب ونحطهم هان عشان نربط فيهم

-انت طبعا مش مجبر تبعت من الميل تراب طبعا ولكن هان انت عشان تجرب ...الدرس الجاى راح نتعلم كيف نربط مع لوحة تحكم حقيقية عنا ونبعت منها ايميلات

-طيب اخدنا اليوزر نيم والباسورد تعين الميل تراب وربطنا فيهم عشان نعمل تيست بس ونجرب عليه زى ما حكينا ..صار ملف الانف عنا هيك

MAIL_MAILER=smtp
MAIL_HOST=smtp.mailtrap.io
MAIL_PORT=2525
MAIL_USERNAME=1b0cb0996a1a51
MAIL_PASSWORD=33262fe28274e6
MAIL_ENCRYPTION=null
MAIL_FROM_ADDRESS=null
MAIL_FROM_NAME="${APP_NAME}"

-احنا هيك خلصنا اول خطوة عنا الى هى ربطنا بملف الانف تبعتنا

-تانى خطوة عنا عشان نعمل ايميل فيرفكيشن كامل ..بدنا نروح عالمودل تبعنا

الى اسمه User.php الى حكينا انو بكافئ جدول اليوزر عنا بالداتا بيز الى بسجل فيه
الاعضاء وبياناتهم


-ولقدام راح نعرف كيف ننشئ المودل لحالنا وكيف نربطه ونعمله من الصفر

-طيب هلقيت نروح ع ملف المودل اليوزر الى بفولدر الاب فوق
-بالاساس كان عنا هيك


namespace App;

use Illuminate\Contracts\Auth\MustVerifyEmail;
use Illuminate\Foundation\Auth\User as Authenticatable;
use Illuminate\Notifications\Notifiable;

class User extends Authenticatable
{

-هلقيت الكلاس هاد class User extends Authenticatable
بدنا نعمله ايمبليمنت كمان من تريت جاهز بلافيل اسمه MustVerifyEmail

-خلى بالك اول يوز عنا فوق الى هو تبع التريت هاد الى بتكلم عنو ..كانت فاتحة
لانو انا مش مستدعى التريت تبعها لسا ..الى هى هاى
use Illuminate\Contracts\Auth\MustVerifyEmail;
-كانت فاتحة

-اول ما انا استدعى التريت تبعها واعمله ايمليمنتس ..ع طول بتتفعل وبتبطل لونها فاتح

-صار عنا الكلاس هيك


use Illuminate\Contracts\Auth\MustVerifyEmail;
use Illuminate\Foundation\Auth\User as Authenticatable;
use Illuminate\Notifications\Notifiable;

class User extends Authenticatable implements MustVerifyEmail
{

-صار هيك
class User extends Authenticatable implements MustVerifyEmail

-خلصنا تانى خطوة

-نروح عالخطوة التالتة ..بدنا نروح عالراوتات تبعتى
-لارافيل كانت عاملة النا كل راوتات التسجيل واللوق ان ..باى ديفولت مجمعها مع بهض براوت واحد حكينا ..بملف الويب طبعا
Auth::routes();

-بدنا نروح عليه ونمرر فيه جوا اريه ..حاجة اسمها verify => true عملناه ترو

Auth::routes(['verify' => true]);

-هيك عشان اعرفه ..انو اليوزر هاد بعد ما يعمل ريجيستر ..ما تدخله ع صفحة الهوم ع طول ..لا لازم يروح عالايميل تبعه بالاول وياكد الرابط الى انا بعتلك اياه
عشان يتفعل وبعدين اخليه يفوت ع ثفحة الهوم
-وان ما كان الايميل تبعه كمان مش راح اخليه يفوت ..راح يقله الايميل تبعك غير مفعل

-طيب خلصنا الخطوة التالتة

-الخطوة الرابعة
-لو تلاحظ عنا تحت راوت الاوث ..عملنا راوت الهوم كمان
انو لما يعمل تسجيل يحولو مباشرة ع صفحة الهوم زى ما حكينا
Route::get('/home', 'HomeController@index')->name('home');

-ازا بتلاحظ انو الروات هاد بروح عالهوم كنترولر ع ميثود الاندكس
-لو تروح عالهوم كنترولر ..راح تلاقيه ماخد قبل ميثود الاندكس ماخد ميدل وير الاوث
public function __construct()
    {
        $this->middleware('auth');
    }

-هاد الميدل وير عارفينه ..انو لازم تكون مسجل عنا ..والك يوزر نيم وباسوررد وداخل فيهم ومتخزن بالسشن عنا تبع لارافيل ..ازا مش مسجل بحولك ع صفحة اللوق ان

-طيب احنا بدنا نضيف كمان ميدل وير الو الى هو ميدل وير الفيرفاى تبع الايميل
الى قاعدين بنحكى عنو

-يا بتضيف الميدل وير هاد جوا الكنترولر نفسه ..او عالروات نفسه عارفين الطريقتين احنا

-خلينا نضيفه عالروات نفسه ..بدو يصير الروات تبعنا هيك

-طيب لو احنا مش عارفين اسم الميدل وير هاد بالزبط مسلا ..او خيفين نتخربط بحرف او اى اشى ..من وين بنعرف الميدل وير كلهم الى عنا ..عشان اعرف الميدل وير الى انا بدى اياه

-لو تروح ع فولدر Middleware فيها ملف اسمه Kernel.php لو تفوت عليه
بتلاقى كل الميديل وير الى لارافيل عاملاها
protected $routeMiddleware = [
        'auth' => \App\Http\Middleware\Authenticate::class,
        'auth.basic' => \Illuminate\Auth\Middleware\AuthenticateWithBasicAuth::class,
        'bindings' => \Illuminate\Routing\Middleware\SubstituteBindings::class,
        'cache.headers' => \Illuminate\Http\Middleware\SetCacheHeaders::class,
        'can' => \Illuminate\Auth\Middleware\Authorize::class,
        'guest' => \App\Http\Middleware\RedirectIfAuthenticated::class,
        'password.confirm' => \Illuminate\Auth\Middleware\RequirePassword::class,
        'signed' => \Illuminate\Routing\Middleware\ValidateSignature::class,
        'throttle' => \Illuminate\Routing\Middleware\ThrottleRequests::class,
        'verified' => \Illuminate\Auth\Middleware\EnsureEmailIsVerified::class,
    ];

-يبقى الميدل وير الى انا عايزه عشان اخليه يعمل فيرفاى للايميل كمان
هو اخر واحد الى اسمه verified

-هلقيت نرجع للروات تبعنا ..بدو يصير هيك
Route::get('/home', 'HomeController@index')->name('home')->middleware('verified');

-سواءا هان ..او نحطه جوا الكنترولر الهوم نفسه عادى حكينا وعارفين الطريقة كيف

-هلقيت راوت الهوم صار عليه 2 ميدل وير ..الاول تبع الاوث والتانى تبع الفيريفاى
-يعنى عشان انت تزور صفحة الهوم ..لازم تكون عامل ريجيستر عنا ..مسجل والك باسوورد ويوزر نيم ومخزن بالداتا بيز عنا ..ولازم تكون عامل فيرفاى عالايميل عالرابط الى بدنا نبعتلك اياه

-يعنى رواتات الويب هيك صارت

Auth::routes(['verify' => true]);

Route::get('/home', 'HomeController@index')->name('home')->middleware('verified');

-الخطوة الخامسة عنا هلقيت ..بدنا نفوت عالمكان الى بدنا نبعتلك منو الايميل
الى هى صيغة الايميل يعنى الى راح يصلك كيف شكله بكون ..شكله موجود عنا بالفيوز
-فيو اسمها verify.blade.php
-هو هاد شكل الايميل الى راح يصلك ..انت بتقدل تعدل عليه اى اشى بدك اياه وع شكله

@extends('layouts.app')

@section('content')
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card">
                    <div class="card-header">{{ __('Verify Your Email Address') }}</div>

                    <div class="card-body">
                        @if (session('resent'))
                            <div class="alert alert-success" role="alert">
                                {{ __('A fresh verification link has been sent to your email address.') }}
                            </div>
                        @endif

                        {{ __('Before proceeding, please check your email for a verification link.') }}
                        {{ __('If you did not receive the email') }},
                        <form class="d-inline" method="POST" action="{{ route('verification.resend') }}">
                            @csrf
                            <button type="submit" class="btn btn-link p-0 m-0 align-baseline">{{ __('click here to request another') }}</button>.
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
@endsection

-الى هى مسه هيك مسلا ..من فضلك اضغط على الرابط كزا ..لتاكيد الايميل تبعك

-هى هادى الفيو الى عنا ..بتقدر تغير فيها العنوان مسلا او اى حاجة فيها عادى

-طيب اخر حاجة عنا ممكن نتكلم فيها ..ايش هو الكنترولر الى بيعمللنا كل الكلام هادا
-جوا فولدر الاوث الى بفولدر الكنترولرز بتلاقى كنترولر اسمه VerificationController.php
هو المسؤول انو يعملى الكلام هاد كله..وروح والى نظرة عليه

-هلقيت خلينا نروح للعملى ..ونشوف الكلام الى عملنا كيف بدو يتنفذ

-نعمل تسجيل خروج ..ونعمل تسجيل يوزر جديد ..عشان نشوف الايميل بدو ينبعت النا عالميل تراب كيف

-هلقيت انا عملت تسجيل خروج ..وارجعت دخلت باسم teto
بالايميل تبعه والباسورد طلعلى رسالة هادى
Verify Your Email Address
Before proceeding, please check your email for a verification link. If you did not receive the email, .

-يعنى ما دخلنى برضو عالهوم ..بقلى رجاءا تاكد من الايميل تبعك بعتنالك رابط

-طيب خلينى هلقيت امسح الاتنين يوزر الى عنا بالداتا بيز ..واعمل يوزر من جديد
عشان احط عليه جى ميل صحيح عشان اشوف الايميل بدو يصلنى عليه ولا لا

-رحت عملت يوزر جديد اسمه Thaer والايميل eng.thaerellouh@gmail
والباسورد من1 ل 8 برضو

-هان طلعلى اكسبشن
Illuminate\Database\QueryException
SQLSTATE[HY000]: General error: 1364 Field 'mobile' doesn't have a default value (SQL: insert into `users` (`name`, `email`, `password`, `updated_at`, `created_at`) values (Thaer, eng.thaerellouh@gmail.com, $2y$10$/tecu4XPRt6nW1VvgEAJFu1jAzL/ZZh/C34GwpovqILVSRGKTbYoi, 2021-08-13 22:03:48, 2021-08-13 22:03:48))

-بقلى انو حقل الموبايل الى بالداتا بيز ..فيه عمود الموبايل ..ومطلوب لانو انا
حطيته بالفيلبل ازا بتتزكر الدرس الى فات

-وعملناه بصفحة اللوق ان عشان نفوت فيه بدول الايميل وعدلنا بالداتا بيز كمان
وبالمودل تبعنا اليوزر كمان خليناه فيلبل

-ولكن ما ضفنا الو الحقل تبعه بفور الريجيستر
-هلقيت اما بتروح بتشيله من الفيلبل ..او عادى خلص خلى شغلنا تاع الدرس الى فات هو هو ...وروح ع فورم الريجستر عالفيو تبتعتها وضيف فييلد جديدة تحت فييلد الايميل اعملها للموبايل

-انا ضفت الحقل ع فورم التجسيل تحت حقل الايميل خليته ..اخدت حقل الايميل ونسخته تحت وعدلت عليه ..هى الحقل تبعنا

<div class="form-group row">
    <label for="mobile" class="col-md-4 col-form-label text-md-right">Mobile Number</label>

    <div class="col-md-6">
        <input id="mobile" type="text" class="form-control @error('mobile') is-invalid @enderror" name="mobile" value="{{ old('mobile') }}" required >

        @error('mobile')
            <span class="invalid-feedback" role="alert">
                <strong>{{ $message }}</strong>
            </span>
        @enderror
    </div>
</div>

-برضو طلعلى نفس الخطا ...بتهيالى عشان انا عامل الحقل required
-بس برضو بدى احل المشكلة لحالى بدى اخليه ريكوير واشوف

-المهندس ع فكرة ما شرح كيف عملها لقيت حاطط الحقل لحاله بدون ما يشرح

-طيب انا حليت المشكلة ..رحت عالكنترولر تبع الريجيستر نفسه
-دخلت فيه لقيت 2 ميثود

protected function validator(array $data)
    {
        return Validator::make($data, [
            'name' => ['required', 'string', 'max:255'],
            'email' => ['required', 'string', 'email', 'max:255', 'unique:users'],
            'password' => ['required', 'string', 'min:8', 'confirmed'],
        ]);
    }

-هادى الى بتعملى الفالديت شكلها ..هى عامل الباسورد ما يقل عن 8 والاسم والايميل ما يكبر عن 255

-والميثود التانية هادى

protected function create(array $data)
    {
        return User::create([
            'name' => $data['name'],
            'email' => $data['email'],
            'password' => Hash::make($data['password']),
        ]);
    }

-انا رحت عالميثود التانية حاليا وضفت عليها الموبايل الجديد الى انا عملت بايدى

protected function create(array $data)
    {
        return User::create([
            'name' => $data['name'],
            'email' => $data['email'],
            'mobile' => $data['mobile'],
            'password' => Hash::make($data['password']),
        ]);
    }

- لسا الموبايل حكى ..انو راح يشرح كيف نعمل الو بادئة نخليه دايما يبدا 059 مسلا
بس لسا ما شرح كيف

-ما علينا ..انا هيك زبطت معى

-رحت اعملت تسجيل بنفس الاسم والايميل زبط ..ودخله بالداتا بيز ولكن طلعلى اكسبشن
Swift_TransportException
Cannot send message without a sender address
http://127.0.0.1:8000/register

-بقلى ما بتقدر تبعت ايميل ..بدون ما تكتب من مين مبعوت ..لازم تحط عنوان المرسل مين هو الى بعت الايميل هاد

-حلها ..بدنا نرجع ع ملف .env ونحط ايميل المرسل مين هو
خلينا نحط اى ايميل ...ايميلى التانى مسلا thaerellouh@gmail.com
-اى ايميل مش مشكلة

-رحنا ملف الانف
MAIL_MAILER=smtp
MAIL_HOST=smtp.mailtrap.io
MAIL_PORT=2525
MAIL_USERNAME=1b0cb0996a1a51
MAIL_PASSWORD=33262fe28274e6
MAIL_ENCRYPTION=null
MAIL_FROM_ADDRESS=null
MAIL_FROM_NAME="${APP_NAME}"

-ازا بتلاحظ MAIL_FROM_ADDRESS=null فاضية ..خلينا نحط فيها اميل المرسل

-صارت هيك

MAIL_MAILER=smtp
MAIL_HOST=smtp.mailtrap.io
MAIL_PORT=2525
MAIL_USERNAME=1b0cb0996a1a51
MAIL_PASSWORD=33262fe28274e6
MAIL_ENCRYPTION=null
MAIL_FROM_ADDRESS=thaerellouh@gmail.com
MAIL_FROM_NAME="${APP_NAME}"

-نروح هلقيت نعمل تسجيل من جديد ..بس قبل خلينا  نمسح اليوزر الى دخلناه
لانو دخل عالداتا بيز بس ما بعتله الايميل حكينا لانو ما كان عندى
ايميل المرسل

-وهلقيت بدى ارجع اعمل تسجيل بنفس الاسم عشان احط ايميلى هو هو الى انا سجلت فيه بالميل تراب ...لو رجعت عملت تسجيل بنفس الاسم والايميل ..راح يصير عندى تعارض راح يقلى هاد الاسم موجود من قبل
-عشان هيك روح احذفه من الداتا بيز ..وتعال اعمل تسجيل يوزر من جديد
ونشوف بدو يبعتلنا ايميل عشان نعمل فيريفاى ولا لا

-برضو طلعلى نفس الرسالة انو ما فى مرسل عنا ....ودخل اليوزر عالداتا بيز ولكن ما بعت الايميل

-المهندس بقول شو الحل ...انو اى تعديل ع ملف
.env  عالكونكشن الى فيه سواء تبع الميل او الامازن لو نشرحه او البوشر لما نشرحه برضو
اى تغير فيهم ..لازم نروح ننفذ الامر composer dump-autoload
-عشان يحس باى تغيير انت عملته ..احنا هان دخلنا ايميل المرسل ..ما حس فيه
عشان يحس فيه انو انا عملت تعديل جديد بالملف ..روح اعطيه الامر هاد

-نفذنا الامر راح ياخد وقت فيه لانو بيعمل جينريت وبيعمل اوتو لود للفايلز من اول ووجديد

-عبل ما يخلص الامر ..بدى اروح احذف اليوزر من الداتا بيز الى دخلته عشان ما يقلى موجود من قبل يصير تعارض زى ما حكينا

-حذفناه ..وهى الامر خلص

C:\xampp\htdocs\Laravel_Course
λ composer dump-autoload
Generating optimized autoload files
> Illuminate\Foundation\ComposerScripts::postAutoloadDump
> @php artisan package:discover --ansi
Discovered Package: facade/ignition
Discovered Package: fideloper/proxy
Discovered Package: fruitcake/laravel-cors
Discovered Package: laravel/tinker
Discovered Package: laravel/ui
Discovered Package: nesbot/carbon
Discovered Package: nunomaduro/collision
Package manifest generated successfully.
Generated optimized autoload files containing 4633 classes

C:\xampp\htdocs\Laravel_Course
λ

-نروح نعمل تسجيل اليوزر من جديد ونشوف بدها تزبط ولا لا

-هان لو تلاحظ عملت تسجيل ع نفس الايميل ..وما حذفته من الداتا بيز ..طلعلى ايرور
بقلى انو الايميل هاد موجود عنا بالداتا بيز

Name   thaer

E-Mail Address   eng.thaerellouh@gmail.com
The email has already been taken.

Mobile Number   491533

Password

Confirm Password

-بدى احذفه من الداتا بيز وارجع اعمل تسجيل فيه من جديد

-واخيرا زبط الحمدلله ....عملت تسجيل ليوزر thaer والايميل eng.thaerellouh@gmail.com
ورقم الجوال 491533 والباسوررد 12345678

-سجلنى بالداتا بيز

-وما دخلنى ع صفحة الهوم ..دخلنى ع صفحة http://127.0.0.1:8000/email/verify
صفحة الايميل فيريفاى ...وطبعلى رسالة بقلى بعتنالك ايميل
Verify Your Email Address
Before proceeding, please check your email for a verification link. If you did not receive the email,

-هلقيت بدى اروح عالميل ترامب الى انا سجلت فيه بالايميل هاد اصلا
eng.thaerellouh@gmail.com واشوف وصلنى مسج ولا لا

-فعلا وصلنى مسج
Verify Email Address

From:Laravel <thaerellouh@gmail.com>
To: <eng.thaerellouh@gmail.com>
Show Headers

-هى كاتبلى من مين كمان ..الى هو الايميل التانى تبعى الى حطيته ك مرسل

-والرسالة الى فيها هيها

========

Hello!
Please click the button below to verify your email address.

Verify Email Address

If you did not create an account, no further action is required.

Regards,
Laravel

If you’re having trouble clicking the "Verify Email Address" button, copy and paste the URL below into your web browser: http://127.0.0.1:8000/email/verify/5/b3e19a58ce503d3381a9c29a86be805e7ea6bf9e?expires=1628898112&signature=2feb08fa121c9fd208c0fbd4f39045136c42614bfbd16a78aadd085e342c5873

=======

-وحيكنا الرسالة هى موجودة باى فيو ..لو حابب تغير بشكلها اى تغير اى حاجة فيها
-بقلى اضغط على الزر Verify Email Address ازا حابب تاكد ايميل

-ضغط عالزر فعلا بعتنى ع صفحة الهوم
http://127.0.0.1:8000/home

-وطلعلى صفحة الهوم

Laravel             thaer

        Dashboard
     You are logged in!

-هلقيت عادى ..اعمل تسجيل خروج وارجع فوت من جديد ..راح يدخلك عالهوم خلص
-خلى بالك اللوق ان عنا صار برقم الجوال ..لانو غيرنها ازا بتتزكر خلينا الدخول برقم الجوال والباسوورد

-انا بدى اروح افعل حقل الايميل بفورم اللوقن ..كنت موقفها عامل عليها كومنت
-لما شغلتها صارت صفحة اللوقن عندى
ايميل ..وموبايل ..وباسورد ...ولكن هو بشيك عالموبايل خلى بالك

-يعنى لو كتبت ايميل خطا والموبيايل والباسورد صح ..عادى بدخلك
-لكن لو كتبت الموبايل خطا او الباسورد خطا ..ما راح تفوت

-طيب بالنسبة للموبايل وانا بجرب ..انا مسجل الجوال بالداتا بيز 491533
ولكن لو تحط قبل اصفار عادى بيقبله زى هيك 0491533 او زى هيك 00491533
-قد ما تحط اصفار قدامه عادى بيعتبره صح ..لانو بهشهم الاصفار شكله

-شغلة تانية برضو جربتها لحالى
-عشان تعرف انو لارفيل لحالها بتسجل السشن ..بعد ما عملت تسجيل دخول باسم ثائر
عالجوجل كروم ..اخد رابط الهوم تبع يوزر ثائر ورحت فتحت من متصفح الفايرفكس
رجعنى ع صفحة اللوق ان يا معلم ..وقلى اعمل تسجي لدخول

-هلقيت ضل عليا حاجة ..لما اعمل تسجيل خروج وارجع اعمل لوق ان
-بلاقيه مدخل الى الايميل والباورد دايركت بالحقول تعتها
ولكن الموبايل لا ..لازم انا اكتبه

-جربت احط لحقل اموبايل
required autocomplete="mobile"
ما زبطت عشان تصير زيهم

-طيب جربت الغى من حقل الايميل value="{{ old('email') }}"
عشان ما بدى يكتبلى الايميل لحاله ..بدى تكون فاضية زى حقل الموبايل ..برضو ما زبط

-مش عارف احلها ..لقدام بنلاقى الها حل

-اعتقد انو الها علاقة بال value="{{ old('mobile') }}" بس انا لسا مش عارف ايش يعنى
old لسا ما حكى عنها المهندس

==================================================================================


       #032 - laravel 6 reset password -لأارافل استعاده كلمة المرور

-بدنا نتعلم كيف نعمل استعادة لكلمة المرور
-ازا بتلاحظ بفورم اللوق ان ..لما بتدخل الايميل والجوال والباسورد
فى جنب زر اللوق ان ..فى رابط اسمه
Forgot Your Password?

-فى حال انو انت نسيت كلمة السر تبعتك بتضغط عليه ..بيبعتك ع صفحة
http://127.0.0.1:8000/password/reset

-فيها فورم استعادة كلمة المرور

Reset Password
                E-Mail Address
                Send Password Reset link

-بتعطيه الايميل تبعك ...وبتضغط ع زر السيند باسورد الى تحتها
-بيبعتلك رابط عالايميل تبعك وتغير منو الباسورد

-نشوف كيف العملية هاى بتصير

-استعادة كلمة المرور ..برض معمولة باى ديفولت من لارافيل كمان ...وبرضو بنقدر نعملها كستمايز حكينا ..لو انت حابب تعملها بايدك ..بس لارافيل معطيها النا جاهزة

-لما نضغط ع رابط استعادة كلمة المرور زى ما حكينا فوق بيبعتنا ع صفحة فيها فورم
تعطيه الايميل تعبك وتضغط عالزر الى تحتها
http://127.0.0.1:8000/password/reset

-الفورم الى بيعرضلى اياها الروات هاد الى حيكناها فوق ..موجود بالفيوز
فولدر الاوث ..فيها 3 فيوز وعرفناهم اللوق ان والريجستر والفيرفيكشن
فى معهم فولدر اسمه passwordw داخله فى 3 فيوز

-من ضمنهم فيوز اسمها email.blade.php
-هى هادى الفيوز الى بتطلعلى لما اعمل استعادى كلة المرور ..لو حابب تعدل عليها اى اشى

-طيب هلقيت لو اعطيناها اى ايميل ...هو اول حاجة بياخد الايميل وبروح عالداتا بيز
بشوف هل الايميل هاد موجود عنا ولا لا ..لو موجود وفيه يوزر مسجل فيه ..اوك بيقبله وبيبعتله رابط يضغط عليه ..يطلعلى فورم يعمل منها كلمة مرور جديدة

-لو الايميل غير موجود عنا ..بيطلعلك ايرور فالديت ..بقلك هاد الايميل مش موجود

-خلينا نروح ندخل ايميل خطا

E-Mail Address    thaer@gmail.com
We can't find a user with that email address.

-بقلى انا مش ملاقى يوزر عنده هاد الايميل ..طيب خلينا ندخل الايميل الصحيح تبعنا

E-Mail Address     eng.thaerellouh@gmail.com

-وضغط ع الزر الى عنا Send Password Reset link

-طلعلى اليرت ..بقلى انو احنا بعتنالك ايميل
We have emailed your password reset link!

Reset Password
                We have emailed your password reset link!
                E-Mail Address

-رحنا عالميل تراب عالايميل تبعى ..فعلا بعتلى ايميل ..وعنوان الايميل ريسيت باسورد نوتيفكيش

Reset Password Notification


From:Laravel <thaerellouh@gmail.com>
To: <eng.thaerellouh@gmail.com>

-محتوى الايميل فى عنا رابط اضغط عليه

======

Hello!
You are receiving this email because we received a password reset request for your account.

Reset Password
This password reset link will expire in 60 minutes.

If you did not request a password reset, no further action is required.

Regards,
Laravel

If you’re having trouble clicking the "Reset Password" button, copy and paste the URL below into your web browser: http://127.0.0.1:8000/password/reset/75483969da60988f38fa6e407eed9c101abc64e9e48cf80660dee54259c0f422?email=eng.thaerellouh%40gmail.com

========

-ضغطت عالزر الى اعطانى اياه Reset Password

-بعتنى على هاد الروات
http://127.0.0.1:8000/password/reset/75483969da60988f38fa6e407eed9c101abc64e9e48cf80660dee54259c0f422?email=eng.thaerellouh%40gmail.com

-وفيه فورم فيها 3 حقول حقل الايميل ومكتوب فيه الايميل تبعى
وحقل الباسورد ..وحقل تاكيد الباسورد كمان

=============

معلومة عالهامش ...المهندس لما ضغطت عالرابط الى بالايميل بعته ع روات ما فتح معو
الروات وقلو الصفحة غير موجودة كان نفس الروات تبعى ولكن بدون ما حطلو البورت 8000 بالرابط كان زى هيك الراو عندو
http://127.0.0.1:/password/reset/75483969da60988f38fa6e407eed9c101abc64e9e48cf80660dee54259c0f422?email=eng.thaerellouh%40gmail.com

-بدون البورت ..راح كتب البورت 8000 بايدو وعادى فتحت معو ودخلو عالفورم ..وقال هاى القصة راح نعالجها لقدام انو ما بحطلى البورت لحاله ...انا زبطت معى ولحاله حطلى البورت بدون اى مشكلة

=============

Reset Password

E-Mail Address       eng.thaerellouh@gmail.com
Password
Confirm Password

-الفورم هاى برضو موجودة بفولدر الباسورد reset.blade.php

-حطيت باسورد جديدة هلقيت من1 ل 9 ..123456789
-بالاول كانت من1 ل 8

-وضغط ع زر Reset Password

-بعتنى ع صفحة الهوم وطلعلى اليرت مسج بقلى انو تم تغير الباسورد تبعك
Dashboard
Your password has been reset!
You are logged in!

-هلقيت اعمل تسجيل خروج ..وارجع اعمل تسجيل دخول ..راح تفوت بالباسورد الجديدة من 1 ل 9

-طيب عشان نفهم الى صار ونفهم الرواتس الى كنت افوت عليها وين بتعبتنى ومن وين بتاخد
خلينا نشوف كيف صارت ..معى انى شرحتها انا فوق

- حكينا فيوز الباسورد  3 موجودة بفولدر passwords بفولدر الاوث
-اول فورم طلعلتى  لما بنعمل استعادة الباسورد حكينا انها بعتتنى ع راوت
http://127.0.0.1:8000/password/reset

-الروات هاد بنادى على كنترولر ..والكنترولر بنادى عالفيو هادى
email.blade.php الى حكيننا عنها

-الفيو هادى فيها فورم ..فيها حقل واحد الى هو الايميل بقلك دخل الايميل وتحته زر

-والفروم هادى من نوع بوست
<form method="POST" action="{{ route('password.email') }}">

-بتروح عالروات هاد action="{{ route('password.email') }}

-الروات هاد شو بيعمل ..بروح بيعمل تشيك عالايميل الى كتبناه ..ازا هو موجود بالداتا بيز عنا ولا لا ازا مش موجود حكينا بطلعلنا مسج ايرور ..وازا موجود برجعلى رسالة اليرت ..بقلى انو احنا بعتنالك ايميل

-بعد هيك  بعد الايميل ولما تضغط عليه بترجع لحاجة تانية بتنادى ع راوت اسمه
http://127.0.0.1:8000/password/reset/75483969da60988f38fa6e407eed9c101abc64e9e48cf80660dee54259c0f422?email=eng.thaerellouh%40gmail.com

-الى حكينا عنو برضو فوق ...وعرفنا وين الفيو تبعته الى هى اسمها reset.blade.php

-طيب لو نروح عالكنترولر الى بنادى عالفيو هادى ..عشان نفهم العملية كيف بتصر

-روح عالكنترولر ..بتلاقى كنترولر اسمه ResetPasswordController.php
برضو بفولدر الاوث بتلاقيه ...فولدر الاوث فيه 6 كنترولر

-لو نفتح كنترولر الريسيت باسورد ..مش راح تلاقى فيه احاجة ولا اى كود
لانو مستخدم تريت جاهز وعامل للتريت هاد يوز ..والتريت هو فيه االاكواد

-لما فتحنا الكنترولر بس هاد الى فيه

<?php

namespace App\Http\Controllers\Auth;

use App\Http\Controllers\Controller;
use App\Providers\RouteServiceProvider;
use Illuminate\Foundation\Auth\ResetsPasswords;

class ResetPasswordController extends Controller
{
    /*
    |--------------------------------------------------------------------------
    | Password Reset Controller
    |--------------------------------------------------------------------------
    |
    | This controller is responsible for handling password reset requests
    | and uses a simple trait to include this behavior. You're free to
    | explore this trait and override any methods you wish to tweak.
    |
    */

    use ResetsPasswords;

    /**
     * Where to redirect users after resetting their password.
     *
     * @var string
     */
    protected $redirectTo = RouteServiceProvider::HOME;
}


-بقلى انو مستخدم التريت هاد
    use ResetsPasswords;

-عرفت الطريقة كيف نفتح التريت هاد بدل ما اروح ابحث عنو زى ما كنت اعمل
-لا اقف عليه واضغ على ctrl وبعدين كليك شمال بالماوس بتلاقيه فتحلك ملف التريت لحاله
-راح تلاقى فيه كل الكود تبعنا والميثودات الى عاملها ..كيف بياخد منك الايميل والباسورد تبعك ..بعدين بيعمللهم فالديشن بعدين بيعمل الريسيت باسورد وهكذا
-كل الكود تبع الريسيت باسورد بتلاقيه هنا بالتريت نفسه
-وازا بتلاحظ اول اشى بالتريت فوق ..بقلى انو التريت هاد برجعلى الفيو الى اسمها ريسيت الى حكينا عليها

public function showResetForm(Request $request, $token = null)
    {
        return view('auth.passwords.reset')->with(
            ['token' => $token, 'email' => $request->email]
        );
    }

-فعلا هى الفيو  view('auth.passwords.reset')الى داخل فولدر الاوث بعدين فولدر الباسوردس بعدين فيو
 rest.blade.php

-وازا بتلاحظ هيو باعتلى مع الراوت هاد توكن كمان هو الى كان يظهرلى مع الراوت الى بجيبلى الفيو هادى الى بنحكى عنها وبعد التوكين يحطلى الايميل تبعى وفعلا زى هيك كان يطلعلى الراوت

http://127.0.0.1:8000/password/reset/75483969da60988f38fa6e407eed9c101abc64e9e48cf80660dee54259c0f422?email=eng.thaerellouh%40gmail.com

-هى راوت فيو الريسيت .وبعدها توكين وبعدها الايميل تبعى

-ولو فتحنا فيو الريست الى بنحكى عنها ..راح نلاقى الفورم تبعتها من نوع بوست وبتبعتنى ع راوت اسمه password.update
<form method="POST" action="{{ route('password.update') }}">

==============

معلومة عالهامش ..لو انت حابب تغير اسم المشروع الى بيظهر بالنافبار فوق ..عالشمال
كان مكتوب Laravel وعاليمين اللوق ان والريجسير
ولما تعمل تسجيل دخول ...بتروح اللوق ان والريجيتسر عن اليمين وبحط الك البروفايل تبعك
اسمك ..بحطه بدوب داون ليست وفيها لينك تسجيل الخروج ..وعالشمال بضل اسم المشروع لارافيل
الى هو بالبراند

-لو حبينا نغيره الاسم ..بنروح ع ملف .env بنلاقيه اول اشى فوق

APP_NAME=Laravel
APP_ENV=local
APP_KEY=base64:cl6wCnD9gf5sKawSm/6nOX4mZG1qtNYkQ83dNR7vyus=
APP_DEBUG=true
APP_URL=http://localhost

-هيو عاملى اسم المشروع APP_NAME=Laravel

-انا بدى اسميه Marketing مسلا
APP_NAME=Marketing
APP_ENV=local
APP_KEY=base64:cl6wCnD9gf5sKawSm/6nOX4mZG1qtNYkQ83dNR7vyus=
APP_DEBUG=true
APP_URL=http://localhost

-لو تروح تعمل تحديث للموثع راح تلاقيها لسا لارفيل ..لانو حكينا اى تغير بملف .env
لازم نروح نعمل الامر composer dump-autoload
عشان يشوف التعديلات الى انت عملتها

-عملت الامر وزبط معى
-صار اسم المشروع عنا بالنافبار فوق بالبراند اسمه Marketing

==============


=============================================================================

   #033 - create githube remote repository and upload source code project

-بدنا نبدا نرفع شغلنا على القيت هب ..وبدى اعمل كلون للمشروع تبع المهندس

-اول خطوة بدنا ننشئ ريبوزترى
-بنعمل new وبنكتب اسم الريبو تبعنا سميتع LaravelCourse وخليته ببليك
بعدين بتقلو create repository

-انشانا الريبو هيك ...اول تنشا الريبو بيعطينا خطوات نمشى عليها
بدنا نطيقها واحدة واحدة

…or create a new repository on the command line
echo "# LaravelCourse" >> README.md
git init
git add README.md
git commit -m "first commit"
git branch -M main
git remote add origin https://github.com/ThaerEllouh/LaravelCourse.git
git push -u origin main


…or push an existing repository from the command line
git remote add origin https://github.com/ThaerEllouh/LaravelCourse.git
git branch -M main
git push -u origin main

-هادى الاوامر عشان اخليه يربط ما بين اللوكل ريبو عندى عالجهاز وما بين الريموت ريبو عالموقع ..عشان الفريق الى معى يشتغل معى ع نفس الشغل

-اول امر عنا
git init

-بدنا نروح ع المشروع تبعنا جوا htdocs -> Laravel_Course
-نقف داخله ...ونشغل القيت الى نزلنها عالجاهز هيك انا بكون داخل المشروع
واعطيه الامر
-بيعملى فولدر .git  فاضى ...لسا ما حطيت فيه ملفات السورس كود تبعت مشروعى
عشان ارفعها عالقيت هب


hs@DESKTOP-7ULSH1U MINGW64 /c/xampp/htdocs/Laravel_Course
$ git init
Initialized empty Git repository in C:/xampp/htdocs/Laravel_Course/.git/

-انشانا املف ..وبكون مخفى ..فيه 4 فولدرات و3 ملفات بكون

-طيب احنا لسا ما حطينا فيه ملفاتنا عشان نرفعهم عالريموت ريبو
-طيب هو احنا كيف بنربطهم ببعض كيف بكون اللوكل عندى مربوط بالريموت

-داخل ملف القيت الى انشاته ..فى ملف اسمه confg افتحته بالمحرر عشان
نفهم كيف العملة بتم

-ملف الكونفيق بس هى الى مكتوب فيه هلقيت
[core]
	repositoryformatversion = 0
	filemode = false
	bare = false
	logallrefupdates = true
	symlinks = false
	ignorecase = true

-عشان نفهم كيف بتم الربط ..مش مجرد نعرف الامر وخلص

-هلقيت الامر التانى
-بدنا نضيف كل ملفات المشروع الى عنا داخل فولدر .git الجديد عن طريق الامر التانى git add .

-حكتله نقطة يعنى ضيف كل حاجة ...ما عدا الى بملف .gitignore خلى بالك
-عملنا الامر وبياخد وقته

hs@DESKTOP-7ULSH1U MINGW64 /c/xampp/htdocs/Laravel_Course (master)
$ git add .

-هلقيت ضفنا ملفاتنا كلها ماعدا الى معمول الها قيت اقنور ..داخل فولدر القيت الى عنا ..اللوكل يعنى ..يعنى هاد كله لسا عالجهاز تبعنا

-نيجى للامر التاالت
-اى حاجة بضيفها لازم اعمل بعدها كوميت

hs@DESKTOP-7ULSH1U MINGW64 /c/xampp/htdocs/Laravel_Course (master)
$ git commit -m="first commit add all files"

-هلقيت لما انا عملت ستيتس ..بقلى انو انت عدلت بالملف teto.txt الى هو الملف هاد
الى انا بكتب فيه وبلخص قاعد
hs@DESKTOP-7ULSH1U MINGW64 /c/xampp/htdocs/Laravel_Course (master)
$ git status
On branch master
Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
        modified:   public/teto.txt

no changes added to commit (use "git add" and/or "git commit -a")

-بدى اوقف التلخيص هان واخلص العملية كلها بعدين بلخص

-يعنى خطوة الكوميت الى عملناها شو معناها ..انا لما اضيف اى حاجة لازم اعمل بعدها كوميت ..عشان القيت يعتمدها خلص ازا عملتلها كومت لانو بخاف تتراجع عن حاجة مسلا ملف رفعته بالغلط بدك تشيلو

-طيب هلقيت بدنا نربط ما بين جاهزى وما بين الريموت ريبو الى عالوقع
-معطينا هو الامر هاد
git remote add origin https://github.com/ThaerEllouh/LaravelCourse.git

-بعدنا ما نفذناه ....هيك تم الربط
-هلقيت لو تلاحظ ملف الكونفيق الى احنا فاتحينه صار هيك

[core]
	repositoryformatversion = 0
	filemode = false
	bare = false
	logallrefupdates = true
	symlinks = false
	ignorecase = true
[remote "origin"]
	url = https://github.com/ThaerEllouh/LaravelCourse.git
	fetch = +refs/heads/*:refs/remotes/origin/*
[branch "master"]
	remote = origin
	merge = refs/heads/master

-ضافلى الربط هيو

-ضل علينا اخر خطوة نرفع ملفاتنا عالريموت ريبو
git push -u origin main

-بس انت خلى المين .ماستر انا عندى ماستر مكتوبة
git push -u origin master

-وهيك خلص ورفعلى كل ملفاتى ..روح اعمل تحديث للصفحة الريبو ..راح تلاقى كل الملفات ارتفعت ما عدا ..الى معول الها اقنور

-كل الخطوات الى عملناها فوق هادى بتكون بس لاول مرة اول ما انشا الريبو

-هلقيت انت اى تعديل بتعمله عندك بالمشروع باى ملف
-لازم بعد ما تخلص شغلك ..تعملو اد بعدين كوميت بعدين ببلش عشان ترفع التعديلات

-وانا ملاحظ وانا بكتب بالملف هان ..يعنى صار هيك تعديل جديد ..بتلاقى المحرر
لون الى اسم الملف بالاصفر انو صار عندك هان تعديل وبدك تعلو ببلش للريموت عشان تحفظ شغلك وترفع تعديلاتك

-هلقيت انا عدلت هان شو الخطوات

==================

لاحظ الخطوات الى عملتها

hs@DESKTOP-7ULSH1U MINGW64 /c/xampp/htdocs/Laravel_Course (master)
$ git status
On branch master
Your branch is up to date with 'origin/master'.

Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
        modified:   public/teto.txt

no changes added to commit (use "git add" and/or "git commit -a")

hs@DESKTOP-7ULSH1U MINGW64 /c/xampp/htdocs/Laravel_Course (master)
$ git add public/teto.txt

hs@DESKTOP-7ULSH1U MINGW64 /c/xampp/htdocs/Laravel_Course (master)
$ git commit -m="modifiy teto.txt"
[master 2e9e791] =modifiy teto.txt
 1 file changed, 31 insertions(+)

hs@DESKTOP-7ULSH1U MINGW64 /c/xampp/htdocs/Laravel_Course (master)
$ git status
On branch master
Your branch is ahead of 'origin/master' by 1 commit.
  (use "git push" to publish your local commits)

nothing to commit, working tree clean

hs@DESKTOP-7ULSH1U MINGW64 /c/xampp/htdocs/Laravel_Course (master)
$ git push -u origin master
Enumerating objects: 7, done.
Counting objects: 100% (7/7), done.
Delta compression using up to 2 threads
Compressing objects: 100% (4/4), done.
Writing objects: 100% (4/4), 869 bytes | 217.00 KiB/s, done.
Total 4 (delta 3), reused 0 (delta 0), pack-reused 0
remote: Resolving deltas: 100% (3/3), completed with 3 local objects.
To https://github.com/ThaerEllouh/LaravelCourse.git
   18f7a66..2e9e791  master -> master
Branch 'master' set up to track remote branch 'master' from 'origin'.

hs@DESKTOP-7ULSH1U MINGW64 /c/xampp/htdocs/Laravel_Course (master)
$

=============================

-عملت ستيتس ...بقلى انو عندك تعديل ع ملف تيتو اعملو اد ...عملت اد لملف تيتو
بقلى اعمل الو كوميت ...اعملت كوميت ..ورجعت اقله اعطينى الستيتس ..قلى اعملو ببلش ...اعملتله ببلش

-وزى هيك بدك تضل تعممل ...هى القيت كلو اربع اوامر

- نيجى هلقيت ننزل مشروع المهندس عنا
-عن طريق امر اسمه clone

-بروح عالريبو تبع المهندس ..وبضغط ع كلمة الكود فوق ..وبنسخ منها الرابط
https://github.com/ahmedeagle/starter.git

-هلقيت باجى بقف بفولدر hdocs لازم داخل هاد الفولدر
لو بتشتغل عالوامب جوا فولدر www بدك تقف

-وبتكتب الامر
git clone https://github.com/ahmedeagle/starter.git

-عملت انا الامر وهى نزل عندى مشروع المهندس ع الاتش دوكس

C:\xampp\htdocs
λ git clone https://github.com/ahmedeagle/starter.git
Cloning into 'starter'...
remote: Enumerating objects: 632, done.
remote: Counting objects: 100% (632/632), done.
remote: Compressing objects: 100% (408/408), done.
Receiving objects:  90% (569/632), 1.11 MiB | 202.00 KiB/sck-reused 0eceiving objects:  89% (563/632), 1.11 MiB | 202.00 KiB/s
Receiving objects: 100% (632/632), 1.12 MiB | 139.00 KiB/s, done.
Resolving deltas: 100% (335/335), done.
Updating files: 100% (192/192), done.

C:\xampp\htdocs
λ

-اسمه مشروع المهندس starter

-طيب هلقيت الملف المشروع نزل عندى من دون ملفات الاقنور ومن دون الداتا بيز

-هلقيت ضل علينا 3 خطوات عشان نشغل مشروع المهندس

-الخطوة الاولى بدنا نربط بالداتا بيز تبعتنا مش تبعت المهندس ..الا ازا بدك تاخد الداتا بيز تبعت المهندس ولكن هو ما رفعها ما فى حد طلبها منو

-يعنى بدنا نروح ع ملف .env ونغير الربط نخليه عالدداتا بيز تبعتنا
ونغير ربط الميل تراب كمان

-تانى اشى بدنا ننزل الملفات الى كان معمول الها اقنور ..لاحظ من مشروع المهندس
هى ملف الاقنور تيعه

/node_modules
/public/hot
/public/storage
/storage/*.key
/vendor
.env
.env.backup
.phpunit.result.cache
Homestead.json
Homestead.yaml
npm-debug.log
yarn-error.log

-انا الملفات هادى ما نزلت معى ...وهادى كان عند المهندس وازا بتلاحظ من ضمنها
ملف .env  يعنى هاى الخطوة الاولى الى بدنا نعملها وبعد ما ينزل الانف معنا بنعدل عليه

-كيف بدنا ننزلهم
-بنقف داخل فولدر starter تبعنا وبنعطيه الامر
composer install

-بنزل عندى بالمشروع كل الملفات الى كان معمول الها اقنور
-لو مشروعك مش موجود داخل hdocs مش راح يزبط معك خلى بالك
-ومعولمة تانية ..لو تعمل كلون لمشروع اسمه موجود عندك جوا فولدر الاتش دوكس برضو راح يصير تعارض اسماء وما راح يزبط

-خلينى ننفذ الامر وراح ياخد  وقت


C:\xampp\htdocs\starter (master -> origin)
λ composer install
Installing dependencies from lock file (including require-dev)
Verifying lock file contents can be installed on current platform.
Package operations: 94 installs, 0 updates, 0 removals
  - Downloading doctrine/inflector (1.3.1)
  - Downloading doctrine/lexer (1.2.0)
  - Downloading dragonmantank/cron-expression (v2.3.0)

-نزل كتيرررر ..اخد وقت معنا

-بس نزل الفيندور ..اما ملف .env ما نزله مش عارف ليش




==============================================================================

#034 - laravel Login and Register With Facebook Using Laravel Socialite

-الدرس رقم 34 و35 بيشرح فيهم كيف نعمل تسجيل دخول باستخدام الفيس بوك
-استخدم فيها باكيج جاهزة اسمها Socialite وحملها عندو واشتغل عليها
-الشرح ما فهمته كتير وحاولت اشتغل الى بشتغله وهو بيشرح ما زبط معى

-بعد ما تخلص الكورس بترجع للدروس هادى وبتفهمها

-الدرس 36 بيتكلم عن مشكلة npm بقول انو لازم تنزلو node.js

===============================================================================

       #037 - Laravel Login with mobile or email or username at same time

-الدرس هاد ع طلب الناس ...بدو يشرح كيف نعمل تسجيل الدخول بالجوال او بالايميل
اى واحد فيهم تكتب جوالك ولا ايميلك مع الباسوورد عادى يدخلك

-احنا باى ديفولت كان عنا الدخول بالايميل ...بعدين تعلمنا كيف ندخل بالجوال

-هلقيت بدنا نتعلم ندخل بالايميل او الجوال اى واحد فيهم

-يعنى عنوان الحقل بدنا نقله دخل ايميلك او رقم جوالك

-ولكن خلى بالك ..لازم يكونو يونيك ..اى حاجة انت بدك تفوت فيها
يعنى بدك تعمل سيليكت عليها من الداتا بيز لازم تكون يونيك لكل يوزر

-فى ناس ممكن تعملها دخل ايميلك او اسم المستخدم ..عادى انت اعرف الطريقة
واعمل الى بدك اياه تدخله بالاسم بالجوال بالايميل ..ازا بتفهم الطريقة بتعمل كل اشى

- اول خطو عنا ..بدى افوت فيو اللوق ان ...بدى اوقف حقل الايميل والجوال ..بدل ما امسحهم
او اعدل عليهم ..لا بدى اوقهم واعمل حقل تانى اكتب عليه email or mobile

-بدى اعطيه name=identify او اى اسم يعنى يدل عالاتنين
-وبدى اغير التايب تبعه ل typy=text  عشان لو ضل ايميل ..بالتالى لما اجى اكتب
رقم جوال مش ارح يقبله ..راح يطلعله رسالة الفالديشن انو هاد مش ايميل

-هى الحقل الجديد تبعنا

<div class="form-group row">
    <label for="identify" class="col-md-4 col-form-label text-md-right">Email Or Mobile</label>

    <div class="col-md-6">
        <input id="identify" type="text" class="form-control @error('identify') is-invalid @enderror" name="identify" value="{{ old('identify') }}" required  autofocus>

        @error('identify')
            <span class="invalid-feedback" role="alert">
                <strong>{{ $message }}</strong>
            </span>
        @enderror
    </div>
</div>

-حيكنا انو الاتنين لازم يكونو يونيك ..وراح نعرف كيف نجيره واحنا بنعمل جملة الانسيرت ..يكونو الاتنين يونيك

-الخطوة التانية
-ازا بتتزكر لما غيرنا من ايميل ل موبايل ..رحنا ع كنترولر اللوق ان
وقلنا انو الاكواد تبعته موجودة بالتريت ..ودخلنا جوا التريت واخدنا
الميثود جبناها عالكنترلر نفسه واعمل عليه اوفر رايد ..تغير ل موبايل

public function username()
    {
        return 'mobile';
    }

-خلى بالك لما فتحنا التريت ..بتلاقى المحرر لونه باللون الاحمر ..لانو سورس كود ممنوع التغير عليه نهائى ..عشان نقدر نعدل علي اى ميثود فيه ..اخدناها عالكنترولر نفسه عشان نعل عليها اوفر رايد ...لما حكناله return 'mobile';
-كلمة mobile هادى لازن تكون نفسها الى بالداتا بيز ونفسها الى بالمودل الى معمول عليها فيلبل ..ونفسها النيم تبع الحقل الى بشتغل عليه

-طيب هلقيت بدنا نروح للميثود هادى ...ونكتب الكود تبعنا ..نغير من موبايل
ل موبايل او ايميل

-هان ما بنقدر نقله ريتيرن ايميل ..لانو ممكن ما بدخل ايميل بدخل موبايل
وما بقدر اقله ريتيرن موبايل كمان ...لانو ممكن ما يدخل موبايل يروح يدخل ايميل

-طيف شو هان الحل وشو الكود الى بدنا نكتبه

-بدنا نعمل جملة تشيك بسيطة جدا ..جملة اف ..نعرف من خلالها انو الى كتبلى اياه هل هو ايميل ولا موبايل ..ونعمل ريترن للى هو دخله

-راح نستخدم هان حاة من البى اتش بى بيور ...الى هى الفلتر
-بدنا ناخد الفاليو تبعت الحقل ..ونقله اعملى عليها فلتر ازا هى ايميل ولا لا
-ازا هى ايميل ...بالتالى الحقل ايميل ..رجعلى ايميل
-ازا هى مش ايميل ..يعنى الس ...بالتالى الحقل موبايل ..ييعنى رجعلى موبايل

-بدنا نعمل متغير تسميه مسلا الفاليو ...انا ما بعرفش شو هو لسا
-بدنا نقله $value = request()->

-request() : هاى عبارة عن هيلبر فنكش ..بتجيلى كل حاجة فى الريقويس على نظام اريه
-ايش يعنى الكلام هاد طيب ....الى بيحصل بلافيل عبارة عن ريقويست وريسبونس

-الريقويست هاد ...بخزن جوا اريه كل حاجة انت بتروح فيها ...يعنى مسلا انت عندك فورم
فيها الاسم والسن والعمر والايميل والموبايل والى ذلك

-الفورم هادى لما انت تضغط ع الزر تبعها ...ارسال ...وين بتروح لحد ما تيجى عندك بالكنترولر تبعك عشان تقدر تعالجها تشوف النيم ايش اسمه والعمر قديش وتشوف الموبايل شو هو وتقدر تخليه موبايل والكلام هاد كلو وكل الامور الى وصلتك

-بتروح فى سيشن ..او بريقويست ..الريقويست هاد عبارة عن نظام اريه ..اسوسيتف اريه
فيها الكى والفاليو ..يعنى مسلا انت بعتى الفورم تبعتك ..الريقويست زى هيك بخزنها

['name'=>'thaer', 'age'=>'16', 'email'=>'t@gmail.com', 'mobile'=>'491533']

-زى هيك بتتخزن بالريقويست..هاد الى بينعمل خلف الكواليس الى انت ما بتشوفه

-وهيك عرفنا الطريقة انو كيف بتصل بيانات الفورم للكنترولر ..انو لارافيل بتاخد البيانات وبتخزنها بريقويست ع شكل اريه ..وانا لما بدى اصل للريقويست هاد بالكنترولر

-بصل الو زى ما حكينا عن طريقة فنكشن الريقويست ...يعنى انا مجرد ما اكتب اسمه الريقويست ..يعنى انا صار عندى الاريه الى حكينا عنها ..بدخل فيها وبشوف شو بدى منها

-طيب هلقيت بدنا نصل لحاجة فيه ..شو هى ...بدنا نصل للفاليو تبعت حقل identify
انا لسا مش عارف شو هى الفاليو الى انككتب فيه
        $value = request()->input('identify');
-ممكن يكون فيه engthaer@gmail وممكن يكون فيه رقم الجوال 491533

-طيب هلقيت عشان نعرف شو الى وصلنى بالحقل هاد ..بدنا نعمل فلتر عليه

-هلقيت انا بدى اعرف هو كتب ايميل ولا موبايل ..حكينا بدنا نعمل فلتر عشان نشوف شو كتب
     $field = filter_var($value, FILTER_VALIDATE_EMAIL) ? 'email' : 'mobile';

-هيك انا فلترته ..حكتله ازا ايميله رجعلى email لو مش ايميل
اكيد راح يكون موبايل يعنى مفش غير هيك ..بالتالى بقلك mobile

-خلى بالك كلمة ايميل وموبايل لازم تكون نفسه الى بالمودل الى عامللهم فيلبل
ونفسه الاسم الى بفورم التسجيل

-هيها بطريقة اف العادية


        $field = '';
        if(filter_var($value, FILTER_VALIDATE_EMAIL)){
            $field = 'email';
        } else {
            $field = 'mobile';
        }

-طيب انا هلقيت قدرت اعرف هو دخل ب ايميل ولا موبايل ..هلقيت بدنا نضيفه للريقويست
لانو الريقويست فش فيه الا identify خلى بالك

-طيب كيف بدنا نضيف للاريه تبعت الريقويست ..عن طريقة دالة الميرج موجودة بالبى اتش بى

-بدنا نعمل ميرج للحاجتين الى عنا ..قلنا اريه الريقيست بدها كى وفاليو

-يعنى بدنا نقله ميرج ..الكى ..الى هو $field هاد بيحمل كلمة  ايميل يا كلمة موبايل
-والفاليو تبعته الى هى القيمة الى طلعناها قبله الى اجتنى من ال اى دينتفاى
$value

-بدها تصير عنا هيك
        request()->merge([$field => $value]);
-اخر خطوة بنقله اعمل ريتيرن لل فيلد $field الى انا راح ابحث فيه
الى حكينا هو اما ايميل او موبايل انا مش عارف شو هو
        return $field;

-صارت عنا الميثود

 public function username()
    {
        $value = request()->input('identify');
        $field = filter_var($value, FILTER_VALIDATE_EMAIL) ? 'email' : 'mobile';

        request()->merge([$field => $value]);

        return $field;
    }

-وهلقيت روح ادخل بالايميل او بالموبايل راح يفوت معك
-ع فكرة ممكن تخلى  عمود الموباي
ل يونيك كمان ..تخلى عامودين يونيك عادى الايميل والموبايل

-معلومة ..انا لما جربت كان الاباتشى طافى عندى لانو كند طافى الجهاز وشغلته وككل علمى الاباتشى شغال ..الداتا بيز والاباتشى ..لما اجيت اجرب ...كان يطيلعى هاد الايرور
Illuminate\Database\QueryException
SQLSTATE[HY000] [2002] No connection could be made because the target machine actively refused it. (SQL: select * from `users` where `email` = eng.thaerellouh@gmail.com limit 1)

-بالاخير انتبهت انو السيرفر مش شغال

-وخلى بالك اعتقد كمان انت لما تعمل رن ارتيزن للمشروع وتشغل عالبورت 8000
هاد ما الو علاق بالاباتشى الى عنا شغال ولا لا ...عشان هيم انا ما انتبهت للداتا بيز انها شغالة

-اخر معلومة ...لو انت حابب تدخل بالاسم او الايميل
-ما عليك الا تبدل كلمة mobile لكلمة name وخلص

public function username()
    {
        $value = request()->input('identify');

        $field = filter_var($value, FILTER_VALIDATE_EMAIL) ? 'email' : 'name';

        request()->merge([$field => $value]);

        return $field;
    }

-هيك بتفوت يا بالاسم ..يا بالايميل

-اخر حاجة ..عشان انا اشتغل ب 4 ملفات ..بدى ارفع تعديلاتى عالقيت ..عشان عالمحرر ما يضل لونه اصفر

-اول خطوة عملتها اشوف الحالة ..بعدين اد ..بعدين كوميت ..بعدين بوش

C:\xampp\htdocs\Laravel_Course (master -> origin)
λ git status
On branch master
Your branch is up to date with 'origin/master'.

Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
        modified:   app/Http/Controllers/Auth/LoginController.php
        modified:   app/User.php
        modified:   public/teto.txt
        modified:   resources/views/auth/login.blade.php

no changes added to commit (use "git add" and/or "git commit -a")

C:\xampp\htdocs\Laravel_Course (master -> origin)
λ git add *
warning: LF will be replaced by CRLF in app/Http/Controllers/Auth/LoginController.php.
The file will have its original line endings in your working directory
warning: LF will be replaced by CRLF in app/User.php.
The file will have its original line endings in your working directory
warning: LF will be replaced by CRLF in public/teto.txt.
The file will have its original line endings in your working directory
warning: LF will be replaced by CRLF in resources/views/auth/login.blade.php.
The file will have its original line endings in your working directory

C:\xampp\htdocs\Laravel_Course (master -> origin)
λ git commit -m="how to login by email or mobil"
[master 34d9056] =how to login by email or mobil
 4 files changed, 360 insertions(+), 65 deletions(-)

C:\xampp\htdocs\Laravel_Course (master -> origin)
λ git push origin master
Enumerating objects: 27, done.
Counting objects: 100% (27/27), done.
Delta compression using up to 2 threads
Compressing objects: 100% (14/14), done.
Writing objects: 100% (14/14), 6.76 KiB | 692.00 KiB/s, done.
Total 14 (delta 12), reused 0 (delta 0), pack-reused 0
remote: Resolving deltas: 100% (12/12), completed with 12 local objects.
To https://github.com/ThaerEllouh/LaravelCourse.git
   2095d59..34d9056  master -> master

C:\xampp\htdocs\Laravel_Course (master -> origin)
λ

=================================================================================

              #038 - download all source code from GitHub

-بيشرح كيف ناخد التعديلات الجديدة عن القيت ..لو عمل تعديل عالمشروع ولا ضاف كود ولا ضاف ملف ..كيف بدك تسحبه ..عن طريق امرpull

-انا اخدت كلون من مشروعى ونزلته من جديد ..اسم المشروع عندى عالجهاز
Laravel_Course اما لما رفعته عالقيت سميت الريبو LaravelCourse

-انا اخدت منو كلون ونزل عادى معى لانو الاسم مش نفسه ..ف نزل عادى
-هلقيت المشروع الى اسمه LaravelCourse هو الى انا سحبته

-طيب عشان يشتغل معى صح حكينا عنا 3 خوات

-عملت الامر composer i
عشان انزل الفيندور
C:\xampp\htdocs\LaravelCourse (master -> origin)
λ composer i

-بعدين عملت الامر npm i && npm run dev
عشان ينزلى ملف النود جى اس وبتفعل معى npm عارفين الاوامر هادى ليش طبعا
C:\xampp\htdocs\LaravelCourse (master -> origin)
λ npm i && npm run dev

-بعدين  عملت ملف الفيندور ...انا اخدو نسخ من مشروع القديم وحطيته بهاد الى نزلته
واشتغل معى تمام التمام

-هلقيت انا قاعد بكتب بالملف ها صح ..يعنى صار تعديلات هان

-لو تروح عالمشروع الجديدة وتفتح الملف هاد مش راح تلاقى فيه الكلام الجديد هاد الى انا حاليا بكتب فيه

-لازم انا اروح اعملو بوووش عالريبو ...وبعدين بالمشروع التانى الى نزلته
اعمل بووول من الريبو عشان ينزلو عندى التعديلات

-انا رحت رفعت كل التعديلات الى عندى ..بعدين دخلت عالمشروع الى نزلته ..واعطيته الامر git pull origin master

================

C:\xampp\htdocs\Laravel_Course (master -> origin)
λ git status
On branch master
Your branch is up to date with 'origin/master'.

Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
        modified:   public/teto.txt

no changes added to commit (use "git add" and/or "git commit -a")

C:\xampp\htdocs\Laravel_Course (master -> origin)
λ git add *
warning: LF will be replaced by CRLF in public/teto.txt.
The file will have its original line endings in your working directory

C:\xampp\htdocs\Laravel_Course (master -> origin)
λ git commit -m="Modify teto.txt"
[master da3063c] =Modify teto.txt
 1 file changed, 82 insertions(+)

C:\xampp\htdocs\Laravel_Course (master -> origin)
λ git status
On branch master
Your branch is ahead of 'origin/master' by 1 commit.
  (use "git push" to publish your local commits)

nothing to commit, working tree clean

C:\xampp\htdocs\Laravel_Course (master -> origin)
λ git push origin master
Enumerating objects: 7, done.
Counting objects: 100% (7/7), done.
Delta compression using up to 2 threads
Compressing objects: 100% (4/4), done.
Writing objects: 100% (4/4), 1.75 KiB | 149.00 KiB/s, done.
Total 4 (delta 3), reused 0 (delta 0), pack-reused 0
remote: Resolving deltas: 100% (3/3), completed with 3 local objects.
To https://github.com/ThaerEllouh/LaravelCourse.git
   34d9056..da3063c  master -> master

C:\xampp\htdocs\Laravel_Course (master -> origin)
λ cd ..

C:\xampp\htdocs
λ cd LaravelCourse

C:\xampp\htdocs\LaravelCourse (master -> origin)
λ git pull origin master
remote: Enumerating objects: 7, done.
remote: Counting objects: 100% (7/7), done.
remote: Compressing objects: 100% (1/1), done.
remote: Total 4 (delta 3), reused 4 (delta 3), pack-reused 0
Unpacking objects: 100% (4/4), 1.73 KiB | 4.00 KiB/s, done.
From https://github.com/ThaerEllouh/LaravelCourse
 * branch            master     -> FETCH_HEAD
   34d9056..da3063c  master     -> origin/master
Updating 34d9056..da3063c
Fast-forward
 public/teto.txt | 82 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 82 insertions(+)

================================================

- اخر ملعومة عنا بالدرس

- ازا بتلاحظ بعد ما عملت بووول كتبلى بالاخر Updating 34d9056..da3063c
-عمل ابديت لكل حاجة

-طيب فرضا عملت بوول وما زبط معك

-لو انت عملت اى تعديلات عالمشروع الى سحبته ..بينك وبين نفسك ..كنت تعدل وتجرب امور مسلا ...لازم تعمللها add بعدين تعمللها commit
بعدين تعمل الامر pull عشان تسحب شو التعديلات الى عدلها المهندس ثائر الجديدة


- انا عشان اجرب الكلام هاد ..رحت غيرت بفيو الويلكم ..خليت عنوان الصفحة
Eng. Thaer Y. Ellouh
وعملت اد وكوميت وبووش رفعت التعديلات

-رحت دخلت عالمشروع الى سحبت وعملت بووول ...فعلا لما شغلته غير عندى صفحة الويلكم
صارت زى صفحة الويلكم بالمشروع الاساسى

================================================================================

     #039 - complete guide for laravel task scheduler - شرح task scheduler

-task scheduler : بدو يشرحه بناءا ع طلب الناس

-ايش يعنى task scheduler
هاد الموضوع من اهم الحاجات بشغلنا .. ما فى مشروع بنسبة 95 بالمية الا تسخدم فيه الحاجة هاى

-مسلا انا عندى نظام دفع فواتير ...الى ما يدفع فاتورته اول الشهر ..اخليه غير مفعل
مسلا عنا 0 مفعل ...1 غير مفعل ...كيف بدنا نعمل الشغلة هاى بشكل اوتوماتيك
بدون ما الادمن يتدخل فيها ...بنستخدم هان مفهوم task scheduler

-بنقله الى ما بيدفع فاتورة ..غيرلى حقل التفعيل تبعه بالداتا بيز من 0 ل 1

-طيب شغلة تانية ممكن نشتفيد منها من هاى الدرس ...مسلا انا عندى نظام مدرسة ...بدى كل يوم ابعت ايميل للطلاب الى عنا بالداتا بيز ..شو عنوان درس بكرا مسلا
-مش من المنطق انو الادمن كل يوم يفوت ويبعت ايميل لكل الطلاب بشكل يدوى

-نظام task scheduler بريحنا بالقصص هادى ...مسلا بقلو ابعتلى الايميل بشكل يومى
بشكل اسبوعى بشكل شهرى

-وكذلك نظام الفواتير ..مسلا بقله كل 5 دقايق غيرلى التفعيل من 0 ل 1 مسلا كل 10 ايام مسلا بشكل شهرى ..اقله كل شهر ..حول تفعيله من 0 ل 1 يعنى خليه غير مفعل ازا ما دفع وهكزا


-laravel task scheduler بتعمللنا القصص هادى كلها بشكل اوتومتيك

-المصطلح مش جديد بلافيل ..المصطلح موجود من زمان ..المصطلح موجود بحاجة اسمها كرون جوب للى اشتغل بى اتش بى نبيتف بيعرفها كنا بنعملها عن السى بانيل ...من لوحة التحكم

-عشان نفهم القصة ...بدنا نخلى 2 يوزر عنا بالداتا بيز ...وبدنا نعمل عليهم مثال اعطيهم حقل التفعيل واخلى باى ديفولت 0 ...واقله اوتوماتيك كل 5 دقايق غيرلى التفعيل من 0 ل 1 للاعضاء الى عندى

-احنا لما يكون عنا 10 يوزر مسلا ولا 20 ممكن يكون الامر سهل عليك انت تعملهم بايدك
ولكن لما يكون عنا مئات او الاف اليوزر عنا ...هان عاد راح تعملو بشكل اوتومايك


-ايش الامر الى بنستخدمه عشان نعمل القصة هادى

php artisan make:command Expiration

-انا لما حكتله command يعنى راح ينشا الى فولدر اسمه commands
داخل فولدر app -> console -> commands

-داخل فولدر ال commsnds هاد راح يعملى ملف باسم الكلاس هاد Expiration الى انا سميته هيك

-قبل ما تنفذ الامر ..انت لو تروح ع فولدر الكونسول مش راح تلاقى فيه ولا اشى الا ملف اسمه كيرنل ...خلى بالك ملف الكيرنل ها راح نشتغل فيه شغل بخص الكوماندز هاد الى عملناها ....ملف الكيرنل هاد بيختلف عن ملف الكيرنل الموجود بالميدل وير وغيره

-ما علينا
-هلقيت لما ننفذ الامر حكينا راح يضيف النا داخل الكونسول فولدر جديد اسمه كوماندس
وفيه ملق اسمه Expiration

-اعطيناه الامر
C:\xampp\htdocs\Laravel_Course (master -> origin)
λ php artisan make:command Expiration
Console command created successfully.

-عملى هاد الملف باسم الكلاس

<?php

namespace App\Console\Commands;

use Illuminate\Console\Command;

class Expiration extends Command
{
    /**
     * The name and signature of the console command.
     *
     * @var string
     */
    protected $signature = 'command:name';

    /**
     * The console command description.
     *
     * @var string
     */
    protected $description = 'Command description';

    /**
     * Create a new command instance.
     *
     * @return void
     */
    public function __construct()
    {
        parent::__construct();
    }

    /**
     * Execute the console command.
     *
     * @return int
     */
    public function handle()
    {
        return 0;
    }
}

-انا عملت ميك كوماند ...يبقى الفولدر الى راح ينشا عندى اسمه كوماندس

-وعمل النا داخله الكلاس تبعنا الى سميناه Expiration

-بياخد منى كزا حاجة
protected $signature = 'command:name';

-بياخد منى الاسم ...ولنفتضر نقله اسمه
    protected $signature = 'user:expire';

-مجرد بس اسم دال عالحاجة الى بدى اعملها يعنى

-تانى حاجة بنعملها
protected $description = 'Command description';

-بنكتبلها الوصف تاعى ...بس مجرد عشان لو حد شغال معى بالمشروع يفهم يعنى اكتبله وصف شو انا بعمل
-مسلا بدى اقله ..انو انا بعمل اكسبير ..يعنى بلغى تفعيل ...بعمل اكسبير لليوزر كل 5 دقايق مسلا

    protected $description = 'Expire Useres Every 5 Minutes automatically';

-بضل عنا اخر فنكشن هادى الهاندل ..هادى الى بنكتب فيها الكود تبعنا
public function handle()
    {
        return 0;
    }

-ع فكرة عند المهندس كانت فاضية ما فيها ريتيرن 0

-طيب هلقيت اخر حاجة عنا كيف بدنا نعمل رن للفنكشن هادى ..نشغلها يعنى

-بنروح لملف الكيرنل الى بالكنسول
-هى ملف الكيرنل
<?php

namespace App\Console;

use Illuminate\Console\Scheduling\Schedule;
use Illuminate\Foundation\Console\Kernel as ConsoleKernel;

class Kernel extends ConsoleKernel
{
    /**
     * The Artisan commands provided by your application.
     *
     * @var array
     */
    protected $commands = [
        //
    ];

    /**
     * Define the application's command schedule.
     *
     * @param  \Illuminate\Console\Scheduling\Schedule  $schedule
     * @return void
     */
    protected function schedule(Schedule $schedule)
    {
        // $schedule->command('inspire')->hourly();
    }

    /**
     * Register the commands for the application.
     *
     * @return void
     */
    protected function commands()
    {
        $this->load(__DIR__.'/Commands');

        require base_path('routes/console.php');
    }
}


-عنا شغلتين بملف الكيرنل
-اول شغلة عنا اريه ..بنسميه فيها التاسك تبعنا السكيديوال ..هان باريه اسمها كوماندز
protected $commands = [
        //
    ];

-وبنادى عليه بالفترة الى انا عايزها هان ..يعنى بدى اياه يشتغل كل قديش
عنا يومى واسبوعى وشهرى ..وامور كتيرة
protected function schedule(Schedule $schedule)
    {
        // $schedule->command('inspire')->hourly();
    }

-الدرس الجاى بنكمل وبنفهم كيف نكتب الكود ونعمل المثال الى حكينا عليه

=================================================================================

    #040 - Expire Users after 5 minute using laravel task sheduler example

-هلقيت بدنا نروح عالداتا بيز ..نزود كولون يعنى عمود اسمه expire
ونخلى الديفولت تبعه 0

-ممكن انت تزوده من المايقريشن عاددى ..ولكن احنا عشان الوقت بدنا نفوت عالداتا بيز ونزوده بايدنا

-وما تنسى لما تزود عمود بالداتا بيز بجدول اليوزر ...لازم تروح عالمودل الى بكافؤ هان وتضيفو عليه ..حكينا اسمه المودل User.php ..لازم نضيف فيه عمود الاكسبير برضو بالفيلبل ... عشان باى جملة انسيرت وابديت وغيرو ينشاف معنا
-هى ضفته بالمودل كمان
protected $fillable = [
        'name', 'email', 'password', 'mobile', 'expire'
    ];

-هلقيت بدنا نروح ع ملف Expiration ع فنكشن الهاندل ونكتب الكود تبعنا
-لسا قدام راح نفهم جمل السيلكت والابديت وغيرها تعين الداتا بيز ..انت هان بس افهم الفكرة


-انا هان بتعامل مع الجدل الى اسمه يوزر عن طريق المودل تبعه الى عنا الى اسمه User
-خلى بالك لما اكتبه لازم يتدعيلى اياه فوق ..انا ما استدعاه انت اكتبه بايدك
-حاول اكتب مرة والتانية عبل ما المحرر يطلعلك اياه واضغط انتر عشان يستدعيه لحاله فوق ..انا من تانى مرة لما المحرر طلعلى اياه
-زى هيك بيستدعيه فوق use App\User;

-where('expire', 0) : لسا راح نعرف شو هى الوير ..بس انو اتعال مع حقل الاكسبير
مع اليوزر الى فيه ..الى الاكسبير تبعهم 0

-where('expire', 0)->get() : قيت يعنى هاتلى كل اليوزر الى الاكسبير تبعهم 0

-وحطيناهم بمتغير اسمه $users عشان اعمل لوب عليهم بالفور ايتش
$users = where('expire', 0)->get();

-بدى اعمل لوب عليهم ..عشان اعمل عليهم جملة ابديت ..اخلى الاكسبير تبعهم من 0 ل 1

public function handle()
    {
        // return 0;
        $users = User::where('expire', 0)->get();
        foreach($users as $user){
            $user->update(['expire' => 1]);
        }

-update: بتاخدى من اريه اوف الفيلدز الى عنا ...اريه بالحقول تعتنا يعنى
-هان حكتله اعملى ابديت ع حقل الاكسبير خليلى اياه 1

-طيب هلقيت كيف بدى انادى عالكود هاد لحاله كل 5 دقايق يكون اوتوماتيك يعنى

-بدنا نروح عالكيرنال
-اول خطوة بالكيرنال حكيناها ..نعطيله اسمه الكلاس الى بدنا نتعامل معو
protected $commands = [
        Expiration::class,
    ];

-لما انا كتبت اسم الكلاس خلى بالك ..استدعالى اياه فوق ..عشان هيك يكون ربط ملف الكلاس الى فيه الكود مع الكيرنال الى انا فيه
-زى هيك استدعاه
use App\Console\Commands\Expiration;

-هلقيت بدنا نروح عالميثود الى تحتيها ..عشان نقله نفذه كل قديش
protected function schedule(Schedule $schedule)
    {
        // $schedule->command('inspire')->hourly();
    }

-خلى بالك هان command('inspire') هاد اسم الكوماند مش اسم الكلاس
-اسم الكوماند الى كتبناه لما حكينا مجرد اسم بس عشان نعرف شو بيعمل
الى هو هاد user:expire

-هان بدى اقله كل دقيقة مسلا ..عشان اختصار للوقت
-بدها تصير الميثود هيك ..لما اكتب ايفرى مينت لحالها بتطلعى

protected function schedule(Schedule $schedule)
    {
        $schedule->command('user:expire')->everyMinute();
    }

-هلقيت المفروض بعد دقيقة لوو تروح عالداتا بيز تلاقى كل المستخدمين الى الاكسبير عندهم 0 صارت 1

-طيب انت لو بدك تكسب وقت وتمشى الدقيقة ...كانو الدقيقة يعنى مشت وخلصت ..عنا امر بيعملك العملية هادى
 php artisan schedule:run

-هيك كانى بقله الدقيقة عدت وخلصت يعنى

-خلينا ننفذ الامر
C:\xampp\htdocs\Laravel_Course (master -> origin)
λ php artisan schedule:run
Running scheduled command: "C:\xampp\php\php.exe" "artisan" user:expire > "NUL" 2>&1

C:\xampp\htdocs\Laravel_Course (master -> origin)
λ

-فعلا تحولو من 0 ل 1

-هو هان بالجملة هاى شو بقلى
Running scheduled command: "C:\xampp\php\php.exe" "artisan" user:expire > "NUL" 2>&1

-بقلى انو السكيديوال الى بالمسار هاد كلو تنفذ
"NUL" 2>&1 هدول لقدام بتنفهم ..لما نتعامل  ونربط مع السى بانيل ..هدول بخصو السى بانيل

-انا هلقيت لو اروح اسجل يوزر جديد ..راح ينضاف عندى بالداتا بيز ..اكسبير 0
ولكن لو ترجعله بعد دقيقة بتلاقيه 1 ...انا ممكن استفاد من الموضوع هاد بقصلة تفعيل الاعضاء ..مسلا زى ما عملنا بمشروع الزيرو ..انو اليوزر لما يسجل عندى يدخل ك عضو غير مفعل ..وما يتفعل الا لما انا اقبله ..ممكن انا هان مسلا مسلا ..اقله انو بعد 24 ساعة اقبلى اليوزر الى سجلو جداد مسلا

-ع فكرة ..انا بستنى عليه دقيقة ..ما بيتغير ...بيتغير معى فقط لما انفذ الامر
مش عارف ليش ..والمهندس نفذه بالامر كمان ...ما استنى قدامنا وخلاه ينفذ لحاله


=================================================================================

    #041 - How To send daily Emails using Laravel task Sheduler - ارسال بريد الكتروني

- بدنا ناخد مثال تانى عليها ...مسلا عنا نظام طلاب ..بدنا نبعتلهم ايميل كل يوم م
مسلا بدى اقللهم بالايميل ..شو الدرس تبع بكرا

-بدى ابعتلهم ايميل اوتوماتيك كل يوم ...يقللهم درس بكرا شو عنوانه

-يعنى الدرس هاد عبارة عن شغلتين ..كيف نعمل تاسك سكيديولر زى الدرس الى فاد
وكيف نعمل ايميل ونبعته برضو

-اول خطوة بدنا نعملها ..زى ما عملنا المرة الى فاتت بدنا ننفذ الامر الى بيعمللها الكلاس ...بدنا نسميه الكلاس تبعنا مسلا Notify يعنى اشعار او اخطار اشعار بايميل مسلا ..سميه اى اسم انت يعبر عن التاسك تبعتك الى بدك تعمله عشان تنفذها بوقت معين

C:\xampp\htdocs\Laravel_Course (master -> origin)
λ php artisan make:command Notify
Console command created successfully.

C:\xampp\htdocs\Laravel_Course (master -> origin)

-هلقيت روح ع فولدر الكنسول ..راح تلاقى ملف Notify الى عملناه

-اول حاجة عنا هلقيت حكينا بدنا نسميه
    protected $signature = 'notify:email';

-يعنى انا بدى ابعت ايميل تزكيرى للطلاب ..او اى حاجة يعنى

-الوصف
    protected $description = 'Send Email Notify For All Users Every Days';

-هلقيت ضل علينا نكتب الكود ..كيف نجيب الايملات بتعنا من الداتا بيز
-وكيف نبعتلهم ايميل

        $users = User::select('email')->get();
-انا هيك عملت سيليكت عالاميلات تبعت اليوز كلهم ..واعمل قيت الهم كلهم ..يعنى جبتهم عندى

-طيب عنا طريقة تانية ...ممكن انا اجيب الايميلات كلها واحطها باريه
والكلام هاد كلو راح نفهمه قدام

-يعنى ممكن نعملها بمنظر تانى زى هيك
        $emails = User::pluck('email')->toArray();

-البلك هادى بتحولى الايملات كلها بتحطها باريه ...وكل الكلام هاد راح نفهمه قدام

-هلقيت بدنا نعمل لووب على الايملات هادى ...عشان نعطيه الكود الى يبعتلهم ايميل
-الكود راح نخليه للدرس الجاى كود كيف نبعت الايميل
-كيف كيف نبعت ايميل معين لليوزر ..جزء بعيد عن التاسك سكيديولر
-نقله بالايميل مسلا مرحبا غدا عندك محاضرة بعنوان كزا ولا ذلك

public function handle()
    {
        //$users = User::select('email')->get();
        $emails = User::pluck('email')->toArray();
        foreach($emails as $email){
            //How To Send Email In Laravel
        }
    }


-هلقيت ضل علينا خطوة الكيرنال نعملها ..نعطيه الاسم ..ونقله ينفذها بشكل يومى ..ديلى ..يعنى يومى

protected function schedule(Schedule $schedule)
    {
        // $schedule->command('inspire')->hourly();
        $schedule->command('user:expire')->everyMinute();
        $schedule->command('notify:email')->daily();
    }

-وهيك ضل علينا كيف نبعت الايميل بالمحتوى تبعه
-لازم يكون عنا الميل تراب وعاملين الو ربط بملف .env واحنا فاهمين الكلام هادى وعملناه من قبل

=================================================================================

    #042 - How To send daily Emails using Laravel task Sheduler part2

-الدرس الى فات عملنا ايفينت او تاسك سكيديولر وجبنا كل الايملات تبعت اليوزر الى متخزنين عنا بالداتا بيز ...هلقيت بدنا نعرف كيف نبعت اييميل بلارافيل لكل اليوزر هدول ونخلى الايفنت هاد الى عملناه هو الى ينادى على الايميل

-اول خطوة لازم نعملها ...انو نكتب الامر الى بيعمل عنا ايميل

php artisan make:mail NotifyEmail

-خلينا ننفذ الامر
C:\xampp\htdocs\Laravel_Course (master -> origin)
λ php artisan make:mail NotifyEmail
Mail created successfully

-هاد الامر عمل النا فولدر جديد داخل فولد app اسمه Mails وداخل فولدر الميل هاد
عمل النا فايل اسمه NotifyEmail.php

<?php

namespace App\Mail;

use Illuminate\Bus\Queueable;
use Illuminate\Contracts\Queue\ShouldQueue;
use Illuminate\Mail\Mailable;
use Illuminate\Queue\SerializesModels;

class NotifyEmail extends Mailable
{
    use Queueable, SerializesModels;

    /**
     * Create a new message instance.
     *
     * @return void
     */
    public function __construct()
    {
        //
    }

    /**
     * Build the message.
     *
     * @return $this
     */
    public function build()
    {
        return $this->view('view.name');
    }
}

-هاد الى انا بكتب فيه الكود تبعى ..بنادى عالفيو تبعتى الى بعمل فيها محتوى الايميل

-انا عشان ابعت ايميل ..لازم يكون عندى كنترولر والفيو تبعها
-هو هاد يعتبر الكنترولر تبعى اعتقد

-هلقيت خلينا نروح نعمل فيو للاييميل ..بس عشان نرتب شغلنا ونرتب البنية تعتنا
-بدى اعمل فولدر بالفيو ..اسمه Email اخليه للايميلات لانو انا ممكن
ابعت اكتر من ايميل ..مسلا ايميل للمشرف ايميل للطلاب ايميل للادارة وزى هيك

-رحت ع فولدر الفيوز ..وعلت فولدر اسمه emails وداخله فيو اسمه emailuser.blade.php
-اخدت محتوى صفحة الويلكم وحطيته فيه ..بس عشان اجرب عليه يعنى ...انت طبعا بكتبلى شكل ايميل فيها لما تشتغل صح
-هى محتوى الفيو

<div class="content">
    <div class="title m-b-md">
        <h1>Programing</h1>
    </div>

    <p>PHP</p>
</div>

-انو مسلا درس بكرة عنوانه برمجة ..وراح ناخد درس بى اتش بى مسلا يعنى ...هاد هيك هو شكل الايميل الى راح نبعته ع  ايميلات الطلاب يعنى

-طيب عملنا الفيو ..كيف بدنا ننادى عليها داخل كلاس NotifyEmail الى عملناه توى

public function build()
    {
        return $this->view('emails.mailuser');
    }


-هلقيت احنا عملنا الايميل والفيو تبعه ...نرجع هلقيت لل ايفينت الى عملناها الى وقفنا عندها الدرس الى فات
-هلقيت احنا بدنا ننادى على الايميل الى عملناه ..عن طريق الايفينت هادى ..عشان نبعته لكل اليوزر الى عنا او الطلاب

-الايفنت كانت هيك لسا ما كتبنا فيها اشى لما عملنا اللوب على ايملات الطلاب
public function handle()
    {
        //$users = User::select('email')->get();
        $emails = User::pluck('email')->toArray();
        foreach($emails as $email){
            //How To Send Email In Laravel
        }
    }

-هلقيت بدنا نقله نادى على الايميل الى عملناه عشان نبعته بشكل يومى زى ما قلنا

-ايش الميثود الى انا ببعت فيها الايميل بلارافيل اسمها
Mail::To() وخلى بالك لما بنادى عليها لازم تعمل تستدعى الكلاس تبعها فوق

-وبدنا نمرر فيها الايملات تبعتنا الى جبناها
Mail::To($email)

-طيب هلقيت بدنا نبعت الايميل هاد ..الى الكلاس تبعه ايش اسمه الى عملناه NotifyEmail بدنا ننادى عليه بالميثود الى اسمه send()
Mail::To($email)->send()

-طيب بدنا نعمل سيند لشو ...بدنا ناخد اوبجيكت من كلاس الايميل الى عملناه
-ايش يعنى بدنا ناخد منو اوبجيكت ..عشان استفاد من كل البيانات الى فيه ..اخدت منو اوبجيكت فاهم انت ايش يعنى ..يعنى اخدت الكلاس بالميثودات تيعته بالخصائص بكل اشى

Mail::To($email)->send(new NotifyEmail())

-احنا هيك اخدنا انستانس منو ..يعنى اخدنا اوبجيكت منو

-طيب لو انا بدى اباصى ..امرر بيانات من هنا عشان اعرضها هناك

-مسلا انا بدى امرر اريه ..فيها عنوان الايميل والمحتوى تبعه ..بدل ما ان كتبتهم بايدى بالفيو ...كتبتله Programming والبادى كتبتله php

-مسلا انا بدى اخليهم اوتوماتيك ..ما بدى اكتبهم بايدى ..عادى بمررهم من هان

$data = ['title'=>'Programing', 'body'=>'php']

-طيب انا هلقيت عملتها بمتغير اسمه داتا
-انا بدى اباصى الداتا هادى للفيو ...مش راح ينفع اباصيها من الايفنت للفيو بشكل مباشر

-لا انا من الايفنت بباصى للايميل ..وبعد هيك الايميل بباصى للفيو

-طيب ..انا اخدت من الكلاس ..اوبجكيت عنا ..انا بدى اباصى بالاوبجيكت مباشرة ..يعنى بباصى بالكنستراكت ..مفهومة

Mail::To($email)->send(new NotifyEmail($data))

-صارت عنا هيك
public function handle()
    {
        //$users = User::select('email')->get();
        $emails = User::pluck('email')->toArray();
        $data = ['title' => 'Programing', 'body' => 'php'];
        foreach($emails as $email){

            //How To Send Email In Laravel

            Mail::To($email)->send(new NotifyEmail($data));

        }
    }

-طيب انا هلقيت باصيتها ...كيف بدى استقبلها بكلاس الايميل
-بستقبلها بالكنستراكت
-كان هيك
public function __construct()
    {
        //
    }

-بدو يصير هيك
public function __construct($data)
    {
        //
    }

-خلى بالك انا بشتغل هلقيت بكلاس الايميل NotifyEmail

-طيب مررنا الداتا بالميثود الكونستراكت ..كيف بدى امررها للفيو هلقيت

-بدنا نروح نحطها بمتغير ..بدى اروح اعمل بروبيرتى اسمها مسلا $details
-واقله انو الديتيلز هادى ...بتساوى الداتا الى عندى

public $details = ''; //array ['title' => 'Programing', 'body' => 'php']

public function __construct($data)
    {
        $this->details  = $data;
    }

-يعنى الديتيلز هادى ...بدى تساويها بالداتا الى جاية الى من برا ..جاية الى من وين
جاية الى من الايفنت النوتيفاى الى انا باصيتها

-وخلى بالك الديتيلز هادى ..عبارة عن اريه صارت هلقيت ...لانو الداتا الى انا باصيتها عبارة عن اريه اسوسيتف ..كى وفاليو

-طيب هلقيت كيف بدنا نباصى الديتيلز هادى للفيو ...احنا عارفين الطرق كيف الى بنباصى فيها للفيو ..اما عن طريق with() او عن طريق compact() او او او

public function build()
    {
        return $this->view('emails.mailuser', compact('details'));
    }


-هلقيت بدنا نروح على الفيو ..ونخليها بدل ستاتيك نخليها اوتوماتيك من الحاجات الى انا راح استقبلها

-يعنى بدل ما كانت هيك
<div class="content">
    <div class="title m-b-md">
        <h1>Programing</h1>
    </div>

    <p>PHP</p>
</div>

-بدها تصير هيك
<div class="content">
    <div class="title m-b-md">
        <h1> {{ $details['title'] }} </h1>
    </div>

    <p> {{ $details['body'] }} </p>
</div>

-انا هيك خلصت ..عرفنا كيف نعمل الايفينت وكيف نمرر فيها بيانات ..وكيف نمرر البيانات للايميل ..وكيف الايميل يمررهم للفيو
-طيب هل ينفع انادى على الايميل من راوت ..بدل ما انادى عليه من ايفينت لسنر زى ما عملنا
-اه عادى بناخد الكود كله الى كتبناه بميثود الهاندل ..وبنكتبه براوت برا ..او بكنترولر لو انت مش عايز تنادى عليه بايفنت ليزر ويبعتلك اياه كل 24 ساعة  ...يعنى انت تبعته بايدك

-طيب نيجى نجرب شغلنا هللقيت ...احنا طبعا عاملين شغل الميل تراب وربطناه ..
بنجرب عالميل تراب ..لانو احنا ما عنا سى بانيل نبعت منها ايميلات للناس

-احنا استخدمنا الميل تراب ..وحطينا فيه ايميلى القديم عشان نبعت منو

-هلقيت بدنا نعمل رن ..للامر تبع السكيديوال الى عنا ...وحيكنا لو انا عندى اكتر من سكيديولر ...هيو بيعنل رن لكل السكيديوال الى عنا
 php artisan schedule:run

-خلينا ننفذ الامر
C:\xampp\htdocs\Laravel_Course (master -> origin)
λ  php artisan schedule:run
Running scheduled command: "C:\xampp\php\php.exe" "artisan" user:expire > "NUL" 2>&1

-ازا بتلاحظ هو هان عملى رن للسكيديوال هاد بس  user:expire الى هو القديم
-ما عملى رن للجديد الى ان شغال عليه...يبقى فى عنا اشى غلط

-بعد معاناة طويلة اكتشفت انو الامر ما بيشتغل الا على everyMinute();
مش راضى يقبل ولا واحدة غيرها

-صار عندى الكيرنال هيك
protected function schedule(Schedule $schedule)
    {
        // $schedule->command('inspire')->hourly();
        $schedule->command('user:expire')->everyMinute();
        $schedule->command('notify:email')->everyMinute();
    }

-لما نفذت الامر زبط عمل رن عالاتنين

C:\xampp\htdocs\Laravel_Course (master -> origin)
λ  php artisan schedule:run
Running scheduled command: "C:\xampp\php\php.exe" "artisan" user:expire > "NUL" 2>&1
Running scheduled command: "C:\xampp\php\php.exe" "artisan" notify:email > "NUL" 2>&1

-واكتشفت كمان انو عادى ممكن ما اكتب اسم الكلاس
protected $commands = [
        // Expiration::class,
        // Notify::class,
    ];

-وقفتهم واشتغل معى عادى الامر ...وكان تصلنى ايميلات

-اكتشفت كمان انو الامر بيشتغل معى لما اعمل الكيرنال ع دقيقتين برضو
protected function schedule(Schedule $schedule)
    {
        // $schedule->command('inspire')->hourly();
        $schedule->command('user:expire')->everyTwoMinutes();
        $schedule->command('notify:email')->everyTwoMinutes();
    }

-برضو خليت الاول دقيقة ولاتانى دقيقتين اشتغل
protected function schedule(Schedule $schedule)
    {
        // $schedule->command('inspire')->hourly();
        $schedule->command('user:expire')->everyMinute();
        $schedule->command('notify:email')->everyTwoMinutes();
    }

-اشتغل ع 5 دقايق برضو
protected function schedule(Schedule $schedule)
    {
        // $schedule->command('inspire')->hourly();
        $schedule->command('user:expire')->everyFiveMinutes();
        $schedule->command('notify:email')->everyFiveMinutes();
    }

-بس لل5 دقايق بشغلى ...جربت ال10 دقايق وفووق ما زبط
-بقلى هيك
C:\xampp\htdocs\Laravel_Course (master -> origin)
λ php artisan schedule:run
No scheduled commands are ready to run.

================================================================================

   #043 - What Is Laravel Eloquent / ORM - شرح الموديل والعلاقات بلارافل

-من هنا بدا الجد ...راح نبدا بالتعامل مع الداتا بيز

Laravel Eloquent : عبارة عن وسيلة لارافيل عملتها ..لتسهيل وتبسيط وسهولة التعامل مع الداتا بيز والجداول تبعتها

-زمان كنا نكتب جملة كويرى كبيرة عشان نصل للى بدنا اياه

-هلقيت بلارفيل اليكوينت والموددل ..صار الموضوع سهل ..يعنى لو جبت اى شخص
مش ديفيلوبر ..وخليته يقرا الكويرى تعتنا تعت اللارافيل راح يقراها ويفهمها بسهولة

Model : يكافئ جدول بالداتا بيز ...يعنى احنا راح نتعامل مع الجدول الى بالدتا بيز
عن طريق المودل تبعه الى عنا

-طريقة تسمية المودل

-فى طريقة معينة ستاندرد انو تمشى عليها ..عشان لارافيل تفهم عليه
مش لازم انت تسمى هيك ...ولكن هاد المتعارف عليه والستاندرد

-اول حرف بالمودل لازم يكون كابيل ..واسم المودل بدون s
-ولما تعمله بالداتا بيز بتعمله بs

-مسلا المودل بدنا نسميه User الجدول تبعه لازم نسميه users
-بدنا نعمل مودل Offer جدوله بكون offers
-بدنا نعمل مودل اسمه Doctor جدوله بكون doctors

-لانو لارافيل لما بتروح بتقرا من الداتا بيز ..بتاخد اسم المودل ..ويتضيف عليه حرف الاس

-طيب انا لو ما كتبت بالطريقة هادى ..هل لارافيل مش راح تقرا الجدول ...اه مش راح تقراه ...ولكن عنا طريقة ازا كتبت بغير الشكل هاد ..فى طريقة تعملها تخليها تقراه

-لانو هو لارفيل زى ما حكينا ..اى جملة ابديت ولا انسيرت انت بتعملها داخل المودل هاد ..هو بروح بياخد اسم المودل وبضيف عليه حرف الاس ..عشان يروح عالجدول تبعه
-لو ما لقته ..بتقلك انو الجدول مش موجود
-ولكن عنا طريقة انو لو سمينا المودل باسم والجدول باسم نخليه لارافيل تقراه عادى ..بنعطيه اسم الجدول جوا المودل وهيك بنربط الاتنين ببعض ...مسلا انو اسمى المودل يوزر والجدول ميمبر مسلا يعنى ..عادى بنقدر نربطهم ونخلي لارافيل تقرا منو عادى


-طيب لما ننشا مودل ...لارافيل بتنشاء داخل فولدر app مباشرة ...بتخليه مرمى برا

-زى مودل ال User تبع اللوق ان والريجيستر ....طيب احنا عشان نرتب شغلنا
بنعمل فولدر بنسميه مسلا Models وبنحط فيه المودل تبعتنا كلها ...وبس بنغير النيم سبيس تبعته بدل ما تكون app بتصير app/Models مسلا

-لانو انا لو بدى اعمل 50 جدول مسلا ...لازم يكون الهم 50 مودل عنا ..مش منطقى نخليهم مرميين برا بفولدر الاب


================================================================================

      #044 - what is laravel Model and how to use - شرح المودل بلارافل

-بدنا نبدا نشرح حاجات ادفانسد ..اكتر الناس ما بنعملها ...هلقيت بدنا نبدا نشوح بالطريقتين ...بالرطيقة العاادية الى الناس بتعملها ..والطريقة الادفانسد الى لازم احنا نعملها عشان نكون محترفين ...ابتداء من الدرس هاد

-بدنا نتعلم كيف ننشا المودل ..وكيف نعمل المايقريشن تبعه
-المايقريشن الى هو الجدول ...بدل ما نعمل الجدول بايدنا باالداتا بيز ..ممكن اكتبه بالمايقريشن ...ولكن لقدام راح نحكى كيف نعمله يعنى ..عادى سواء عملت الجدول عنا بفولدر المايقرسيشن ..او انشاته بايدته الداتا بيز كل واحد

-انا انا بعمل المايقريشن ..بعدين بروح بعمل الو رن ..بروح لحالى بيعملى الجدول بالداتا بيز

-وهادى فايديتها ..انو انت مسلا بدك تعطى المشروع لصاحبك ...بدل ما تبعتله الداتا بيز تعتك ويعمللها ايبمورت ....خلص بكون عندو ملف المايقريشن ..هو بس بيعملو رن ..بروح بينشا الو كل الجداول الى بالداتا بيز الى كانت عندك ..هى هاى فايديتها

-احنا مبدئا راح نتعلم كيف نعمل المودل ..وحيكنا وين بيزل باى دبفولت ..وحكينا انو الطريقة الاحترافية انو نحط المودل تعتنا كلهم بفولدر واحد ..والمايقريشن لبعدين ..هلقين بدنا نعمل الجداول تعتنا بايدنا

-الامر تبعنا عشان نعمل مودل
php artisan make:model Offer

-بنعطيه اسم المودل الى بدنا نعمله

-خلينا ننفذ الامر

C:\xampp\htdocs\Laravel_Course (master -> origin)
λ php artisan make:model Offer
Model created successfully.

-هيك عملنا مودل اسمه Offer نزل معنا داخل فولدر app مباشرة

<?php

namespace App;

use Illuminate\Database\Eloquent\Model;

class Offer extends Model
{
    //
}

-لاحظ النيم سبيس namespace App;

-طيب احنا هلقيت عشان ما يضل برا ..بدنا نرتب شغلنا ..نشتغل بطريقة احترافية بدنا نعمل فولدر اسمه Models وننقل المودل الاوفر هاد داخله
-بالتالى انا راح اغير النيم سبيس تبعته لما انقله
-نقلته ..وغيرت النيم سبيس تعته صارت
namespace App\Models;

-بالنسبة لمودل User مش راح انقله هلقيت ..لانو هاد مرتبط بالريجستر ..يعنى المفروض لما انقله اغير باللوق ان والريجيستر وكل الكلام هاد ..لقدام بنفهم كيف ننقله ونغير اكواد الملفات الى مرتبطة فيه

-طيب المودل هاد ..حكينا لازم يكون بكافئ جدول بالداتا بيز ..خلينا نروح عالداتا بيز ونعمل الجدول ونسميه offers زى ما حكينا بالتسمية

-جدول عادى بالداا بيز تعتنا الى بنشتغل عليه ..بدنا نعمل فيه id - name - price

-عملنا الجدول ...هلقيت باى ديفولت المودل الى عنا Offer شاف الجدول الى عملنا offers

-طيب فرضا احنا سمينا الجدول باسم تانى ..غير الاسم هاد المتعارف عليه
مسلا كتب اسم الجدول my_offer او my_item مسلا يعنى

-هان مش راح يشوفه باى ديفولت ..لا لازم احنا نتدخل ونكتب شغلة عشان نخليه يشوف الجدول

-ايش بدنا نعمل عشان نخليه يشوفه ويتعمل معو

-بنروح عالمودل وبنكتب كى ...هاد ورد لارافيل عاملاه اسمه $table وبنقله
protected $table = "my_offer"

-وعادى لو احنا مسمينه بالطريقة الستاندرد نكتبله اياه هيك برضو ..ولكن هاى الطريقة حكينا لما يكون اسم الجدول مش زى اسم المودل ..ولكن لو الاسمين برضو بنفس الطريقة الصح ..عادى لو بدك تكتبله اسم التيبول برضو فش مشكلة
-بدو يصر المودل هيك

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Model;

class Offer extends Model
{
    protected $table = "offers";
}

================================================================================

    #045 - advanced in Laravel Models&different between fillables and hiddens

- بدنا نتكلم بحاجتين فى الاساسيات  ..مهمين جدا برضو fillables and hiddens

-ركز منيح فيهم ..لانهم مهمين ومن الاسس الى لازم تتاسس فيهم صح

-الفيلبر والهيدن بياخدو اريه
class Offer extends Model
{
    protected $table = "offers";

    protected $fillable = [];
    protected $hidden = [];
}

-شو الاريه هدول بكون فيهم ..الفيلبل هى الحاجات المسموح فيها ..بنسميها وايد بكس

-اى حاجة بحطها بالفيلبل ..هى الى اقدر اخزن فيها بالداتا بيز بس ..واتعامل معها بالانسيرت والابديت وغيره

-مسلا انا عندى id - name - price - image

-انا حطيت بالفيلبل
protected $fillable = ['id', 'name', 'image'];

-انا ما حطيت السعر ..مهما ادخل السعر معى مع جمل الانسيرت وغيرها ..مش راح يدخل السعر معى عالداتا بيز ..راح يحط قيمته نل ..لانو هو هان مش شايفه خلص

-حتى لو كان محطوط بالفيلبل ..وانا برضو حاطه بالهيدن ..برضو مش راح يشوفه

-يعنى اى حاجة ما بحطها بالفيلبل ..مش راح يخزنها بالداتا بيز ..حتى لو باصينا الها قيمة

-شو هى الهيدن ...ولنفترض انو عنا عامودين التايم ستامب هدول لارافيل بتحطهم باى ديفولت ..ازا كنت تشوفهم بمودل اليوزر ازا لاحظت عليهم

-الى هما الوقت الى انتشا فيه والوقت الى تعدل فيه وكل مودل غالبا بنحطله العمودين هدول created_at    updated_at  حطيتهم عندى بجدول الاوفر هينى

-بعطيهم النوع تبعهم timestamp وبععملهم null بعلم عليها
يعنى ممكن ادخلهم وممكن لا ..انو يحطلى مكانهم نل يعنى

-انا ممكن عندى بالمودل احطهم بالفيلبل عشان ينضافو معى
protected $fillable = ['id', 'name', 'image', 'created_at', 'updated_at'];

-طيب لو انا حطيتهم بالهيدن كمان
protected $fillable = ['id', 'name', 'image', 'created_at', 'updated_at'];
protected $hidden = ['created_at', 'updated_at'];

-هيك انا لا اعمل اى جملة سيليكت ..حتى لو حكتله مسلا يعنى ..لو حكتله سيليكت النجمة يعنى كل اشى ...برضو مش راح يجيبلى اياهم لانو انا حطيتهم بالهيدن

-يعنى هادى الطريقة ..مسلا لو انا حابب اخفى عمود معين عشان ما يرجعلى بتطبقات الجوال مسلا ..والكلام هاد كله

-خلينا نروح نشوف مثال عملى ...ولكن ما تهتم كيف عملنا الانسيرت والابديت لسا راح نشرحهم الدروس الجاية

-بدنا نروح ندخل يدوى من الداتا بيز ..بدى ادخل عرضين

id  name  price      image                created_at    updated_at

1   offer1  300   dffd4454525.png  2021-08-16 17:16:05  2021-08-16 17:16:05

2   offer2  250   sde5484545.png   2021-08-16 17:16:05  2021-08-16 17:16:05

-هى العرضين الى دخلتهم ..بايدى اى كلام يعنى

-والمودل عندى هيك
class Offer extends Model
{
    protected $table = "offers";

    protected $fillable = ['name', 'price', 'image', 'created_at', 'updated_at'];

    protected $hidden = ['created_at', 'updated_at'];
}


-طيب هلقيت عشان نعمل جملة ابديت ..لازم نعمل راوت وكنترولر عشان اصل للفيو ..صح
-انا هان ما بدى اصل للفيو ..لانو بدى ارجع بيانات وخلص ..مش محتاج اعمل فيو وفيها فورم ومن هالكلام

-بدى اعمل كنترولر جديد اسميه مسلا CrudControllr
-Crud يعنى انسيرت ابديت ديليت ع فكرة


C:\xampp\htdocs\Laravel_Course (master -> origin)
λ php artisan make:controller CrudController
Controller created successfully.

-الكنترولر تبعنا الى عملناه
<?php

namespace App\Http\Controllers;

use Illuminate\Http\Request;

class CrudController extends Controller
{
    //
}

-خلينا نعمل فيها ميثود باى اسم ..نسميها مسلا getOffers()
-ونعمل فيها جملة سيليكت عالعروض الى عنا ..واحنا حكينا احنا ما بنتعامل مع الجدول
-احنا بنتعامل مع المودل تبعه خلى بالك

-يعنى بدنا نكتب اسم المودل ..واول ما اكتب اسم المودل لازم يعملى الو ايمبورت فوق الى هو موجود حكينا فى app\Models

Offer::get(); قيت يعنى هاتلى كل العروض الى عندك بكل الاعمدة تبعتها بكل اشى

-ونقله ريتيرن الها ..مش راح نعمل فيو ولا اشى بدنا نعمللهم ريتيرن وخلص عشان نشوف الفكرة

-صار عنا الكنترولر هيك
<?php

namespace App\Http\Controllers;

use App\Models\Offer;
use Illuminate\Http\Request;

class CrudController extends Controller
{
    public function getOffers(){
        return Offer::get();
    }
}

-خلينا نروح ع ملف الويب نعمللها روات
Route::get('fillable', 'CrudController@getOffers');

-روح زور الروات http://127.0.0.1:8000/fillable

-لاحظ شو رجعلى
[{"id":1,"name":"offer1","price":"200","image":"dffd4454525.png"},{"id":2,"name":"offer2","price":"250","image":"sde5484545.png"}]

-رجعلى كل اشى ما عدا العمودين الى خفيتهم بالهيدن مع انى انا حاكيله get()
يعنى هاتلى كل اشى

-طيب لو خفينا الصورة بالهيدن
protected $fillable = ['name', 'price', 'image', 'created_at', 'updated_at'];
protected $hidden = ['created_at', 'updated_at', 'image'];

-ما رجعلى اياها خلص ..لانو اخفيتها
[{"id":1,"name":"offer1","price":"200"},{"id":2,"name":"offer2","price":"250"}]

-طيب نخفى السعر
protected $fillable = ['name', 'price', 'image', 'created_at', 'updated_at'];
protected $hidden = ['created_at', 'updated_at', 'image', 'price'];

-ما رجعلى السعر خلص
[{"id":1,"name":"offer1"},{"id":2,"name":"offer2"}]

-يعنى الفيلبل ..هو الى انا بكتر اعمل انسيرت وابديت وديليت فيه
-الهيدن ..هو الى بخفيه من الريسبونس  وهو راجع الى

-اى حاجة بتحطها بالهيدن ..راح تختفى من كل مكان انت بتكتب فيه كود بالمشروع تبعك خلى بالك

-طيب لو انا بدى اخفى الصورة او السعر مسلا ..بمكان ..وبمكان لا
مسلا بدى اخفيها من ميثود معينة ..واظهرها فى باقى المشروع
-هان عاد ما بحطها بالهيدن ..لانو حكينا الهيدن بتخفيها تماما من اى جملة داتا بيز انا بعملها

-طيب لو انا عايز اخفيها من ميثود معينة شو بعمل ..بروح بالميثود بقله يعمل سيليكت عالاشياء الى انا بدى اياها بس

-يعنى مسلا ..نرجع المودل زى الاول
protected $fillable = ['name', 'price', 'image', 'created_at', 'updated_at'];
protected $hidden = ['created_at', 'updated_at'];

-انا هيك ما خفيت ولا اشى الى الوقت يعنى

-طيب لو انا بدى يرجعلى الاسم والسعر بس ..ما بدى الصورة ترجعلى بس بالميثود هادى
-هان بروح بعمل سيليكت عالاشياء الى بدى اياها
class CrudController extends Controller
{
    public function getOffers(){
        return Offer::select('id', 'name', 'price') -> get();
    }
}

-هيك برجعلى بس الى انا اخترتهم بدون الصورة
[{"id":1,"name":"offer1","price":"200"},{"id":2,"name":"offer2","price":"250"}]

-لكن لو فيه ميثود تانية عاملة قيت يعنى ع كل اشى ..راح ترجعلى الصورة معهم

-اخر معلومة ...ما حكاها المهندس ..انا اكتشفت انو لو ما عملت الفيلبل ..عادى برجعلى كل اشى ..بدون ما اعمله فيلبل
-يعنى انا مسحت الفيلبل وخليت بس الهيدن ...واشتغل كل الشغل الى عملته قبل عادى بدون مشاكل

class Offer extends Model
{
    protected $table = "offers";
    protected $hidden = ['created_at', 'updated_at'];
}

=================================================================================

 #046 - Laravel how to insert to database basic example - ادخال وتحديث الببانات

- insert / create to DB

-بدنا نعمل تعديل بسيك بالجدول ..نحذف كولون image وبدنا نحط كولون جديد اسمه
details عشان يكون عنا العرض والسعر والتفاصيل تعته يعنى

-وحكينا طالما ضفنا كولون جديد بالجدول ..لازم نروح نضيفه بالمودل عنا
protected $fillable = ['name', 'price', 'details', 'created_at', 'updated_at'];
protected $hidden = ['created_at', 'updated_at'];

-عشان ينشاف معنا يعنى ..لارافيل تشوفه ...مسحنا الصورة وضفنا التفاصيل بالفيلبل

-وان ما نحط بالفيلبل ..مش راح يتعامل معو لا بالابديت ولا باى حاجة
-ولكن ان احكيت فوق انو انا عشان لارافيل 7 يمكن ..عادى ما كنت اكتبله الفيلبل وكان يشتغل معى عادى

-نرجع للدرس ..بدنا نتعلم كيف نعمل انسيرت وكريت
الكريت هى نفسها الاد الى كنا نعملها ايام الزيرو اعتقد ..نعمل اد لاعلان بعدين نبعته لرابط الانسيرت ..ورابط الانسيرت يخزنه بالداتا بيز هيك كنا نعمل بمشروعنا ايام الزيرو بالبى اتش بى البيور

-بدنا نروح ع كنترولر الكرواد الى عملنا ..ونعل فيه فنكشن بسيطة ..تخزن النا حاجات ستاتيك بالداتا بيز
-نسميها مسلا store راح تاخد منا حاجات ستاتيك هلقيت ..مش راح نحط حاجات متقدمة

-طيب شو هى الميثود الى احنا بنعمل فيها انسيرت عن طريق المودل ..اسمها create()
-بتاخد منا اسوسيتف اريه ...الكى هو العامود الى باداتا بيز ..الفاليو هى القيمة الى بدنا ندخلها ..بدنا حاليا نعطيه قيمة ستاتيك ...والدرس الجاى نخليه ياخد القيم من الفورم لما اعمل فورم وفيو

public function store(){
        Offer::create([
            'name'    => 'offer3',
            'price'   => '450',
            'details' => 'very chep'
        ]);
    }

-اعملنا الميثود تبعتنا ...طيب كيف بدى انادى عليها انا هلقيت..اكيد من الراوت

-بدنا نروح نعمل روت قروب ..عشان راح نستخدم رواتات كتيرة بالدروس الجاية ..بدنا نخليهم كلهم بنفس القروب ونعطيهم بريفكس معينة .عشانهم بدرس واحد يعنى

-عملنا الروات تبعنا
Route::group(['prefix' => 'offers'], function() {

    Route::get('store', 'CrudController@store');

});

-هلقيت روح زور الروابط الى عملناه ..لاحظ انو الداتا بيز فيها بس عرضين ..اول ما تزور الروات http://127.0.0.1:8000/offers/store راح تلاقيه ضاف العرض الى عمللناله
انسيرت

3  offer3  450  very chep  2021-08-16 15:26:07  2021-08-16 15:26:07

================

-طيب جربت انا امسه الفيلبل الى انا حاططهم عشان اشوف بدو يدخل الى ولا لا
protected $table = "offers";

    // protected $fillable = ['name', 'price', 'details', 'created_at', 'updated_at'];
    protected $hidden = ['created_at', 'updated_at'];

-رحت ضفت عرض جديد
Offer::create([
            'name'    => 'offer4',
            'price'   => '550',
            'details' => 'very uesablity'
        ]);

-لما زرت الروات طلعلى ايرور
Illuminate\Database\Eloquent\MassAssignmentException
Add [name] to fillable property to allow mass assignment on [App\Models\Offer].

-بقلى ضيف name للفيلبل عشان اشوفه

-طيب رحت رجعت الفيلبل ..بس ما حطيت فيها التفاصيل ..ورحت ازور الرابط كمان مرة
{
    protected $table = "offers";

    protected $fillable = ['name', 'price', 'created_at', 'updated_at'];
    protected $hidden = ['created_at', 'updated_at'];
}

-برضو طلعلى ايرور بقلى انا مش شايف details
SQLSTATE[HY000]: General error: 1364 Field 'details' doesn't have a default value (SQL: insert into `offers` (`name`, `price`, `updated_at`, `created_at`) values (offer4, 550, 2021-08-16 15:32:32, 2021-08-16 15:32:32))

-رحت رجعت الفيلبل كلو زى ما كان
-وضاف معى زى الفل ---يبقى كلام المهندس صح ..اى كولون بحطه جديد بالجدول لازم اضيفه بالمودل عنا بالفيلبل ..عشان يقدر يقراه


-طيب اخر حاجة عنا ..انا مسلا بدى اضيف بس الاسم والسعر زى هيك
public function store(){
        Offer::create([
            'name'    => 'offer5',
            'price'   => '540',

        ]);

-رحت عالروات احدثه عشان يضيف الاوفر الجديد ..برضو طلعلى نفس الخطا انو بدى التفاصيل وينها
SQLSTATE[HY000]: General error: 1364 Field 'details' doesn't have a default value (SQL: insert into `offers` (`name`, `price`, `updated_at`, `created_at`) values (offer4, 550, 2021-08-16 15:32:32, 2021-08-16 15:32:32))

-عشان انا مش عامل عامود التفاصيل بالجدول ..يقبل نل ..بالتالى اجبارى لازم اعطيه اياه ...انا رحت عالداتا بيز ..وعدلت عمود التفاصيل خليته يقبل نل
-لما رحت حدثته الروات ..عادى دخلى المنتج 5 وحط مكان التفاصيل null

- اخر معلومة بالدرس ...انا دخلت الاسم والسعر والتفاصيل ..طيب بالداتا بيز
لقيته مدخل الوقت ووقت التعديل مع انى ما دخلتهم

3  offer3  450  very chep  2021-08-16 15:26:07  2021-08-16 15:26:07

-هان لارافيل باى ديفولت ..اى مودل بلارافيل لازم باى ديفولت يدخل فيه created_at و
updated_at

-طيب لو انا ما بدى اياه يدخلى اياهم ..بدى ازا ما دخلتهم خلص تكون قيمتهم نل
او مش عايز اعمل الحقلين هدول بكل الجداول تبعتى ..الشغلة مش اجبارى

-لو مش عايز لارفيل مودل تضيفهم باى ديفولت اعطيهم القيمة فولس
هما باى ديفولت القيمة true ولما تكون ترو ما بنكتبها
-ولكن لو بدك اياها فولس ..بتعطيه اياها قلو فولس

-بما انو المودل هو الى بيتحكم بكل حاجة لو انا بدى اعمل اى عملية بالجدول ..الى بيتحكم فيه بكل حاجة حكينا المودل ..يبقى بدى اروح عالمودل واقله
    public $timestamps = false;

-$timestam برضو هاى بروبيرتز جاهزة من لارافيل زيها زى التيبول والفيلبول والهيدن
بنعطيها القيمة فولس ...اعملها بابليك بروتيكتك الى بدك اياه عادى

-صار المودل هيك
class Offer extends Model
{
    protected $table = "offers";
    protected $fillable = ['name', 'price', 'details', 'created_at', 'updated_at'];
    protected $hidden = ['created_at', 'updated_at'];
        public $timestamps = false;

}

-هلقيت روح اعمل انسيرت ل عرض6 مسلا راح تلاقيه دخل بدون التواريخ
public function store(){
        Offer::create([
            'name'    => 'offer6',
            'price'   => '520',

        ]);
    }

-هيك عرض6 راح يدخل بس الاسم والسعر ..التفاصيل والتواريخ راح تكون نل

6   offer6  520  Null Null Null

-الدرس الجاى بدنا نعمل الانسيرت من فورم ...بدل ما ندخل بايدنا

=================================================================================

         #047 - Laravel insert to database using bootstrap form

-بدنا ندخل بيانات عالداتا بيز عن طريق فورم ...بدنا ناخد فورم جاهزة من البوترستراب ونشتغل عليها ....وبدنا نستدعى رابط
سى دى ان نحطه عشان نفعل البوتستراب

-وبدنا نتعلم كيف نتعامل مع الريقويست الى عنا

-اول حاجة لازم يكون عندى فيو وفيه الفورم الى بدنا نشتغل عليها ..ويكون عنا راوت يبعت عالفيو هادى

-نروح نعمل الروات
Route::group(['prefix' => 'offers'], function() {

    Route::get('store', 'CrudController@store');

    Route::get('create', 'CrudController@create');

});

-سمينا الميثود create نروح عالكنترولر الى بنشتغل فيه ونعمل فيه هادى الميثود

public function create(){
        return view('offers/create');
    }

-مش ارح تعمل حاجة الا انها تعمل ريتورن للفيو الى بدنا نعملها

-نروح نعمل الفيو ...خلينا نعمل فولدر بالفيو عشان نرتب شغلنا ..بدنا نحط فيه الفيوز تبعت الاوفر ..خلص يبقى نسميه offers مسلا
-عملت داخل فيو سميتها creat.blade.php  اى اسم عادى سميها
اختصارا للوقت اخدت برضو صفحة الويلكم وبدنا نعدل عليها المحتوى تبعها
<div class="content">
    <div class="title m-b-md">
        Add Your Offer
    </div>
</div>

-مبدئيا حطينا فيها العنوان ..عشان هلقيت اضيف عليها الفورم
-بدى اروح ع موقع البوتستراب واجيب منو الفورم جاهزة ونعدل عليها
-وناخد منو السى اس اس والجيكويرى تبعينه ك سى دى ان يعنى عشان تشتغل معى وتعملى تنسيقاتها

-اول حاجة طالما الفورم تبعتى بدها تبعتلى بياناتا عشان اخزنها بالداتا بيز يبقى الميثود تبعها بوست

<form method="POST">

    @csrf

    <div class="form-group">
        <label for="offername">Offer Name</label>
        <input type="text" class="form-control" name="name" id="offername" placeholder="Type Offer Name">
    </div>

    <div class="form-group">
        <label for="offerprice">Offer Price</label>
        <input type="text" class="form-control" name="price" id="offerprice" placeholder="Type Offer Price">
    </div>

    <div class="form-group">
        <label for="offerdetails">Offer Details</label>
        <input type="text" class="form-control" name="details" id="offerdetails" placeholder="Type Offer Details">
    </div>

    <button type="submit" class="btn btn-default">send</button>

</form>

-عملنا فيها 3 حقول للاسم والسعر والتفاصيل
-واستدعيت طبعا البوتستراب عندى زى ما حكينا

-اهم حاجة بالفورم ال name تبع الحقل لازم يكون نفس اسم العمود بالداتا بيز خلى بالك

-وحطينا اى فورم من نوع بوست بنعملها ..لازم نبعت معها @csrf بلارافيل حكينا
-الى هو بيبعت معى توكين عشان الاختراقات
-لما كتبت @csrf كانى بالزبط حكتله
      <input name="_token" value="{{ csrf_token() }}">

-طيب هلقيت الراوت الى احنا حطيناه ..راح ينادى عالفيو هادى الى فيها الفورم
-طيب الفورم هادى عشان تبعت الداتا تبعتها ..ماش لازم تحط الداتا تبعتها بريقويست وتبعته ل روات
-طيب خلينا نعمل الروات الى راح ياخد منى هادى الداتا ويحطها بالداتا بيز
-وحكينا انو اى راوت بينعمل ..لازم يعمل تشيك عالفورم ع حاجة اسمها csrf طالما جايينى فورم بوست ..وهادى غصب عنك لارافيل عاملها ميدل وير ..عشان هيك احنا حطينا @csrf بالفورم عشان لما نبعتها الروات راح يشيك عليه او حاجة

-خلينى نعمل الروات نسميه مسلا store ونسمى الميثود store برضو
-هادى الميثود الى راح تعمل حفظ للبياانات بالداتا بيز ..تدخلهم عالداتا بيز يعنى
الروات هاد خلى بالك نوعه بدو يكون post لانو بيتعامل مع فورم بوست
هاد بدو يحط بيانات بالداتا بيز

Route::group(['prefix' => 'offers'], function() {

    //Route::get('store', 'CrudController@store');

    Route::get('create', 'CrudController@create');
    Route::post('store', 'CrudController@store');

});

-ستور الاولى ..هادى تبعت الدرس الى فات لما كنا ندخل ستاتيك ..خلص وقفتها بدناش اياها ..بس عشان وانت بتراجع بالدورة تشوفها لو بدك

-طيب هلقيت ..طالما عملنا الروات ...نروح نعمل الاكشن تبع الفورم انو تبعتنى عالروات هاد الى عملته

         <form method="POST"  action="{{ url('offers\store')}}">

-او ممكن نعملها بطريقة name route نسمى الروات ونعطيها الاسم زى ما تعلمنا
-خلينى اروح اسمى الروات اى اسم ..مسلا اسميه offers.store

    Route::post('store', 'CrudController@store')->name('offers.store');

-هلقيت بالفورم بكتبه بالطريقة هادى طريقة الراوت
        <form method="POST"  action="{{ route('offers.store')}}">



-طيب الروات هاد الى بالفورم ..المفروض يكون اخد البيانات هادى ..وراح دخل عالميثود الى اسمها ستور ...الموجود بالكنترولر ويعمل عليها شوية عمليات
-زى الفاليديشن مسلا الى لسا ما تكلمنا فيه ..وكيف نعمل رسائل الخطا

-هلقيت خلينا نروح نعمل الميثود جوا الكنترولر
public function store(){

    }

-اول حاجة عشان اخد البيانات الى فيها ..احنا حكينا انو الفورم هادى راح تروح بريقويست ..الكلاس الى بجيبلنا الريقويست اسمه Request وبناخد منو متغير خلينا نسميه مسلا $request اى اسم انت عايزه

صارت هيك
public function store(Request $request){

    }

-خلى بالك لما استخدمت كلاس الريقويست ..عمل الو يوز فوق
use Illuminate\Http\Request;

-طيب ايش هلقيت بدنا نعمل بالميثود ...بدنا نعمل ريتيرن للداتا الى اجتنى بس عشان اشوفها هلقيت

public function store(Request $request){

        return $request;

    }

-انا هلقيت رحت دخلت عالروات هاد
http://127.0.0.1:8000/offers/create

-طلعلتى الفورم ..دخلت فيها
الاسم : A12 Samsung
السعر : 1200
التفاصيل : very faster

-هلقيت خلينا نعمل send راح يبعتنى عالروات هاد
http://127.0.0.1:8000/offers/store

-عرضلى البيانات الى اجتلى بالريقويست الى عملتلها ريتورن
{"_token":"gdGcYtkn0UB1NItNjiTMNe3AJnWzmwPs0KNwmGid","name":"A12 Samsung","price":"1200","details":"very faster"}

-وصلنى بالريقويست ..التوكن والاسم والسعر والتفاصيل

-حلو جدا ...هلقيت بدنا عاد نتعلم كيف نحطهم بالداتا بيز
وقبل ما نحطهم نعمل فالديت عليهم ...ولو في ايرور ..كيف نطلع رسايل الايرور لليوزر
وبعدين نتعلم كيف نطلعلو كل رسالة ايررور فالديت تحت الحقل تبعها

-طيب نرجع لميثود الستور هلقيت خلص عرفنا كيف البيانات بترجعى ع طريق ريقويست وشفتها كيف

-هلقيت اول حاجة بدنا نعملها بميثود الستور ..نعمل فالديت للداتا
-مسلا اقله الاسم ما يتجاوز ال20 حرف ..ويكون فريد من نوعه ..السعر مسا يكون ارفام فقط وهكذا ...الفالديت الى كنا نعمله ززمان...عشان ما حد يتهابل ويكتبلى سكريبت بالحقول ويخترقلى الداتا بيز ما انت عارف يعنى


-كيف بنعمل الفالديت هان ...كل اشى جاهز باللارافيل
-وراح نتعلم كيف نكتب الفالديت بالطريقة ..بالطريقة العادية جوا الميثود زى اى واحد بيعملها ...ونتعلم الطريقة الستاندرد عشان تكون محترف ..كيف تعملهم برا الميثود عشان ما تكبر الكود تبعك ...نعمله برا ونخزنها بمتغير ..وجوا الميثود بس نحط المتغير يعنى


-لو فى اى اخطاء عنا بعد ما عملنا فالديت ...نرجع رسايل الاخطاء لليوزر تحت كل فيلد خاص بالخطا هيك

-ازا عملنا الفالديت وما عنا ولا خطا ..خلص بالتالى بنعمل انسيرت للبياانت عالداتا بيز

-هلقيت بدنا نعمل الانسيرت للبيانات عالداتا بيز ..نتعلم كيف نعملها انسيرت ..والدرس الجاى نتعلم قبل ما نعمل الانسيرت كيف نعمل الفالديت

-احنا بدنا نعمل انسيرت للجدول الى اسمه offers يعنى راح نتعامل مع المودل تبعه الى اسمه Offer

-وحكينا الدرس الى فات اانو الدالة الى بتعملى انسيرت للبيانات بالداتا بيز اسمه كرييت ..وبتاخد اريه اسوسيتف

-الكى عارفينه الى هو اسماء الحقول الى بالجدول ..طيب الفاليو هان كيف بنكتبها
-كيف بدنا ناخد الفاليو الى اجتنى بالريقويست ..بنقلو ريقويست النيم ..ريقويست السعر وهكذا

public function store(Request $request){

        //validate data befor insert to DB

        //insert
        Offer::create([
            'name'    => $request->name,
            'price'   => $request->price,
            'details' => $request->details,
        ]);

    }

-$request->name,  هان انا باخد منو الفاليو تبعت حقل النيم الى انا سميته بالفورم نيم

-$request->price, وهان برضو زيها انا بتعامل مع النيم تبعت الحقول الى باالفورم الى اجتنى ...انا مسمى النيم تبعت حقل السعر كنت مسميها هيك name="price"

هى معنى الكلام الى انا كاتبه ...وبقله يحطه بالحقل الى اسمه برايس بالداتا بيز ..الى هو الكى الى انا كاتبه

-خلينى نرجعلك رسالة مسلا بشكل مبدا ..عشان اجرب ..اقله رجعلى انو تم الاضافة بنجاح مسلا

public function store(Request $request){

        //validate data befor insert to DB

        //insert
        Offer::create([
            'name'    => $request->name,
            'price'   => $request->price,
            'details' => $request->details,
        ]);

        return "Saved Successfully";

    }

-نروح نجرب ندخل offer7 مسلا من الفورم ..ونشوف بدو ينضاف عنا بالداتا بيز ولا لا

-فعلا ضافلى العرض7 ...ورجعلى رسالة براوت http://127.0.0.1:8000/offers/store
Saved Successfully

-لسا راح نتعلم ..لما نرسل ..كيف نرجع للفورم نفسها او نرجع لصفحة تانية برضو
-ولاحظ انو الوقت ما انضاف بالجدول لانو انا عملتو فولس ..بالتالى حط مكانهم null
-لو بدك يدخلك الوقت ..روح خليها بدل فولس اعملها ترو ..او شيلها من الاساس لانو لو ما كتبتها هى باى ديفولت ترو

================================================================================

     #048-Laravel validate request before Inserting database (validation rules)

-بدنا نتعلم كيف نعمل الفالديت عالداتا الى اجتنى من الفورم قبل ما اعمللها انسيرت بالداتا بيز

-اول حاجة الكلاس الى بيعمل فالديشن بلارفيل اسمه Validator وخلى بالك لما نكتبه لازم يستدعى فوق

-بياخد ميثود اسمها make()
-بتاخد 3 اريه وممكن 2 اريه وومكن 1 اريه Validator::make([], [], [])

-اول اريه ...هو الريقويست الى بيجيلك ..الى فيه كل البيانات الى اجت من الفورم
-كيف كبف بدنا نكتبها هان بالاريه ..هى اجتنى بريقويست حكينا ..عشان احول الريقويست هاد لاريه ...بنحوله بميثود اسمها all()

Validator::make($request->all(), [], [])

-طيب هى خلصنا من اول اريه
-شو هى الاريه التانية ....الفالديشن روول
-شو هى الاريه التالتة ...الفالديشن مسج
يعنى الرسايل الى راح ترجع لو حاجة من هدول الفالديت رجعت خطا

-خلينا نشتغل عالاريه التانية هلقيت
الكى تعتها ..هى النيم تبع الحقل الى اجانى ..مسلا حقل الاسم كانت النيم تبعته نيم
حقل السعر كانت النيم تبعته برايس حقل التفاصيل كانت النيم تعته ديلتيز وهكذا

-الفاليو تعتها شو هى ...هى الفالديت الى لارفايل عاملاها باى ديفولت
-يعنى مسلا كتبتله
//validate data befor insert to DB
        $validator = Validator::make($request->all(), [
            'name' => 'required|max:10|unique:offers,name',
            'price' => 'required|numeric',
            'details' => 'required',
        ]);


-بنفصل بين كل فالديت والتانى ب |
-required: يعنى الحقل مطلوب ..غصب عنك بدك تكتب فيه

-max:20 : يعنى الماكس تبعته 20 حرف بس ..ممنوع تكتب فيه اكتر من 20

-numeric : يعنى ارقام فقط ..ممنوع تكتب الا ارقام فيه

-unique:offers,name
-يعنى انا بقله انا عايز يكون فريد من نوعه ما يتكرر ..بالجدول الى اسمه اوفرز بالحقل الى اسمه name بالجدول

-يعنى الميثود المسؤلة على انه ما يتكرر اسمه unique وبحدد الها اسم الجدول والكولون الى فيه الى ما بدى يتكرر

-لسا عنا فالديشن كتيرررة ..ممكن انت تروح ع لارافيل وتقرا عنها ..واحان خلال الشرح والمشروع الى راح نعملها راح نمر عليها

-اى حاجة من هدول راح تطلع خطا ..راح يرجعلنا الرسالة تعته

-طيب هلقيت احنا عملنا الفالديت ..هلقيت بدنا نعمل التشيك عليه ..نقلو لو فيه بقالديت من هدول حصل خطا ..رجعلى الرسالة تبعته

-بدنا نروح نستخدم اف
if($validator -> fails()){

        }

-fails() : يعنى لو فشل

-مبدئا احنا لسا ما عرضنا اى مسج ..المفروض الخطوات المتبعة انى نا اخد ال fails
الى راح تطلع واعرضها هناك تحت الحقول بالفورم ...هاد الكلام الدرس الجاى راح نعرض رسايل الخطا بالفورم

-انا هان حاليا بدى اقله بس رجعلى رسايل الفيلز الى راح تحصل ..الاخطاء يعنى

-بدنا نقله اعملى ريتورن للفاليديتور ايرورز ..كل الايرور الى راح تحصل فيه
if($validator -> fails()){

    return $validator -> errors();

}

-كل الايرور الى راح تحصل فيه ..طيب لو انا بدى بس اول ايرور بيطلعلى
-عنا ميثود اسمها first() بترجعلى بس اول ايرور
return $validator -> errors() -> first();

-ولكن انا هان بدى ارجعلهم كلهم هلقيت

-صارت عندى الميثود كاملة

public function store(Request $request){

        //validate data befor insert to DB
        $validator = Validator::make($request->all(), [
            'name' => 'required|max:10|unique:offers,name',
            'price' => 'required|numeric',
            'details' => 'required',
        ]);

        if($validator -> fails()){
            return $validator -> errors();
        }

        //insert
        Offer::create([
            'name'    => $request->name,
            'price'   => $request->price,
            'details' => $request->details,
        ]);

        return "Saved Successfully";

    }


==========================

ملاحظة مهمة جدا جدا انتبه الها

-ولكن هاد شروح المهندس ....انا عندى دالة make()
مش شغالة ...تحتها خط احمر ..لما اقف عليها بقلى
Undefined method 'make'.intelephense(1013)
-شكلو معمول الها ديبريكيتت

-ولكن وانا ببحث بالموقع اكتشفت انو لما علت كلاس ال Validator باقى عامل يوزر لكلاس تانى ...رجعت مسحته عملى يوز لكلاس تانى برضو مش هو

-بالاخير طلع الكلاس الى انا بدى اياه الى بيستخدك دالة الميك ..موجود بالفاساد

-هدول الاتنين الخطا الى جننونى
// use Illuminate\Contracts\Validation\Validator;
// use Dotenv\Validator;

-الصح تبعنا الى بتشتغل عليه دالة الميك هادا
use Illuminate\Support\Facades\Validator;

========================

-وهلقيت خلينا نروح نجرب شغلنا

-اول حاجة بدى اعمل ارسال للفورم والحقول فاضية اشوف شو الايرورز الى بدها ترجعلى

-رجعلى
{"name":["The name field is required."],"price":["The price field is required."],"details":["The details field is required."]}

-بقلى حقل الاسم مطلوب ..بعدين الرسالة التانية بقلى حقل السعر مطلوب والتالتة زيها
لانو انا ارسلت الفورم وخليت ال3 فاضيين

-طيب بدى ادخل الاسم والسعر ..واسيب التفاصيل فاضية
{"details":["The details field is required."]}

-بدى ادخل ال3 حقول ..ولكن السعر بدى اكتبه حروف مش ارقام
{"price":["The price must be a number."]}

-بدى ادخل اسم العرض اسم موجود بالداتا بيز مسلا offer2
{"name":["The name has already been taken."]}

-بقلى انو هاد الاسم متاخد قبل هيك

-طيب بدى اخلى الاسم موجود قبل ..والسعر حروف ..والتفاصيل فاضى
{"name":["The name has already been taken."],"price":["The price must be a number."],"details":["The details field is required."]}

-ضل عندى اخر واحدة اتاكد منها بس ..بدى اكتبله اسم اكتر من 10 احرف ..انا حاكيله ماكس 10 احرف
{"name":["The name may not be greater than 10 characters."]}

-طيب بدى اجرب المينيمم ..اقله اقل شى 3 احرف
        'name' => 'required|max:10|min:3|unique:offers,name',

-هى ضفتها ..خلى اروح اكتب اسم عرض من حرفين بس
{"name":["The name must be at least 3 characters."]}


-هاى الرسايل بترجع بالانجليزى باى ديفولت لانو حكينا لارافيل باى ديفولت انجليزى

-راح نتعلم كيف نعمل كستمايز عالرسايل هادى ..كيف نغيرها ونكتبها بايدنا ...وكيف نكتبها بالعربى كمان

-طيب لو بدنا نعرض بس اول خطا عنا ...فى ناس لما يكون عندها اخطاء ..بتطلع لليوزر بس اول خطا بصير

if($validator -> fails()){
            return $validator -> errors() -> first();
        }
-هيك بيعرضلنا بس اول خطا
-يعنى لو دخلت الاسم صح ..والسعر احرف ..والتفاصيل فاضية
-هيك عنا 2 ايرور ..ايرور انو السعر يكون ارقام ..وايررو انو التفاصيل فاضية
-راح يرجلعنا بس تبع السعر
The price must be a number.

-طيب روح دخل طلب بدون ولا ايررور ...راح ينضاف للداتا بيز ..ويرجعلنا رسالة
النجاح

-هلقيت الخطوة التانية ..بدنا نعرف كيف نتحكم بالرسائل هادى الى بترجع
-ازا بدك تعمل تغيير عالرسايل هادى ....يبقى لازم نروح نضيف للميثود make()
الاريه التاالتة ..حكينا الاريه التالتة للمسجات

-بس قبل ما نضيف الاريه التالتة

-بدنا نعمل تحيسن للكود ..بدنا ناخد الاريه التانية تبعت الرولز ..ونحطها بمتغير مسلا ..عشان يكون الكود مرتب ..ونحط المتغير بدالة الميك

 public function store(Request $request){

        //validate data befor insert to DB

        $rules = [
                    'name' => 'required|max:10|min:3|unique:offers,name',
                    'price' => 'required|numeric',
                    'details' => 'required',
                ];

        $validator = Validator::make($request->all(), $rules);

        if($validator -> fails()){
            return $validator -> errors() -> first();
        }

        //insert
        Offer::create([
            'name'    => $request->name,
            'price'   => $request->price,
            'details' => $request->details,
        ]);

        return "Saved Successfully";

    }

-هيك صارت ارتب وبشكل احترافى ..نروح نعمل الاريه التالتة هلقيت

-كيف بنكتب الكى ...مسلا بدى اكتب رسالة الاسم مطلوب بروح بقلى الكى
"name.required" => ""

-والفاليو هى الرسالة الى بدى اكتبها

-الى ما بتكتبها عادى ..بتضلها الديفولت تبع لارافيل

-بدى احطله رسايل بالعربى مسلا ..والدرس الجاى بدنا نتعلم كييف نعمل الرسايل باكتر من لغة

-يعنى لو الموقع عربى تطلع مسجات بالعربى ..لو غير لغة الموقع لانجليزى تطلع الرسايل انجليزى

-هلقيت عملنا رسايلنا هيك

public function store(Request $request){

        //validate data befor insert to DB

        $rules = [
                    'name' => 'required|max:10|min:3|unique:offers,name',
                    'price' => 'required|numeric',
                    'details' => 'required',
                ];

        $validator = Validator::make($request->all(), $rules, [
            'name.required' => 'اسم المنتج مطلوب',
            'name.max' => 'اسم المنتج يجب ان لا يزيد عن 10 حروف',
            'name.min' => 'اسم المنتج يجب ان لا يقل عن 3 احرف ',
            'name.unique' => 'اسم المنتج مطلوب',
        ]);

        if($validator -> fails()){
            return $validator -> errors();

        }

        //insert
        Offer::create([
            'name'    => $request->name,
            'price'   => $request->price,
            'details' => $request->details,
        ]);

        return "Saved Successfully";

    }

-ولكن لما رحت اجرب ...كان يرجعلى الرسالة الى كتبتها بالعربى مشفرة ..ولكن لو كتبتها بالانجليزى اى كلام ..برجعلى الانجليزى الى انا كتبته

-كان يرجعلى زى هيك
{"name":["\u0627\u0644\u0627\u0633\u0645 \u0645\u0637\u0644\u0648\u0628"]"]}

-ولكن بحثت بالتعليقات الى عالفيديو ..فى ناس كتيرة صايرو معهم
-فى واحد كاتب هاد التعليق

في اضافة في الكروم اسمها json-formatter بتحل المشكلة

-رحت نزلة الاضافة هادى ..وفعلا انضافت عندى عالاضافات تعت الكروم ..وبعد ما ضفتها صار يعرضلى المسجات بالعربى

-هلقيت نرجع نجرب ..بدى ادخلهم كلهم فاضى
{
"name": [
"اسم المنتج مطلوب"
],
"price": [
"The price field is required."
],
"details": [
"The details field is required."
]
}

-عرضلى الاولى المسج الى انا كتبته ..لكن السعر والعرض انا ما عملتلهم مسج كاستم من عندى ...ف جابلى المسج تبعت لارافيل

-حتى ازا بتلاحظ بعد ما نزلت الاضافة ..صار يعرضلى اياهم بشكل جيسون ..بشكل ارتب تحت بعض ..بالاول كان يجيبلى اياهم كلهم ع سطر واحد

-طيب بدى اكتب اسم اقل من حرفين
{
"name": [
"اسم المنتج يجب ان لا يقل عن 3 احرف "
]
}

-بدى اروح اكمل كل الرسايل
$validator = Validator::make($request->all(), $rules, [
            'name.required' => 'اسم المنتج مطلوب',
            'name.max' => 'اسم المنتج يجب ان لا يزيد عن 10 حروف',
            'name.min' => 'اسم المنتج يجب ان لا يقل عن 3 احرف ',
            'name.unique' => 'اسم المنتج مطلوب',
            'price.required' => 'سعر المنتج مطلوب',
            'price.numeric' => 'سعر المنتج يجب ان يكون ارقام فقط',
            'details.required' => 'تفاصيل المنتج مطلوبة',
        ]);

-دخلت 3 ايرور

{
"name": [
"اسم المنتج يجب ان لا يقل عن 3 احرف "
],
"price": [
"سعر المنتج يجب ان يكون ارقام فقط"
],
"details": [
"تفاصيل المنتج مطلوبة"
]
}

-نروح نرتب الكود تبعنا ...زى ما عملنا الاريه الاولى وطلعناه برا ...نطلع اريه المسجات برا برضو

  public function store(Request $request){

        //validate data befor insert to DB

        $rules = [
                    'name' => 'required|max:10|min:3|unique:offers,name',
                    'price' => 'required|numeric',
                    'details' => 'required',
                ];

        $messages = [
                        'name.required' => 'اسم المنتج مطلوب',
                        'name.max' => 'اسم المنتج يجب ان لا يزيد عن 10 حروف',
                        'name.min' => 'اسم المنتج يجب ان لا يقل عن 3 احرف ',
                        'name.unique' => 'اسم المنتج مطلوب',
                        'price.required' => 'سعر المنتج مطلوب',
                        'price.numeric' => 'سعر المنتج يجب ان يكون ارقام فقط',
                        'details.required' => 'تفاصيل المنتج مطلوبة',
                    ];

        $validator = Validator::make($request->all(), $rules, $messages);

        if($validator -> fails()){
            return $validator -> errors();

        }

        //insert
        Offer::create([
            'name'    => $request->name,
            'price'   => $request->price,
            'details' => $request->details,
        ]);

        return "Saved Successfully";

    }


-طيب لو بدى اتفنن اكتر بالكود واعمله بشكل احترافى اكتر
-مسلا بدى اخلى الاريه هادى بميثود تحت او فوق مسلا واقله
$messages = $this->getMsg();
وانزل تحت اعمله بالكلاس واعمله ميثود ال getMsg() هادى وحطله فيها الاريه تبعتنا

-ونعمل اريه الروولز برضو بنفس الطريقة نخليهم بميثود ..لو حابب تكون محترف يعنى

 protected function getRoles(){
        return $rules = [
            'name' => 'required|max:10|min:3|unique:offers,name',
            'price' => 'required|numeric',
            'details' => 'required',
        ];
    }

protected function getMsg(){
        return $messages = [
            'name.required' => 'اسم المنتج مطلوب',
            'name.max' => 'اسم المنتج يجب ان لا يزيد عن 10 حروف',
            'name.min' => 'اسم المنتج يجب ان لا يقل عن 3 احرف ',
            'name.unique' => 'اسم المنتج مطلوب',
            'price.required' => 'سعر المنتج مطلوب',
            'price.numeric' => 'سعر المنتج يجب ان يكون ارقام فقط',
            'details.required' => 'تفاصيل المنتج مطلوبة',
        ];
    }

public function store(Request $request){

        //validate data befor insert to DB

        $rules = $this->getRoles();
        $messages = $this->getMsg();

        $validator = Validator::make($request->all(), $rules, $messages);

        if($validator -> fails()){
            return $validator -> errors();

        }

        //insert
        Offer::create([
            'name'    => $request->name,
            'price'   => $request->price,
            'details' => $request->details,
        ]);

        return "Saved Successfully";

    }


-عملنا كل واحدة بميثود ...ولو تروح تجربها ..ولا اى مشكلة كلو شغال مية مية

-انت مش مطالب تعمل هيك ..يعنى لو خليتهم بالطريقة الى قبل عادى يعنى ..بس لو حابب تحترف يعنى

================================================================================

   #049 - Larvel show request validation to form (form validation errors)

-بدنا نتعلم كيف نعرض رسائل  الخطا جوا بالفورم نفسها تحت كل حقل

-بدنا نروح نعمل ديف اليرت او سمول ..تحت كل حقل بحيث نعرض فيها رسالة اخطا لو حصلت
<small class="form-text text-danger">ddd</small>
<div class="alert alert-danger">ddd</div>

-الاليرت انا اشتغلت عليه قبل هيك وعارفه ..خلينى المرة اشتغل عالسمول
-السمول عبارة عن كلمة ملونة بس

-وقتيش بتظر النا رسالة الخطا بالسمول ..لما يكون عنا ايرور او خطا يعنى

-بالتالى راح نستخدم دايركتف لارافيل عاملاه اسمه
 @error()
 @enderror

-بنقله لو حصل ايرور بشو ..مسلا انا بحقل اسم المنتج ..بدى اقله لو حصل ايرور بالنيم ..طلعلى السمول واعرضلى فيها الخطا الى صار بالنيم

 @error('name')
    <small class="form-text text-danger">ddd</small>
 @enderror

-لو ما حصل مش راح يعرضلى السمول اصلا

-طيب لو حصل الايرور بدنا نعرص الرسالة الى اجتنى داخل السمول هادا ..كيف بنعرصها
-بنقله المتغير $message هاد هو الى بيعرضلى المسجات بلارفيل هو المسؤول عن عرض المسجات

-يعنى مسلا انا عندى بالرولز ..النيم ريكويرد ..لو ما انكتب الاسم ..بروح عالمسجات بشوف شو المسج المقابل للريكويرد وبطلعلى اياه وهكذا

-صار عنا حقل الاسم زى هيك
<div class="form-group">
    <label for="offername">Offer Name</label>
    <input type="text" class="form-control" name="name" id="offername" placeholder="Type Offer Name">

    @error('name')
    <small class="form-text text-danger">{{$message}}</small>
    @enderror

</div>

-نعمل نفس الكلام لحقل السعر والتفاصيل

<form method="POST"  action="{{ route('offers.store')}}">

    @csrf

    <div class="form-group">
        <label for="offername">Offer Name</label>
        <input type="text" class="form-control" name="name" id="offername" placeholder="Type Offer Name">

        @error('name')
        <small class="form-text text-danger">{{$message}}</small>
        @enderror

    </div>

    <div class="form-group">
        <label for="offerprice">Offer Price</label>
        <input type="text" class="form-control" name="price" id="offerprice" placeholder="Type Offer Price">

        @error('price')
        <small class="form-text text-danger">{{$message}}</small>
        @enderror

    </div>

    <div class="form-group">
        <label for="offerdetails">Offer Details</label>
        <input type="text" class="form-control" name="details" id="offerdetails" placeholder="Type Offer Details">

        @error('details')
        <small class="form-text text-danger">{{$message}}</small>
        @enderror

        </div>

    <button type="submit" class="btn btn-default">send</button>
</form>

-طيب احنا كنا بالميثود الستور ..نقلو ريتورن ..رجعلنا الرسايل لو فى خطا او رجعلنا رسالة النجاح لو ما فى خطا وعملتهم انسيرت بالداتا بيز

-لا هلقيت بدنا نقله رجعنا للفورم نفسه ..ما ترجعلى الرسايل ..لانو خلص انا عرضتها هناك ..لو فى مسجات خطا راح تنعرض تحت كل حقل

-طيب راح نشوف كيف نرجع لورا ..بكزا طريقة

-اول حاجة عن طريق ميثود اسمها
 return redirect()->back();

-يعنى انا هيك راح ارجع لورا

-او ممكن اقله
return redirect()->to();

-واعطيه الباث تبعى ..يعنى اقله ترجع لوين ..بدى اقله ارجع للفيو تبعتى
الى هى كانت بروات offers/create

-يعنى اقله
return redirect()->to('offers/create');

-ولكن انا اختصارا للوقت ..خلص بقله باك ..يعنى ارجع لورا

-طيب بدى بقلى عايز ارجع بايش ..عايز ارجع بكل الاخطاء الى معى
return redirect()->back()->withErrors();

- واقله ارجع بكل الانبوت الى معى ..يعنى وذ الاسم وكمان وذ السعر وهكذا
return redirect()->back()->withErrors()->withInputs();

-طيب ايش هى الانبوت حكينا ...حكينا الى هى جايالى بالريقويست ...الى هى الريقويست اوول ..هى هادى الانبوت الى جاية الى من الفورم ..الى هى الاسم والسعر والتفاصيل
return redirect()->back()->withErrors()->withInputs($request->all());

-طيب ايش هى الايرورز ...هى المتغير الفالديتور الى عملناه وفيه الاخطاء
return redirect()->back()->withErrors($validator)->withInputs($request->all());

-يعنى من الاخر ..بدى اقله لو الفالديشن تبعك فشل ..ارجع ورا واعرضلى الاخطاء تبعتك هادى

-يعنى بدل ما كانت اف هيك

if($validator -> fails()){
        return $validator -> errors();
    }

-صارت هيك

if($validator -> fails()){
        return redirect()->back()->withErrors($validator)->withInput($request->all());
    }

-وهيك زبطت وكل تمام ..لو فيه اى خطا ..بطلعلك الفورم وتحت الخقول الاخطاء تعتها

-طيب هلقيت افرض ما عندى اخطاء ..وضاف باداتا بيز المنتج تبعنا
بدنا نعرض رسالة النجاح هلقيت ..بالاول كنا نعمللها ريتورن برضو زى الايرور
نعمللها ريتور بصفحة offers/store

-طيب هلقيت بدنا نعرضها فوق الفورم نفسها مسلا ..يقلى تم اضافة المنتج بنجاح

-بدنا نروح نشيل هادى

        //insert
        Offer::create([
            'name'    => $request->name,
            'price'   => $request->price,
            'details' => $request->details,
        ]);

        return "Saved Successfully";

-ما بدنا نقله ريترن الرسالة هادى لااا

-بدنا نقله ارجعلى ورا ..برسالة ..هان بنستخدم دالة with() لحالها
عشان نكتب فيها الرسالة تعتنا ..اما بالايرور كنا نقله ارجعلى ..وذ الايرورز

-وهان دالة with() راح تاخد اريه اسوسيتف ...الكى بنكتبه اى اسم بدنا اياه
نسميه سكسس مسلا ..والفاليو بنكتب لارسالة تعتنا

//insert
    Offer::create([
        'name'    => $request->name,
        'price'   => $request->price,
        'details' => $request->details,
    ]);

    return redirect()->back()->with(['success' => 'تم اضافة العرض بنجاح']);

-هلقيت بدنا نروح نعرضها باى مكان بالصفحة طبعا ..عشان تظهرلى

-بدى اروح احطها باليرت سكسس ..فوق الفورم زى هيك

-هيها تحت العنوان
<div class="title m-b-md">
    Add Your Offer
</div>

<div class="alert alert-success">dddd</div>

-ولكن هيك راح تضل ظاهرة على ع طول ..لا انا بدى اياها تظهر لما اعمل ارسال للفورم وتتم العملية بنجاح بدون اخطاء

-يبقى لازم نروح نعمل شرط ...نقله طول وفى ايرور ..يبقى ما فى نجاح
طالما فش ايرور ..يبقى خلص فى نجاح للعملية

-طيب احنا بنرجع كى اسمه سكسس بالرسالة تبعته ...احنا هان لما بنقول with
ونعطيها كى اسمه سكسس مسلا ....لارافيل بتجيى تاخد الكى هاد فى السشن الى بيتنقل بين الصفحات ..وبحطه وبحط الرسالة تبعته

-يبقى احنا راح نعمل تشيك على السشن هادا ..السشن هادا باختصار ..هو حاجة لارافيل بتحط فيها الداتا تبعتها ك كى وفاليو

-بدنا نروح عالفيو هلقيت ..عند الاليرت سكسس ...ونعملو ب اف ..نخليه يظهر بشرط يعنى

-شرط السشن الى حكينا عنو ..نقله @if(Session::has())

-هاز ايش ..هاز الكى تبعنا السكسس

 @if(Session::has('success'))

-يعنى جاى من السكسس ...بدك تعرضلى الكلام هاد الى بدى اعطيك اياه ..الى هو الاليرت

@if (Session::has('success'))
    <div class="alert alert-success">dddd</div>
@endif

-هلقيت بعد ما حطيناها روح حدث الصفحة راح تلاقى الاليرت اختفى ...لانو السشن مش جاى من السكس ...لكن لو جاي من السكسس ..راح يعرضى الاليرت بالرسالة تعته

-طيب كيف بدنا نعرض الرسالة تبعت السكسس بالاليرت تبعنا
-بنقله سشن قيت سكسس ...وهو هيك خلص بجيبلى الرسالة تبعت السكسس

@if (Session::has('success'))
    <div class="alert alert-success">
        {{ Session::get('success') }}
    </div>
@endif

-وهيك لو ضفنا عرض بنجاح ...راح تطلعى المسج هادى
-وبعد ما تطلعلى ..لو تعمل ريلود للصصفحة بتلاقيها راحت خلص

=================================================================================

            #050 - لحل جميع مشاكل ال 50 فيديو السابقين

=================================================================================

  #051- Laravel Request Validation Message in Multi Language - بلارافل

-بدنا نخلى رسايل الايرور الى بتطلع بلغتين عربى وانجليزى

-يبقى بدل المسج بدنا نحط الكى تبعته ...وناخد الكى ع ملف اللغة العربى وملف اللغة الانجليزى ..ونكتب الرسالة بالعربى وبالانجليزى بالملفين

-بدنا نروح ع ملف اللغة بدنا نشتغل بملف الى اسمه message عملته اول الكورس

-هلقيت المسجات بدل ما كانت هيك

protected function getMsg(){
        return $messages = [
            'name.required' => 'اسم المنتج مطلوب',
            'name.max' => 'اسم المنتج يجب ان لا يزيد عن 10 حروف',
            'name.min' => 'اسم المنتج يجب ان لا يقل عن 3 احرف ',
            'name.unique' => 'اسم المنتج مطلوب',
            'price.required' => 'سعر المنتج مطلوب',
            'price.numeric' => 'سعر المنتج يجب ان يكون ارقام فقط',
            'details.required' => 'تفاصيل المنتج مطلوبة',
        ];
    }

-راح تصير بالكى تبع المسج نفسه الى بدنا نترجمه

-اما بنستخدم __()
-او بنستخدم  trans()

-التنتين نفس بعض
-ملف اللغة كان اسمه messages.php موجود بفولدر الانجليزى والعربى

-يبقى راح نقله __('messages.offer name') اسم الملف دوت الكلمة الى انا عايزها

-ممكن تكتبها هيك __('messages.oferrnamerequired') او اندرسكور مسلا بينهم
-وممكن بالمسافة عادى __('messages.oferr name required')
-صارت عنا هيك

protected function getMsg(){
        return $messages = [
            'name.required'    => __('messages.oferr name required'),
            'name.max'         => __('messages.oferr name max'),
            'name.min'         => __('messages.oferr name min'),
            'name.unique'      => __('messages.oferr name unique'),
            'price.required'   => __('messages.oferr price required'),
            'price.numeric'    => trans('messages.oferr price numeric'),
            'details.required' => trans('messages.oferr details required'),
        ];
    }

-وهى اخر تنتين عملتلك اياهم بالطريقة التانية برضو عشان تعرف انو التنتين صح عادى يعنى تستخدم اى واحدة

-هلقيت نروح ع ملف اللغة العربى ونترجمهم

return [

    'hello admin' => 'مرحبا بك ايها المسؤل فى اللغة العربية ',
    'hello user' => 'مرحبا بكم ايها الاعضاء فى اللغة العربية ',

    //offers errors messages
    'oferr name required'    => 'اسم العرض مطلوب',
    'oferr name max'         => 'اسم العرض يجب ان لا يزيد عن 10 احرف',
    'oferr name min'         => 'اسم العرض يجب ان لا يقل عن 3 احرف',
    'oferr name unique'      => 'هذا الاسم موجود مسبقا',
    'oferr price required'   => 'سعر العرض مطلوب',
    'oferr price numeric'    => 'سعر العرض يجب ان يكون ارقام فقط',
    'oferr details required' => 'تفاصيل العرض مطلوبة',

];

-نروح نترجمهم بملف اللغة الانجليزى كمان

return [

    'hello admin' => 'hello all admin in English lang',
    'hello user' => 'hello all user in English lang',

    //offers errors messages
    'oferr name required'    => 'offer name required',
    'oferr name max'         => 'offer name must be less than 10 char',
    'oferr name min'         => 'offer name must be larger than 3 char',
    'oferr name unique'      => 'offer name must be unique',
    'oferr price required'   => 'offer price required',
    'oferr price numeric'    => 'offer price required must be only numeric',
    'oferr details required' => 'offer details required',


];

-وهيك لو اللغة عنا انجليزى ..راح تطلع الرسايل بالانجليزى ..لو اللغة عربى راح تطلع الرسايل العربى

-هلقيت لو نروح نطلع اخطاء ..راح تطلع انجليزى ..لانو باى دبفولت انجليزى حكينا

-لو بدنا نغير اللغة بشكل مانويال بايدينا يعنى ...بنروح ع ملف
confg -> app داخل ملف الاب ..عنا اللغة غيرها خليها ar
راح تطلعلك الرسايل بالعربى

-الدرس الجاى راح نتعلم كيف نغير اللغة عن طريق زر
نحط براس الصفحة فوق زر للغة عربى وانجليزى منهم تحول لغة الموقع
-راح نستخدم فيها باكيج الكل بيستخدمها

=================================================================================

   #052 - Laravel How to make Multi Language site using (mcamara Package)

-بدنا نحول لغة الموقع عن طريق باكيج مشهورة اسمه mcamara

-هاى الباكيج مشهورة جدا بنسبة 90 بالمية من الناس بيستخدموها عشان يعملو موقعهم متعدد اللغات
-هى رابطها من القيت هاب ..بنفوت عليه عشان نعرف كيف نحملها ونستخدمها ناخد منو شوية اوامر عشان نعرف نتعامل معها
-طبعا احنا بنعمل الكلام هاد كلو مرة ..بعد هيك بتصير تاخدها لمشاريعك نسخ لصق ..يعنى بتعملهم بمشروع واحد بعدين بتصير تاخد نسخ لصق الامور المتعلقة فيها

-نروح نعمل سيت اب للباكيج ..لو تفوت عالرابط معطينا الامر الى بخلينا ننزل الباكيج

Installation
Install the package via composer: composer require mcamara/laravel-localization

-يبقى راح نستخم هاد الامر عشان ننزلها

-نعمل الامر ...هيها قاعدة بتنزل معى
C:\xampp\htdocs\Laravel_Course (master -> origin)
λ composer require mcamara/laravel-localization
Using version ^1.6 for mcamara/laravel-localization
./composer.json has been updated
Running composer update mcamara/laravel-localization
Loading composer repositories with package information
Updating dependencies
Lock file operations: 1 install, 0 updates, 0 removals
  - Locking mcamara/laravel-localization (1.6.1)

-بعد ما يخلص الامر وينزلها ...وين بنلاقيها ..طبعا حكينا اى باكيج بتنزل بنلاقيها بالفيندور

-لو تروح ع ملف الفيندور راح تلاقيها بفولدر اسمه mcamara

-ايش الخطوة التانية بالانستوليشن
Config Files
In order to edit the default configuration you may execute:

php artisan vendor:publish --provider="Mcamara\LaravelLocalization\LaravelLocalizationServiceProvider"

-الى هى الفيندور ببلش ...ايش يعنى فيندور ببلش
-يعنى هى الباكيج هادى مسلا عايزة اعدادات معينة ...انت مسلا بدك تتيح لغات معينة عندك بالموقع ..مسلا بدك الانجليزى والعربى والفرنسى مسلا

-ف انت لازم تفوت وتعلم عليهم ..عشان تتيحهم عندك بالموقع ..طيب من وين بنفوت بنعلم عليهم ...عندك بالباكيج ملف اسمه الكونفيق ..موجود فى كل لغات الدنيا
لو تفوت عليه بتلاقيه معلم عاللغة الانجليزى والاسبانى ..عند المهندس ع فكرة معلم الانجليزى والفرنسى ..ما علينا

-عشان نفوت عالملف هاد من
vendor\mcamara\laravel-localization\src\config\config.php

-بتفوت ع ملف الكنفيق بالباكيج وبتعلم عاللغة الى بدك اياها وبتوقف الى ما بدك اياها

-طيب هل ينفع انا افوت ع ملف الكونفيق هاد الى بالفيندور واعدل فيه ...لا غلط طبعا احنا حكينا ملفات الفيندور ما بنقرب عليها

-طيب انا عشان اقدر اعدل بالملف هاد
-اعطانى الامر التانى الى حيكنا عليها الفيندور ببلش ..لما اعمل الامر هاد
بلاقيها حطلى ملف الكنفيق تبع باكيج كامرا فوق برا الفيندور ..يعنى عمل الو ببلش لبرا الفيندور عشان انا اقدر استعمله

-وين بحطه ..بحطلى اياها بفولدر الكنفيق تبعنا الى فوق بالاب
app -> confg بلاقيه هان بملف الكنفيق باسمه

-هى الامر تبعنا
php artisan vendor:publish --provider="Mcamara\LaravelLocalization\LaravelLocalizationServiceProvider"

-نروح ننفذه

C:\xampp\htdocs\Laravel_Course (master -> origin)
λ php artisan vendor:publish --provider="Mcamara\LaravelLocalization\LaravelLocalizationServiceProvider"
Copied File [\vendor\mcamara\laravel-localization\src\config\config.php] To [\config\laravellocalization.php]
Publishing complete.

-قلى عملتلك كوبى للفايل الى اسمه كزا كزا ..تو ...
To [\config\laravellocalization.php]

-هلقيت روح ع فولدر الكنفيق تبعنا راح تلاقيه ملف اسمه لارفايل لوكالايزيشن
هو هاد ملف اللغات ...بنعدل منو اللغة الى بدنا اياها

-الملف هاد عبارة عن اريه باللغات ..اريه فيها كل اللغات
-هو باى ديفولت مفعل عندى الانجلزيى والاسبانى
-انا بدى اوقف الاسبانى ...وابحث عن العربية ..افعل الانجليزية والعربية

//'ar'  => ['name' => 'Arabic',    'script' => 'Arab', 'native' => 'العربية', 'regional' => 'ar_AE'],

-رفعت عنها الكومنت ..شغلتها ...والاسبانى عملتلها كومنت خلص

-وهيك صار الانجليزى والعربى متاحين عندى

-طيب الباكيج هادى ايش فايديتها ..عشان نخلى الموقع تبعنا يشتغل ع لغتين عربى وانجليزى

-يعنى لما نشتغل فيها راح تصير تلاحط انو الراوت عنا فوق بدل ما كان هيك
http://localhost:8000/offers/create

-بدو يصير
http://localhost:8000/en/offers/create

-لو كنت انجليزى ..بتضيفلى اللغة قبل الراوت يعنى

-ولو كنت عربى راح تلاقى الراوت هيك
http://localhost:8000/ar/offers/create

-هى وطيفتها

-يعنى الباكيج هادى ...بتعمل ميدل وير ..عشان تطبقها عالرواتات الى انت عايز تكون بلغتين ....ولو راوتات مش عايز يكون الها الكلام هادى عادى ما تحطها ..وراح نعرف كيف نحط الميدل وير الخاص بالباكيج هادى عالروات

-ولو انت بدك تطبق الميدل وير ع كل رواتات الموقع ..يعنى عالموقع كله ..خلص بتحطها بملف الويب اول اشى خالص ..وبعد هيك بتحط رواتاتك تحتها عشان تطبف عليهم ميدل وير اللغات

-الميدل وير حكينا انو هو شرط ..لو تحقق راح تطبقه ع الرواتات ..لو ما تحقق خلص مش راح تطبقه ...شرحناه كتير قبل هيك وفاهمينه

-فكرة الميدل وير هادى تبعت الباكيج ..انها بتضيف الى ar او en  او اى لغات انت فعلتها ...بتضيفلى اياهم قبل الرواتات من غير ما انت تضيفها

-طيب احنا عشان نضيف قبل كل راوت اى حاجة ...ايش لازم نعمل ...لازم نعمل بريفكس حكينا ...الى هى الكلمة البادئة للراوتات

-طيب كيف بدنا نضيفها عالرواتا تبعتنا

-انا حاليا بدى اشتغل بس عالرواتا تبعت الاوفر ..العروض الى عنا ...بدى اطبق ع الرواتت تعينها انو تكون صفحاتها لغتين

-بدنا نروح ع ملف الويب تاع الرواتس

-كانت زى هيك الرواتات


Route::group(['prefix' => 'offers'], function() {
    //الدرس 46
    //Route::get('store', 'CrudController@store');

    //الدرس47
    Route::get('create', 'CrudController@create');
    Route::post('store', 'CrudController@store')->name('offers.store');

});

-طيب انا بدى اطبق ع راوتات القروب هادى ..بريفكس ينحط قبلهم كمان الى هو بريفكس اللغة

-يعنى الى فوق كان الروات هيك    offers/create      offers/store
-بدنا نخليه                      en/offers/create   en/offers/store
-او عربى                          ar/offers/create   ar/offers/store

-واللغة طبعا تنحط اوتوماتيك منو ..بناءا انا شو مختار لغة موقعى ..يعنى لو انا ضغطت عاللغة العربى يحطلى البريفكس عربى ...لو انا ضغطت عاللغة الانجليزى ..يحطلى البرفكس انجليزى

-يعنى بدها تصير هيك
Route::group(['prefix' => 'ar'], function() {

    Route::group(['prefix' => 'offers'], function() {
        //الدرس 46
        //Route::get('store', 'CrudController@store');

        //الدرس47
        Route::get('create', 'CrudController@create');
        Route::post('store', 'CrudController@store')->name('offers.store');

    });

});

-طيب انا هيك كاتبها بايدى شو الفايدة ..ممكن اكتبها ar او en

-طيب كيف بدنا نخليها اوتوماتيك ...لو ترجع للرابط تبع الباكيج شارحلنا كيف نعملها اوتوماتيك

-معطينا ميثود ...هى الى بتجيب النا الكرنت لانجويج الى انت فيها ..لو انت بالعربى بتجيبلى العربى لو انت بالانجليزى بتجيبلى الانجليزى
LaravelLocalization::setLocale()

-هيها

=============

Add the following to your routes file:

// routes/web.php

Route::group(['prefix' => LaravelLocalization::setLocale()], function()
{
	/** ADD ALL LOCALIZED ROUTES INSIDE THIS GROUP **/
	Route::get('/', function()
	{
		return View::make('hello');
	});

	Route::get('test',function(){
		return View::make('test');
	});
});

====================

-يبقى راح نمسح كلمة ar الى كتبناها يدوى عنا ونحط بدلها هاى الدالة الى اعطانى اياها الى بتجيبلى الكرنت لانجويج مباشرة

Route::group(['prefix' => LaravelLocalization::setLocale()], function() {

    Route::group(['prefix' => 'offers'], function() {
        //الدرس 46
        //Route::get('store', 'CrudController@store');

        //الدرس47
        Route::get('create', 'CrudController@create');
        Route::post('store', 'CrudController@store')->name('offers.store');

    });

});

-اول ما كتبتها ..علم الى تحتها خطا احمر .. تحت اسم الكلاس LaravelLocalization ..فى خطا ..انو مش شايفه ...يبقى لازم نعمللها ايمبورت فوق

-حكينا انو موجود بملف الكونفيق



-طيب اخر خطوة بالانستوليشن ...بدنا نحط الميدل وير تبعت الباكيج هادى
-الى بتحطلى الميدل وير عالرواتات الى فوق الى عملناها بالبريفكس اللغات
-يعنى مسلا لو انا شلت من الروات كلمة en مسلا ورجعت عملت ريلود للصفحة راح يرجع يحطلى en غصب عنك خلص لانو حطينا ميدل وير

-طيب من وين بنجيب الميدل وير ..برضو موجود برابط القيت هاب الى بناخد منو تاع الباكيج

================

Register Middleware
You may register the package middleware in the app/Http/Kernel.php file:

<?php namespace App\Http;

use Illuminate\Foundation\Http\Kernel as HttpKernel;

class Kernel extends HttpKernel {
    /**
    * The application's route middleware.
    *
    * @var array
    */
    protected $routeMiddleware = [
        /**** OTHER MIDDLEWARE ****/
        'localize'                => \Mcamara\LaravelLocalization\Middleware\LaravelLocalizationRoutes::class,
        'localizationRedirect'    => \Mcamara\LaravelLocalization\Middleware\LaravelLocalizationRedirectFilter::class,
        'localeSessionRedirect'   => \Mcamara\LaravelLocalization\Middleware\LocaleSessionRedirect::class,
        'localeCookieRedirect'    => \Mcamara\LaravelLocalization\Middleware\LocaleCookieRedirect::class,
        'localeViewPath'          => \Mcamara\LaravelLocalization\Middleware\LaravelLocalizationViewPath::class
    ];
}

========================

-يبقى هدول ال5 ..راح ناخدهم ونحطهم بملف الميدل وير تبعنا
'localize'                => \Mcamara\LaravelLocalization\Middleware\LaravelLocalizationRoutes::class,
'localizationRedirect'    => \Mcamara\LaravelLocalization\Middleware\LaravelLocalizationRedirectFilter::class,
'localeSessionRedirect'   => \Mcamara\LaravelLocalization\Middleware\LocaleSessionRedirect::class,
'localeCookieRedirect'    => \Mcamara\LaravelLocalization\Middleware\LocaleCookieRedirect::class,
'localeViewPath'          => \Mcamara\LaravelLocalization\Middleware\LaravelLocalizationViewPath::class

-طيب وين ملف الميدل وير ..هو اصلا شارح النا فوق برضو يعنى لو مشعارف
-كاتبلك بتروح عالملف هاد
ou may register the package middleware in the app/Http/Kernel.php file:

-ملف الكيرنل
-بعدين بتحطهم بالميثود هادى الى بالملف
protected $routeMiddleware = [

-طيب نروح ع ملف الكيرنال ونضيفهم عنا
-هى المييثود الى عنا كان فيها هدول الميدل وير

protected $routeMiddleware = [
        'auth' => \App\Http\Middleware\Authenticate::class,
        'auth.basic' => \Illuminate\Auth\Middleware\AuthenticateWithBasicAuth::class,
        'bindings' => \Illuminate\Routing\Middleware\SubstituteBindings::class,
        'cache.headers' => \Illuminate\Http\Middleware\SetCacheHeaders::class,
        'can' => \Illuminate\Auth\Middleware\Authorize::class,
        'guest' => \App\Http\Middleware\RedirectIfAuthenticated::class,
        'password.confirm' => \Illuminate\Auth\Middleware\RequirePassword::class,
        'signed' => \Illuminate\Routing\Middleware\ValidateSignature::class,
        'throttle' => \Illuminate\Routing\Middleware\ThrottleRequests::class,
        'verified' => \Illuminate\Auth\Middleware\EnsureEmailIsVerified::class,
    ];

-خلينا نضيف عليهم ال 5 الجداد تعين باكيج اللغات
-صارت زى هيك
protected $routeMiddleware = [
        'auth' => \App\Http\Middleware\Authenticate::class,
        'auth.basic' => \Illuminate\Auth\Middleware\AuthenticateWithBasicAuth::class,
        'bindings' => \Illuminate\Routing\Middleware\SubstituteBindings::class,
        'cache.headers' => \Illuminate\Http\Middleware\SetCacheHeaders::class,
        'can' => \Illuminate\Auth\Middleware\Authorize::class,
        'guest' => \App\Http\Middleware\RedirectIfAuthenticated::class,
        'password.confirm' => \Illuminate\Auth\Middleware\RequirePassword::class,
        'signed' => \Illuminate\Routing\Middleware\ValidateSignature::class,
        'throttle' => \Illuminate\Routing\Middleware\ThrottleRequests::class,
        'verified' => \Illuminate\Auth\Middleware\EnsureEmailIsVerified::class,

        'localize'                => \Mcamara\LaravelLocalization\Middleware\LaravelLocalizationRoutes::class,
        'localizationRedirect'    => \Mcamara\LaravelLocalization\Middleware\LaravelLocalizationRedirectFilter::class,
        'localeSessionRedirect'   => \Mcamara\LaravelLocalization\Middleware\LocaleSessionRedirect::class,
        'localeCookieRedirect'    => \Mcamara\LaravelLocalization\Middleware\LocaleCookieRedirect::class,
        'localeViewPath'          => \Mcamara\LaravelLocalization\Middleware\LaravelLocalizationViewPath::class

    ];

-طيب احنا هلقيت بدنا نروح نحط الميدل وير هاد عالراوت تبعتنا ...قلنا الروات ازا بدنا اياه يكون عليه مبدل وير ..لازم نحطله الميدل وير

-نرجع لملف الويب ونحط الميدل وير عليهم ...الى بنشتغل عليهم قاعدين

-الميدل وير الى بدنا نحطه برضو راح نلاقيه بالموقع

============

You may add middleware to your group like this:

Route::group(
[
	'prefix' => LaravelLocalization::setLocale(),
	'middleware' => [ 'localeSessionRedirect', 'localizationRedirect', 'localeViewPath' ]
], function(){ //...
});

=====================

-راح ناخد الميدل وير هاد الى اعطانى اياه واروح احطه عالرواتات تعينا

-صارو هيك


Route::group(['prefix' => laravellocalization::setLocale(), 'middleware' => [ 'localeSessionRedirect', 'localizationRedirect', 'localeViewPath' ]], function() {

    Route::group(['prefix' => 'offers'], function() {
        //الدرس 46
        //Route::get('store', 'CrudController@store');

        //الدرس47
        Route::get('create', 'CrudController@create');
        Route::post('store', 'CrudController@store')->name('offers.store');

    });

});

-طيب هل ممكن نشيل الميدل وير منها .....عادى طبعا
بس لما تيجى تشيل منها ar او en من فوق مش راح تعملك ريدايركت عليه لما تعمل ريلود للصفحة

-وهيك خلصنا كل خطوات الانستوليشن تبعت الباكيج ...وبعد هيك بدك تعمل اى مشروع بتاخدهم نسخ لصق من هان

-طيب هلقيت بدنا نروح عالفيو تعتنا ..ونعمل فيهم نافبار ..عشان نحط فيه لينك عربى وليك انجليزى ..عشان نضغط عليهم ومنم نحول اللغة

-روح عالبوتستراب وهات النافبار وحطه وعدل عليه ..امسح كل اشى فيه وخلى بس  لينك عشان نشتغل عليهم وخلص ..بصفحة create.blade.php احنا بنشتغل

-طبعا احنا بنتدرب هان ..انت بدك ترجع وتقسم صفحات باللى اوات وتخلى الفوتر لحال والهيدر لحال وهكذا عشان تكمللهم اكستند بكل الصفحات ..ولكن انا عشان اكسب وقت بشتغل ع صفحة واحدة قاعد

-طيب احنا كيف بدنا نحطهم بالنافبار ...برضو الموقع مريحنى وحاكيلى كيف

===========================

Creating a language selector

If you're supporting multiple locales in your project you will probably want to provide the users with a way to change language. Below is a simple example of blade template code you can use to create your own language selector.

<ul>
    @foreach(LaravelLocalization::getSupportedLocales() as $localeCode => $properties)
        <li>
            <a rel="alternate" hreflang="{{ $localeCode }}" href="{{ LaravelLocalization::getLocalizedURL($localeCode, null, [], true) }}">
                {{ $properties['native'] }}
            </a>
        </li>
    @endforeach
</ul>

=============================

-هو هان بيعمل فور لوب عاللغات الى عندك ..يعنى لو عندك لغتين ..راح يجيبلك لينكين ..لو عندك 5 لغات ..راح يعملك 5 لينكات باسماء اللغات كلها المتاحة عندك ال5

-اما باخد الكلام الى اعطانى اياه وبرميه زى ما هو عندى تحت النافبار ..هيك راح يطلعلى اللغات ع شكل روابط ب يو ال

-او

-بدنا نروح عالنافبار ونخلى لينك ..ونعمل عليه فور لوب زى هيك
-انا عملته بالنافبار اليمين ..خليت لينك واحد باليو ال الى عاليمين

<ul class="nav navbar-nav navbar-right">
    @foreach(LaravelLocalization::getSupportedLocales() as $localeCode => $properties)

        <li>
            <a href="{{ LaravelLocalization::getLocalizedURL($localeCode, null, [], true) }}">
            {{ $properties['native'] }}
        </a>
    </li>

    @endforeach

</ul>

-ساهلة جدا ...اخدت الفور ايتش ...وحطيت اللينك فيها
-وباللينك اعطيتها بس التش ريف الى معطينى اياه الى هى اللغة ...واعطيته اسم الرابط الى هو {{ $properties['native'] }} الى هى اسم اللغة يعنى

-هلقيت بالموقع صار عنا بالنافبار فى اللغتين ..وتحت النافبار برضو رابطين لغتين مش مشكلة خليهم ..عشان وانا بدرس اعرف كيف عملت الى بالنافبار

-جرب روح ع ملف config\laravellocalization.php
-وفعل كمان لغتين ولا تلاتة ..راح تلاقيهم ظهرو بالنافبار ...لانو احان عاملين عليهم فور لوب ...يعنى ايش بتفعل لغات ..بيظهر الها رابط معك

-هلقيت روح جرب اضغط عالانجليزى ..راح يجبلك الروات هيك
http://localhost:8000/en/offers/create

-جرب اضغط عالعربية ..راح يجيبلك الراوت هيك
http://localhost:8000/ar/offers/create

-بدون ما نكتبهم بايدينا ك بريفكس ..ولك هى داينمك عنا لانو حطينا البريفكس هاد
'prefix' => LaravelLocalization::setLocale(),

-طيب جرب ارفع كلمة en من الرابط واعمل ريلود ..راح يرجعلك اياها
-لانو حكينا انو الميدل وير الى حطيناه هاد
'middleware' => [ 'localeSessionRedirect', 'localizationRedirect', 'localeViewPath' ]

-لو تقرا عن بالموقع تاع الباكيج ..بقلك انو بخزن اللغة الى انت فيها بالسشن ..يعنى مهما تمسحها راح يرجعلك اياها خلص

-جرب امسحه من الروات ..وروح احذف كلمة en واعمل ريلود للصفحة مش راح يحطلك اياه خلص لانو انت مش حاطط ميدل وير عليه

-طيب فرضا انت ما بدك تظهرلك البادئة en او ar قبل الراوتات تعتك
-بتروح عالملف الى بالكونفيق تبع كل اللغات ..وبتنزل فيه تحت بتلاقى ميثود
    'hideDefaultLocaleInURL' => false,

-خليها ترو ..بيخفيلك اياها من الرابط تبعك خلص

-ولكن لما جربتها بيخفيلى اياها من اللغة  الديفولت ..الانجليزية

-لو جربت تخلى اللغة الديفولت عربى من ملف الكنفيق الى احنا عارفينه ...هان برفعلك البريفكس عن العربى ..ولما تضغط انجليزية بحطله عليها en

-عشان تتاكد انو اللغة بتتغير معنا ..لما تضغط عربى ..لو اعمل ارسال للفورم وهى فاضية ..راح تطلعلك رسايل الخطا بالعربى ..لانو احنا مترجمينها

-طيب لو كان انجليزى راح تطلعلك بالانجليزى

-الدرس الجاية بدنا نترجم الصفحة كلهم عربى وانجليزى عشان كلها تقلب معنا


-قبل نهاية الدرس
-بالنسبة للبريكفس ..حكينا انو بيستخدم كلاس LaravelLocalization
'prefix' => LaravelLocalization::setLocale(),

-وهاد الكلاس مش راضى يتعرف معى ..وعملت الو ايمبورت فوق
use Mcamara\LaravelLocalization\Facades\LaravelLocalization;

-وبرضو عالفاضى ما رضى يتعرف عندى ..وضل عليه خطا احمر لهلقيت
-اولها الموقع ما اشتغل معى كان يقلى
Error
Class 'LaravelLocalization' not found
http://localhost/LaravelCourse/public/offers/create

-بعدين لما عملت الايمبورت برضو نفس القصة
Error
Class 'Mcamara\LaravelLocalization\Facades\LaravelLocalization' not found
http://localhost/LaravelCourse/public/offers/create

-بحثت كتير عن هالقصة ..بالاخير فهمت انها مدعمة بلافيل 6 وانا بشتغل ع 7
-رحت ع مشروع قديم معمول ب6 ..ونزلتها عليه واعملت كل الخطوات ..تعرف عليه بالبريفكس عادى بدون ما اعمله ايمبورت فوق حتى ...واشتغل بدون مشاكل

-المهم ..بالاخير اشتغل معى وهو عليه خط احمر ..كيف بعرفش

-رحت رفعته عالقيت هب ...ورحت سحبت الشغل الجديد ..عالمشروع الى اخدته كلون عندى
LaravelCourse نزلى كل اشى زى ما انا عامل
-بس ما بنزلى البكج طبعا ..انا اعطيته بس اول امر تبع تنزيل الباكيج وخلص
-ورحت فتحت المشروع برضو ملف الويب فيه خط احمر برضو الكلاس هو هو
-بس لما شغلته اشتغل عادى وكان يحولى اللغة

=======================

-فى فيديو عاليوتيوب ...بيشرح المكتبة هاى بطريقة اسهل وحلوة وفيها معلومات اكتر
https://www.youtube.com/watch?v=jG00K9R9_04&list=LL&index=2&ab_channel=AlgorithmAcademy

-فيديو مهم وضرورى فى اشياء المهندس ما شرحها ..زى الميثود هيلبرز الموجود بالباكيج
بتنزل بموقع الباكيج تحت بتلاقيهم ..كتار

-منهم

Get Supported Locales
Return all supported locales and their properties as an array.

{{ LaravelLocalization::getSupportedLocales() }}

-هاد الهيلبر ..بتعرضلنا كل اللغات الى انا فعلتها بملف الكنفقريشن

Get Supported Locales Custom Order
Return all supported locales but in the order specified in the configuration file. You can use this function to print locales in the language selector.

{{ LaravelLocalization::getLocalesOrder() }}

-بتعضلنا الاوردر تبع اللغات الى عنا

Get Current Locale
Return the key of the current locale.

{{ LaravelLocalization::getCurrentLocale() }}

-بتعرضلك اللغة الحالية المستخدمة بالموقع اختصار اما en او ar

Get Current Locale Name
Return current locale's name as string (English/Spanish/Arabic/ ..etc).

{{ LaravelLocalization::getCurrentLocaleName() }}

-بتعرضلك اسم اللغة المستخدمة حاليا ك اسم كامل مش اختصار Arabic  او English

Get Current Locale Native Name
Return current locale's native name as string (English/Español/عربى/ ..etc).

{{ LaravelLocalization::getCurrentLocaleNative() }}

-بتعرضلك اسم اللغة بنفسه لغته يعنى English او العربية

=======

Get Current Locale Direction
Return current locale's direction as string (ltr/rtl).

{{ LaravelLocalization::getCurrentLocaleDirection() }}

-اخر حاجة مهمة ...لما يكون الموقع عربى لازم التجاه يكون rtl
-اما لو كان انجليزى بكون الاتجاه ltr

-عنا برضو هيلبر فنكشن بتساعدنا عشان نجيب الاتجاه بناءا عاللغة

-انا جربتهم كلهم ال 6 بالصفحة عنا وطبعولى صح ..ما عدا اول تنيتن ما اشتغلو بقلى بدهم تمررهم باراميتر ..ف وقفتهم

{{-- camara package helpers --}}
<div>
    {{-- <span> {{ LaravelLocalization::getSupportedLocales() }} </span>
    <span> {{ LaravelLocalization::getLocalesOrder() }} </span> --}}

    <span> {{ LaravelLocalization::getCurrentLocale() }} </span> |
    <span> {{ LaravelLocalization::getCurrentLocaleName() }} </span> |
    <span> {{ LaravelLocalization::getCurrentLocaleNative() }} </span> |
    <span> {{ LaravelLocalization::getCurrentLocaleDirection() }}
    </span>
</div>

-لما اضغط عربى ...بيطبعولى
ar | Arabic | العربية | rtl

-لما اضغط انجليزى بيطبعولى
en | English | English | ltr

-طيب هلقيت لو بدى اخلى صفحتى الاتش تى ام ال ..داينمك
-كنا زمان نكتبلك براس الفصحة فوق
<!DOCTYPE html>
<html lang="en">

-صح
ولو بدنا اياها عربى نقله اللغة ar
<!DOCTYPE html>
<html lang="ar">

-طيب انا هان بصفحة create ازا بتتزكر زمان اخدتها نسخ لص من صفحة الويلكم وعدلت عليها

-مكتوب فيها اللغة هيك
<!DOCTYPE html>
<html lang="{{ str_replace('_', '-', app()->getLocale()) }}">

-لو تروح عالانسبكت بتلاقيها <html lang="en">
-ولو اغير اللغة ل عربى بلاقيها بالانسبكت صارت
-لو تروح عالانسبكت بتلاقيها <html lang="ar">

-طيب بما انو احنا بنشتغل بباكيج الكامرا ...ممكن استخدم الدالة تعتها الى بتحطلى اختصار اللغة حكينا بدل ما هى هيك

-ولو خليتها بالشكل الى فوق برضو صح لانو بالانسبكت بتتغير معى لقيتها عادى

-طيب لو بدنا نشغلها بميثود الكامارا ..بدها تصير هيك

<!DOCTYPE html>
<html lang="{{ LaravelLocalization::getCurrentLocale() }}">

-اشتغلت معى تمام ..وبالانسكبت بتتغير حسب اللغة الى انا مختارها برضو

-طيب بدا نضيف اتجاه الصفحة هلقيت ..زمان كنا نضيف اتجاه الصفحة فوق برضو زى هيك
<html lang="en" dir="ltr">

-اوا ازا بدى الصفحة عربى اقله
<html lang="ar" dir="rtl">

-طيب هلقيت بدنا نخليها اوتوماتيك عن طريق الدالة الى بتعطينى الاتجاه

<html lang="{{ LaravelLocalization::getCurrentLocale() }}" dir="{{ LaravelLocalization::getCurrentLocaleDirection() }}">

-وهيك صار عنا للغة دالة تحطها اوتوماتيك ..وللاتجاه دالة تحطه اوتوماتيك
-ولو خليت دالة الاتجاه القدية تعت لارافيل ..مع دالة الداير تعت كامارا عادى برضو

<html lang="{{ str_replace('_', '-', app()->getLocale()) }}" dir="{{ LaravelLocalization::getCurrentLocaleDirection() }}">

-هلقيت لو انت انجليزى راح تكون الصفحة من الشمال ..لو تضغط عاللغة العربية راح تقلب معك الصفحة كلها من اليمين

-اخر معلومة ...لو انت حابب تغير باسم اللغة ...مسلا العربية ....بيكتبلك اياها "العربية " هو ...طيب مسلا انت بدك اياه عربى مسلا مش عربية

-بتغيرها من ملف الككونفيق عادى
        'ar'          => ['name' => 'Arabic',                 'script' => 'Arab', 'native' => 'العربية', 'regional' => 'ar_AE'],

-بتتغير من هان من native غيرها لاى حاجة

===============================================================================

   #053 - Laravel localization translate all page use (mcamara Package)

-بدى اترجم صفحة ال create.blade.php كلها ...اترجم الفورم والعنوان والى ذلك
اترجمهم بملف message.php العربى والانجليزى

//create.blade.php
    'Add Your Offer'  => 'Add Your Offer',
    'offer name'  => 'Offer Name',
    'offer price'  => 'Offer Price',
    'offer details'  => 'Offer Details',
    'send'  => 'Send',

//create.blade.php
    'Add Your Offer'  => 'اضافة عرض جديد',
    'offer name'  => 'اسم العرض',
    'offer price'  => 'سعر العرض',
    'offer details'  => 'تفاصيل العرض',
    'send'  => 'ارسال',

-وكتبتهم بالفورم بطريقة الترجمة
 <label for="offerdetails">{{ __('messages.offer details')}}</label>
<input type="text" class="form-control" name="details" id="offerdetails" placeholder="{{ __('messages.offer details')}}">

-ع فكرة لو الكى ما كان مترجم بملف اللغة ..مش راح يطلعك خطا...بيشتغل عادى بس بيكتلبلك الكلمة زى ما هى ..زى هيك مسلا messages.offer details

-ولو مسلا نسيت تكتب ملف الترجمة قبل الكى زى هيك مسلا {{ __('offer details')}}
-برضو مش راح يطلعلك خطا ...راح يحطلك الكلمة الموجودة هادى offer details

================================================================================

              #054 -Improve your code - اكتب كود محترف

-قبل ما نشرح مكتبة الكامارا ...تعلمنا كيف نعمل الايرو مسج وكيف نعمل الفالديت تعتها

-وطورنا الكود برطيقة احترافية خلينا الفالديت بميثود لحالها والمسج بميثود لحالها ..برا الميثود الستور

-اليوم بدنا نطور من الكود تبعنا اكتر واكتر ...بدنا نعمل الفالديت بصفحة لحاله برا الكنترولر خالص ...عن طريق كلاس اسمه ريقويست

-خلينا نشوف كيف

-كانت عنا صفحة الكنترولر CroudController زى هيك
protected function getRoles(){
        return $rules = [
            'name' => 'required|max:10|min:3|unique:offers,name',
            'price' => 'required|numeric',
            'details' => 'required',
        ];
    }

    protected function getMsg(){
        return $messages = [
            'name.required'    => __('messages.oferr name required'),
            'name.max'         => __('messages.oferr name max'),
            'name.min'         => __('messages.oferr name min'),
            'name.unique'      => __('messages.oferr name unique'),
            'price.required'   => __('messages.oferr price required'),
            'price.numeric'    => trans('messages.oferr price numeric'),
            'details.required' => trans('messages.oferr details required'),
        ];
    }

    public function store(Request $request){

        //validate data befor insert to DB

        $rules = $this->getRoles();
        $messages = $this->getMsg();

        $validator = Validator::make($request->all(), $rules, $messages);

        if($validator -> fails()){
            return redirect()->back()->withErrors($validator)->withInput($request->all());
        }

        //insert
        Offer::create([
            'name'    => $request->name,
            'price'   => $request->price,
            'details' => $request->details,
        ]);

        return redirect()->back()->with(['success' => 'تم اضافة العرض بنجاح']);

    }

-هلقيت احنا مش محتاجين لا نعمل ميثود للمسجات ولا ميثود للفالدديت كمان

-راح امسحهم ...او اوقفهم عشان اخليك تتزكر الكود القديم كيف كان

-الطريقة هادى الى بدنا نعملها ..هى الطريقة الاحترافية جدا وبدنا نصير نتبعها بكل شغلنا بعد هيك خلص

-بدنا نفصل الريقويست الى عنا بالفالديشن تعته ..كله برا الكنترولر

-الكنترولر الى عنا مهتم بالاوفر ..يبقى الريقويست تبعته بدنا نخليه برا بملف تانى ..ونسمى الريقويست باسم اوفر مسلا عشان يدل عالكنترولر هاد الى احنا فيه تاع المنتجات والعروض

-بدنا نروح نعمل ملف اسمه ريقويست برا ..بدل الريقويست الى كان يجيلى من لارافيل الى كنا نحطه بدالة الستور store(Request $request) بدل الريقويست هاد
-بدنا نعمل ريقويست بملف برا الكنترولر كله

-بنعمل الريقويست بالامر هاد ..وبنعطيه اسم الريقويست ..بما انو احنا بنشتغل بالاوفر يبقى بدنا نسميه offerRequest مسلا

php artisan make:request offerRequest

-هاد الامر راح يعملى فولدر اسمه Request داخل فولدر Http
app\Http\Requests
-داخله كلاس اسمه offerRequest.php

-خينا ننفذ الامر ونشوف
C:\xampp\htdocs\Laravel_Course (master -> origin)
λ php artisan make:request offerRequest
Request created successfully.

-عملى الفولدر ودخله الكلاس
<?php

namespace App\Http\Requests;

use Illuminate\Foundation\Http\FormRequest;

class offerRequest extends FormRequest
{
    /**
     * Determine if the user is authorized to make this request.
     *
     * @return bool
     */
    public function authorize()
    {
        return false;
    }

    /**
     * Get the validation rules that apply to the request.
     *
     * @return array
     */
    public function rules()
    {
        return [
            //
        ];
    }
}

-وعامل الى جوا الكلاس فنكشن اسمها
public function rules()
    {
        return [
            //
        ];
    }

-فيها بدنا نحط شغل الرولز تاع الفالديت الى كنا نعمله بالكنترولر
-يعنى الكلاس هادا ..عبارة عن مكان بعمل فيه الفالديشن تعتى

-هلقيت بدنا نروح عالكنترولر ..ونمسح الميثود المسجات وميثود الفالديت
ومن دالة الستور نشيل كل اشى ..بس نخلى الميثود الى بتخزن الى بالداتا بيز ..الكريت الى بتعملى انسيرت ..يعنى بدنا نشيل منها كل اشى بيتعلق بالفالديت

-وبدالة الستور نفسها ...بدل ما كنا ناخد الريقويست الى بيجى الى من اللارافيل
لا بدنا ناخد الكلاس هاد الى عملته ...ولما نحطله بالدالة ..لازم ينعمل الو ايمبورت فوق خلى بالك
-انت اول ما تكتبه لحاله راح يطلعله ..بتضغط انتر بيعملك ايمبورت لحاله
-وراح تلاحظ بعد ما وقفنا الريقويست والفالديت ...عم عليهم لون فاتح فوق عالايمبورت تبعهم ..لانو خلص احنا ما استخدمناهم بالكنترولر عنا

-طيب صارت ميثود الستور بس هيك
-وهاد الكلام بتعمله باى ميثود بدك تحطلها فالديت سواءا ستور ولا ابديت ولا اى حاجة بتحط فيها كلاس الفالديت الخارجى هاد

public function store(offerRequest $request){

        //insert
        Offer::create([
            'name'    => $request->name,
            'price'   => $request->price,
            'details' => $request->details,
        ]);

        return redirect()->back()->with(['success' => 'تم اضافة العرض بنجاح']);

    }

-هلقيت بدنا ناخد الاريه تعت الفالديت لحالها الى مسحناها ..ونحطها بالكلاس الجديد بميثود الرولز الى فيها

-صارت الميثود هيك

public function rules()
    {
        return [

                'name' => 'required|max:10|min:3|unique:offers,name',
                'price' => 'required|numeric',
                'details' => 'required',

        ];
    }

-وهيك خلص شغلنا

-هلقيت روح عالموقع وجرب اعمل ارسال للفورم وهى فاضية ..يعنى فيها ايرور

-اااه بعتنا ع راوت الستور
http://localhost:8000/ar/offers/store

- وطلعلى خطا
403
This action is unauthorized.

-شو معناه هاد الخطا ...بقلى انو انت ما بتقدر تستخدم هاد الريقويست

-سهلة جدا ...بدنا نرجع عالريقويست الى عملنا راح تلاقى الاوثورايز ب فولس
خليها ترو

public function authorize()
    {
        return false;
    }

-بدنا نعملها true وخلص هيك بيسمحلنا انو احنا نستخدمه للريقويست هاد

public function authorize()
    {
        return true;
    }

-وهيك اشتغل معى ....وبنكون عملنا كود فالديشن احترافى
-وكود الكنترولر اختصرناه لابعد الحدود

-خلى بالك ..بالشغل القديم احنا كنا نقله ازا فى عنا ايرور ..ارجعلى للصفحة السابقة بالايرورات هادى ..زى هيك
return redirect()->back()->withErrors($validator)->withInput($request->all());

-ولكن هان هو من حالو بيعملها ..ولا بنقله ارجع ولا مترجعش ....ازا لقى ايرور بالفالديت لحالها بطلعلى الايرور وبيعمل ريدايركت لحاله

-طيب لما جربنا ...طلعلنا رسايل الايروو ..الديفولت تبعت لارافيل ..طيب كيف بدنا نخلى يطلعلنا رسايلنا احنا الى كنا ترجمناها

-بالاول كنت عامل ميثود للرسايل زى ميثود الفالديت ...طيب هان زى ما عملنا الفالديت بالكلاس الخارجى ..بدنا نعمل المسج برضو زيها باكلاس الخارجى

-بدنا نروح بالكلاس نعمل ميثود اسمها messages() نحطها تحت ميثود الرولز الى هو كان عاملى اياها بالاساس ...ولكن هاى ميثود المسج انا بدى احطها

-صارت زى هيك

public function rules()
    {
        return [

                'name' => 'required|max:10|min:3|unique:offers,name',
                'price' => 'required|numeric',
                'details' => 'required',

        ];
    }

public function messages()
    {
        return [
            'name.required'    => __('messages.oferr name required'),
            'name.max'         => __('messages.oferr name max'),
            'name.min'         => __('messages.oferr name min'),
            'name.unique'      => __('messages.oferr name unique'),
            'price.required'   => __('messages.oferr price required'),
            'price.numeric'    => trans('messages.oferr price numeric'),
            'details.required' => trans('messages.oferr details required'),
        ];
    }

-انا اول ما كتبت اول حرفين من الميثود طلعلى اياها لحاله اصلا

-طيب السؤال هادى من الميثود من وين اجت

-انت لو تطلع فوق بالكلاس راح تلاقى انو مكعمول اكستند من
class offerRequest extends FormRequest

-هاد الكلاس FormRequest لو تضغط عليه كنترول وكلك شمال راح يفتح
-لو تفوت عليه راح تلاقي فيه الميثود مسج هادى ..واحنا اخدناها واعملنا اوفر رايد عليها

-هيها
public function messages()
    {
        return [];
    }

-وبتلاقى فيه كل اشى ...حتى الميثود الى بتعمل ريدايركت مبنية وجاهزة فيه

-يعنى الميثود هادى messages() مش من عنا مش من راسنا كتبناها

-هلقيت روح جرب الموقع ..وارسل الفورم فاضية ..راح يرجعلك المسجات الى احنا كتبناها ..مش الديفولت تبعت لارافيل ...وهو اعتقد مش حاططها للميثود هادى باكلاس ..لانو هو عمللنا اياها ديفولت ..وانت ازا بدك تغير الرسايل تحطها من عندك ...بستدعيها زى ما عملنا وبتعمل عليها اوفر رايد

-وهيك وصلنا لكود نضيف واحترافى ..اصبح ميثود الستور الى بالكترولر فيها بس الانسيرت عالداتا بيز ..اما الفالديت والمسجات الى قبل الانسيرت الى بنعملهه ..كله هاد بكلاس ريقويست خارجى

================================================================================

  #055-Laravel How To save data in multi language database تعدد اللغات بالموقع

-بدنا نتعلم كيف نخزن البيانات تعتنا بالداتا بيز باللغتين الى عنا
-وبناءا ع اللغة الى انا فيها يطلعلى البيانات
-يعنى بدنا نحط بالداتا بيز بدل عمود الاسم name بدنا نعمل بداله عمودين
name_ar  و  name_en

-وكذلك التفاصيل بدل عمود details بدنا نمسحه ونحط بداله عمودين
details_ar و  details_en

-السعر وال اى دى مهما ارقام عادى ما راح تفرق

-وكذلك راح نروح عالفورم ...ونحذف حقل الاسم ..ونحط بداله حقلين عربى وانجليزى
-وحقل التفاصيل كذلك نحذفه ونحط بداله حقلين عربى وانجليزى

-يعنى اليوزر لما يجى يدخلى عرض جديد ...بدو يكتبلى اسم بالعربى وبالانجليزى وتفاصيله بالعربى وبالانجليزى

-وما دام احنا غيرنا عمدة الجدول ...يبقى لازم نروح عالمودل ونغير الفيلبل الى فيه اكيد ...بنمسح من الفيليل الاسماء القديمة وبنحط ال4 اعمدة الجداد ..الاسم عربى وانجليزى والتفاصيل عربى وانجليزى

-وبدنا نفضى جدول الاوفر كله من العرضو القديمة ..عشان نبدا ندخل عروض جديدة
باللغتين

-عشان بدنا نعمل صفحة جديدة ..فيو نعرض فيها كل العروض الى عنا بالداتا بيز نسميها مسلا all offer ونعمل الها راوت والروات تبعها يكون جوا ميدل وير اللغات ..عشان بدنا نطبق عليه اللغات

بشكل جدول ..ناخده من البوتستراب ..هادى الصفحة بدى اعرض فيها بيانات العروض الى عنا كلها بجدول ..والجدول بدو يكون فيه بس الاسم والتفاصيل ...بدون ما نحط فيه الاسم بالعربى وبالانجليزى ..والتفاصيل بالعربى وبالانجليزى ...لا ...بس اسم وتفاصيل وخلص ...بناءا عاللغة ..ازا كنت عربى ..يعرضلى بالجدول الاسم والتفاصيل بالعربى ...وازا كنت باللغة الانجليزى ..يعرضلى الاسم والتفاصيل الانجليزى

-وبدى اصير لما اكون لغة عربية ..يجيبلى اسم العرض وتفاصيلو الى بالعبرى ....ولما اكون لغة انجليزية يجيب اسم العرض وتفاصيله الانجليزى ...وراح نتعلم كيف

==========

-نبدا بشغلنا وبدى اعمل كل الى كتبته فوق

-ضفت الحقول ال 4 بالداتا بيز ومسحت الحقلين القدام ..وفضيت الجدول

-رحت عالمودل وغيرت الفيلبل
protected $fillable = ['name_ar', 'name_en', 'details_ar', 'details_en', 'price', 'created_at', 'updated_at'];

-وكذلك رحنا ع ميثود الستور وغيرنا جملة الانسيرت الى بتعمل انسيرت للبيانات عالداتا بيز ...كانت هيك
//insert
Offer::create([
    'name'    => $request->name,
    'price'   => $request->price,
    'details' => $request->details,
]);

-صارت هيك
//insert
Offer::create([
    'name_ar'    => $request->name_ar,
    'name_en'    => $request->name_en,
    'price'      => $request->price,
    'details_ar' => $request->details_ar,
    'details_en' => $request->details_en,
]);

-وكذلك بدنا نعدل ميثود الرولز وميثود المسج الى بكلاس offerRequest الى بيعمللنا الفالديت والرسايل

-كانت هيك
public function rules()
    {
        return [

                'name' => 'required|max:10|min:3|unique:offers,name',
                'price' => 'required|numeric',
                'details' => 'required',

        ];
    }

    public function messages()
    {
        return [
            'name.required'    => __('messages.oferr name required'),
            'name.max'         => __('messages.oferr name max'),
            'name.min'         => __('messages.oferr name min'),
            'name.unique'      => __('messages.oferr name unique'),
            'price.required'   => __('messages.oferr price required'),
            'price.numeric'    => trans('messages.oferr price numeric'),
            'details.required' => trans('messages.oferr details required'),
        ];
    }

-صارت هيك
public function rules()
    {
        return [

                'name_ar' => 'required|max:30|min:3|unique:offers,name_ar',
                'name_en' => 'required|max:30|min:3|unique:offers,name_en',
                'price' => 'required|numeric',
                'details_ar' => 'required',
                'details_en' => 'required',

        ];
    }

    public function messages()
    {
        return [
            'name_ar.required'    => __('messages.oferr name required'),
            'name_ar.max'         => __('messages.oferr name max'),
            'name_ar.min'         => __('messages.oferr name min'),
            'name_ar.unique'      => __('messages.oferr name unique'),
            'name_en.required'    => __('messages.oferr name required'),
            'name_en.max'         => __('messages.oferr name max'),
            'name_en.min'         => __('messages.oferr name min'),
            'name_en.unique'      => __('messages.oferr name unique'),
            'price.required'      => __('messages.oferr price required'),
            'price.numeric'       => trans('messages.oferr price numeric'),
            'details_ar.required' => trans('messages.oferr details required'),
            'details_en.required' => trans('messages.oferr details required'),
        ];
    }



-هلقيت بدى اروح عالفورم وامسح ..الحقلين القدام واعمل ال 4 الجداد
والى اكتبهم فيهم اترجمهم بملفات الترجمة برضو ..اوعى تنساهم بالترجمة

-خلصنا من الفورم ومن ملفات الترجمة وكلو تمام

-خلينا ندخل كم من عرض عالسريع ...دخلت 3 جوالات ..جوال سامسونج A12
وسامسونج A31 وسامسونج A51

================

-نروح نعمل صفحة allOffer.blade.php عشان نعرض فيها البيانات من الداتا بيز

-اوا حاجة بدى اعمل الها روات ..والروات يكون بالميدل وير تعت اللغات
والروات يبعتنى ع ميثود بالكنترولر ..والميثود هادى تعملى ريتورن للفيو الى بدنا نعملها ونحط فيها الجدول

Route::group(['prefix' => 'offers'], function() {
        //الدرس 46
        //Route::get('store', 'CrudController@store');

        //الدرس47
        Route::get('create', 'CrudController@create');
        Route::post('store', 'CrudController@store')->name('offers.store');
        Route::get('all', 'CrudController@getAllOffers');

    });

-عملنا الروات تاعنا ..وفيه الميثود
Route::get('all', 'CrudController@getAllOffers');

-يبقى لازم اروح عالكنترولر واعمل الميثود getAllOffers

-رحنا عالكنترولر واعملنا الميثود
-الميثود هادى شو وظيفتها ...تجيبلى البيانات من الداتا بيز
-طيب هلقيت خلينى قاعد بشتغل كانى عالشغل القديم لسا
-بدنا نعمل سيليكت عالبيانات الى بالدات بيز
  Offer::select('id', 'name', 'price', 'details')

-بما انو بدنا نعمل سيليكت ع كل البيانات الى بادات بيز يبقى لازم نستخدك دالة القيت ..ولقدام لسا راح نشرح شو الفرق بينها وبين first()
  Offer::select('id', 'name', 'price', 'details') -> get();

-بما انو انا بدى اجيب كل البيانات ..يبقى راح استخدم دالة القيت
-القيت هاى بتجيلى كل البيانات الى بالداتا بيز ع شكل كوليكشن
-الكوليكشن يعتبر من اهم الحاجات الى راح تشتغل فيها بلارافيل بالمشاريع
لانو انت اكتر حاجة بتجيب البياانت بكولكشن ..وبتعمل عليها شغل وعمليات وبترجعها بالفيو تبعك

-طيب بدنا نحطها بمتغير هلقيت عشان نمررها للفيو واعرضها هناك ....وليكن المتغير نسمسه $offers مسلا

        $offers = Offer::select('id', 'name', 'price', 'details') -> get();

-بدنا نمرره للفيو عشان اعرضها بالفيو ..عنا اكتر من طريقة لتمرير البيانات حكينا
خلينا نستخدم الكومباكت مسلا

-صارت الميثود عنا هيك

-وهلقيت خلينا نروح نعمل الفيو هادى بفولدر الاوفرز مع فيو الكرييت يعنى كلهم بملف واحد نخليهم

-بدى انسخ صفحة الكرييت ..وامسحها كلها اخلى بس النافيبار فيها بالبادى بس عاشن اعمل سويتش ما بين اللغات يعنى

-ونعمل الجدول تحت النافبار
-زرت الصفحة وكلو تمام عرضتلى الجدول فاضى

-هلقيت بدنا نخلى بس رو العناوين عنا ...ورو واحد بس عشان نعمل عليه لوب وخلص
-الرو بدنا نعمل فيه 4 خلايا ..اى دى واسم وسعر وتفاصيل

<div class="table-responsive">
    <table class="table text-center table-bordered ">
    <tr>
        <td>#ID</td>
        <td>Offer Name</td>
        <td>Offer Price</td>
        <td>Offer Details</td>
        </tr>

        <tr>
        <td class="success">...</td>
        <td class="warning">...</td>
        <td class="danger">...</td>
        <td class="info">...</td>
        </tr>

    </table>
</div>

-هلقيت نرجع الميثود عشان نمرر الها البيانات للفيو واعرضها بالفيو
public function getAllOffers(){
        $offers = Offer::select('id', 'name', 'price', 'details') -> get();
        return view('offers/alloffers', compact('offers'));
    }

-هلقيت نروح عالفيو نستلم البيانات لانو خلص الفيو شاف البيانات الى وصلتو بعد ما مررتها

-بدنا نعمل فور لوب عالرو الى احنا الى بدنا نعرض فيه البيانات
<div class="table-responsive">
    <table class="table text-center table-bordered ">
    <tr>
        <td>#ID</td>
        <td>Offer Name</td>
        <td>Offer Price</td>
        <td>Offer Details</td>
        </tr>

        @foreach ($offers as $offer)
        <tr>
        <td class="success">{{ $offer -> id}}</td>
        <td class="warning">{{ $offer -> name}}</td>
        <td class="danger">{{ $offer -> price}}</td>
        <td class="info">{{ $offer -> details}}</td>
        </tr>
        @endforeach
    </table>
</div>

-هاد الكلام كلو عالشغل القديم لما كان الجدول فيه بس اسم وسعر وتفاصيل ..لو جربته هان قبل ما امسحه واعدل عليه راح يشتغل معك عادى

-طيب هلقيت نيجى نشوف شغلنا الجديد ...وكيف بدنا نعدل عليه عشان نعرض حسب اللغة عنا

==============
-خلينى اترجم عناوين الجدول قبل ما ننسى بملف الترجمة
//all.blade.php   table header
    'Offer Name' => 'اسم العرض',
    'Offer Price' => 'سعر العرض',
    'Offer Details' => 'تفاصيل العرض',

//all.blade.php   table header
    'Offer Name' => 'Offer Name',
    'Offer Price' => 'Offer Price',
    'Offer Details' => 'Offer Details',

<tr>
    <td>#</td>
    <td>{{ __('messages.Offer Name')}}</td>
    <td>{{ __('messages.Offer Price')}}</td>
    <td>{{ __('messages.Offer Details')}}</td>
</tr>
===============

-هلقيت بدنا نعرض كل البيانات بالجدول الى عنا ..حسب اللغة الى انا اخترتها

-يعنى بدى ارجع البيانات من الداتا بيز حسب اختيار لغة الزبون

-احنا بالشغل القديم كنا نرجع البيانات هادى
public function getAllOffers(){
        $offers = Offer::select('id', 'name', 'price', 'details') -> get();
        return view('offers/alloffers', compact('offers'));
    }

-طيب انا صار عندى الاسم 2 والتفاصيل 2 انجليزى وعربى
-يعنى بدى اقله
public function getAllOffers(){
        $offers = Offer::select('id', 'name_ar', 'name_en', 'price', 'details_ar', 'details_en') -> get();
        return view('offers/alloffers', compact('offers'));
    }

-طيب انا هيك رجعت الانجليزى والعربى انا شو استفدت هان يعنى ...لا انا بدى ارجع يا انجلزى لحاله يا عربى لحاله ...حسب ما هو مختار

-كيف بدنا نعمل الجزئية هادى لو انت حابب تشتغل موقعك متعدد اللغات

-احنا حكينا انو باكيج الكامارا ...اعطتنى دالة بتجيبلى اللغة الحالية الى انا فيها صح ..الى بتعرضلى en او ar حسب اللغة الى انا اخترها
{{ LaravelLocalization::getCurrentLocale() }}

-طيب ليش ما نستفيد منها هان
-بدل ما اقله 'name_ar' و 'name_en'

-بقله
'name_'.LaravelLocalization::getCurrentLocale()

-عملتلها ابيند عليها بعد الاندر سكور ...كونكات يعنى
-ازا هيك عربى ...راح تكون name_ar
-ازا هيك انجليزى name_ar

-طيب هلقيت خلينا نسمي الحقل هاد بطريقة الالياس ..عشان استخدمه بالجدوال لما يصلنى مع تمرير البيانات ..لانو انا هناك بالجدول ما بعرف هو عربى ولا انجليزى الى راح يصلنى ....بالتالى انا بدى اقله سواء هو اسم عربى ولا اسم انجليزى ..اعطيه الياس as name

-يعنى بدنا نعمل كمان ابيند عليهم ل as name
-بنعمل كونكات بعدين بنفتح الكوت وبنعطى مسافة وبنكتب as بعدين الاسم الالياس
-بدها تصير

'name_'.LaravelLocalization::getCurrentLocale().' as name'

-كانى بقله يعنى
'name_ar as name'   او   'name_en as name'

-اوعى تحط مسافة بعد name الالياس ...بدو يصير الاسم عندى name وبعده مسافة الى بدك تتعامل معو بالجدول ..خلى بالك هاى نقطة مهمة وبتخربط

-بدها تصير عنا ميثود القيت اوول

public function getAllOffers(){
        $offers = Offer::select('id', 'name_'.LaravelLocalization::getCurrentLocale().' as name', 'price', 'details_'.LaravelLocalization::getCurrentLocale().' as details') -> get();
        return view('offers/alloffers', compact('offers'));
    }

-هلقيت الى تمرر معى 'id'  'name'  'price'  'details'

-نروح للجدول بالفيو عشان نستقبلهم
@foreach ($offers as $offer)
    <tr>
    <td class="success">{{ $offer -> id}}</td>
    <td class="warning">{{ $offer -> name}}</td>
    <td class="danger">{{ $offer -> price}}</td>
    <td class="info">{{ $offer -> details}}</td>
    </tr>
@endforeach

-وهيك كل شغلنا تمام ...روح زور الرابط الانجليزى
http://localhost:8000/en/offers/all

-راح يطبعلك


#	Offer Name	        Offer Price	 Offer Details
15	Samsung Phone A12	900	         Ram 4 GB
16	Samsung Phone A31	1100  	     Ram 6GB
17	Samsung Phone A51	1300	     Ram 8GB

-زور الرابط العربى
http://localhost:8000/ar/offers/all

-راح يطبعلك

#	اسم العرض	سعر العرض	تفاصيل العرض
15	جوال سامسونج A12	900	رام 4 جيجا
16	جوال سامسونج A31	1100	رام 6 جيجا
17	جوال سامسونج A51	1300	رام 8 جيجا

===============================================================================

   #057 - Laravel How to update database using multi language data part 1


-كيف نعمل ايديت وابديت للبيانات ...اول شى بنعمللها تعديل بعدين تحديث

-زى كل مرة راح نتعلم الحاجة بالطريقة العادية بعدين نتعلها بالطريقة الاحترافية

-اول حاجة عشان نعمل ايديت ..يبقى لازم يكون عنا روات .. يعنى انا عندى عنرض معين موجود عنا بالداتا بيز ب اى دى معين ..ما بيتكرر يعنى
-راح نجيب بياناته ونعرضها بفورم زى فورم صفحة الكرييت ..بمجرد انو هو يضغط ع زر الايديت .. يبعته ع راوت ..يعرضله الفور هادى وفيها البياانت تبعت العرض الموجودة ةبالداتا بيز ..زى شغلنا القديم ايام الزيرو ..مفهومة الايديت كيف

-زر التعديل هاد ..بدنا نحطه جنب كل عرض ..بصفحة الاوول الى بتجيبلنا العروض كلها الى عنا ...ونعمل خانة جديدة بالجدول نحط فيها زر تعديل ..يضغط عليه تبعته ع روات تانى تبعت التحديث فيه الفورم بالبيانات ...وتحت الفورم زر للابديت ...يبعته ع راوت من نوع بوست هو الى يعمل ابديت بالداتا بيز

-يبقى اول حاجة بدنا نعمل راوت ..الروات يبعت عالكنترولر ..والكنترولر يبعت عالفيو الى بدنا نعملها

-بدنا نروح عالروات القروب تاع تعدد اللغات ..زى ما عملنا رواتين كرييت وستور
بدنا نعمل تحتهم رواتين ..ايديت وابديت

-خلى بالك الايديت راح ياخد منى باراميتر والابديت راح ياخد باراميتر برضو ..الى هو ال اى دى الى بيجى الى لما اضغط ع زر الايديت ...بدى ابعت معو باراميتر ال اى دى تبع العرض نفسه الى انا ضغطت عليه ...وال اى دى هاد استقبله عندى فوق بالروات
-وضحت الصورة

-نعمل الرواتس
-الايديت راح تكون من نوع قيت ..والابديت من نوع بوست او باتش فش مشكلة يعنى
Route::get('edit', 'CrudController@editOffer');
Route::post('store', 'CrudController@updateOfeer')->name('offers.update');

-بالنسبة لاسماء الميثودات انت سمى الى بدك اياها ....احنا هو لو الكنترولر تبعنا اسمه offerController خلص عادى لو اقله offerController@edit
او اقله offerController@update لو لو حد اجى يقرا الكود اكيد راح يعرف انا بعمل ايديت وابديت لمين .....اكيد للاوفر يعنى مهى مبينة

-طيب نروح هلقيت لصفحة الاوول ..ونحط زر الايديت عنا ونترجمه كمان عشان ما ننسى
-نعمل الزر ونحط فيها رابط الاتش ريف تبعته بدها تبعتنى ع راوت الايديت الى عملته
وانقل معو ال اى دى ...عشان استقبله بالروات


-طيب عملنا زر التحديث ...مفروض لما اضغط عليها هلقيت يبعتنى ع روات يعملى ايديت للعرض الى انا ضغط عليه بال اى دى تبعه

-يبقى بدنا نحطله href  كيف بدنا نكتب الاتش ريف
href="{{url('offers/edit/'.$offer->id)}}"

-كتبنا الروات ..وعملنا ابيند عليه ..بالكونكات ..الى هو الاى دى الى عنا

-صار عنا الجدول هيك
@foreach ($offers as $offer)
    <tr>
    <td class="success">{{ $offer -> id}}</td>
    <td class="warning">{{ $offer -> name}}</td>
    <td class="danger">{{ $offer -> price}}</td>
    <td class="info">{{ $offer -> details}}</td>
    <td class="default">
        <a href="{{url('offers/edit/'.$offer->id)}}"  class="btn btn-success">
            {{ __('messages.Edit')}}
        </a>
    </td>
    </tr>
@endforeach

-بنقله اسم الروات الى عنا اوفر ..بعدين ايديت ..بعدين رقم الاى دى ..عشان استلمه بالراوت وامرره للميثود عشان على الاى دى هاد اشتغل شغلى بالميثود واجيب بياانات الاى دى نفسه الى وصلنى من الداتا بيز واعرضها


-لانو الروات تبع الايديت بدو ياخد منى اى دى او اوفر اى دى ..سميه اى اشى تحبه
        Route::get('edit/{offer_id}', 'CrudController@editOffer');

-وراح ناخد ال offer_id هاد الى وصلنى عاكنترولر ع ميثوط editOffer
عشان اخليها تعدل عليه

-نروح نعمل الميثود ...والميثود راح تاخد منى باراميتر خلى بالك سميه اى اسم برضو بس عشان ما تتخربط سميه برضو $offr_id عشان تعرف شو هو
public function editOffer($oferr_id){

}

-خلينا اول حاجة بس نعمل فيها ريتورن للاى دى ..نشوف رجع معى ولا لا
 public function editOffer($Offer_Id){
        return $Offer_Id;
    }

-هلقيت روح اضغط ع اى اعلان من الى عنا بالجدول ..مسلا ضغطت على سامسونج A12
ال اى دى تبعه 17

-دخلنى ع الراوت
http://localhost:8000/en/offers/edit/17

-وطبعلى
17

-ممتاز حنا شغالين صح

-طيب هلقيت شو بدنا نعمل بالميثود هادى ...بدنا نخليها تعمل ريتورن ل صفحة جديدة ..صفحة الايديت ...يكون فيها فورم بالبياانت مش فاضية ....يعنى نحط للحقول فاليو  تعتها

-طيب من وين بدنا نجيب البيانات هادى

-انا بالميثود بدى اعمل شغل داتا بيز ..اعمل سيليكت على الداتا بيز عالاى دى الى وصلنى الى هو 17 مسلا ...واقله رجعلى كل بيانات ال اى دى هاد الى اعطيته اياه

-لما يرجعلى اياها انا بمررها للفيو ...ومنها بعرض بيانتى هناك بالفيو

-خلينا نشوف كيف عملية الايديت بتصير

-اول حاجة بدنا نعمل سيليكت من الداتا بيز ..زى ما عملنا بادالة الى بتجيبلى كل العروض ...ولكن هناك استخدمنا دالة get()
وحكينا انو القيت ..بتجيبلى اريه اوف كولكشن يعنى بترجعلى كل اشى بالجدول

-طيب انا ما بدى ارجع كل اشى بالجدول ..انا بدى ارجع بيانات حاجة معينة ..بيانات ال اى دى الى انا بدى اعطيلك اياه

-قبل ما نعمل سيليكت عالداتا بيز بال اى دى الى معى ...لازم اول عشان نعمل تشيك ع اى دى هاد ...هل هو موجود بالداتا بيز ولا لا

-ازا موجود بدى اقله اعملى سيليكت على كزا وكزا وكزا منو مسلا الاسم والسعر والوصف ....او اقله اعملى سيليكت ع كل اشى فيه

-وازا مش موجود اقله رسالة انو هاد ال اى دى مش موجود عنا ..عشان ما يقعد يتهابل ويبعتلى ارقام مش عندى ....او نرجعله صفحة 404 انو غير موجود

-يعنى اول خطة بدنا نشيك عالرقم
-فوق مسلا لما ضغطنا ع عرض عنا ..جابلى الرابط هاد
http://localhost:8000/en/offers/edit/17

-انا لو اروح عالداتا بيز ع الرقم هاد 17 راح الاقيه
-طيب لو تهابل وكتبلى رقم من عندو حطلى بدل 7 رقم هيك مسلا
http://localhost:8000/en/offers/edit/1458966

-هان بدى بدى اقله الصفحة غير موجودة ...قبل ما اعمل اى عمليات عندى

-طيب نعمل التشيك نشوف كيف

-احنا بنتعامل مع جدول ايش ال offer يبقى بدنا نقله

 public function editOffer($Offer_Id){

        Offer::findOrFail($Offer_Id);
        return $Offer_Id;
    }

-هادى الدالة عنا ...بقلو هاتلى ال اى دى هاد الى مررته الك ..ازا لقيته اعملى ريتورن الو ...ما لقيته ..فييلز يعنى ..برجعلى صفحة 404 لحاله ..هادى دالة جاهزة

-جرب هلقيت فوت ع رقم مش موجود
http://localhost:8000/en/offers/edit/175
-طلعلى
404 | Not Found
-ما ضرب وطلعلى اكسبشن ..لا قلو انو الصفحة مش موجودة

-لكن لو رقم موجود ..ولقاه ..عادى راح يرجعلك اياه

-طيب لو احنا بدناش هيك ..بدنا نعمله رسالة كاستم من عنا ....اقله انو هاد الرقم مش موجود وارجعه للصفحة نفسها الى بتجيبلى كل العروض صفحة الاوول

-يعنى اول طريقة عسشان نعمل فيها تشيك هيها عن طريق الدالة الجاهزة
Offer::findOrFail($Offer_Id);

-طيب تانى طريقة ..نعملها احنا كاستم ..بنستخدم داة find() وبنعطيه ال اى دى
-خلى بالك دالة find() بتعمل سيرش وبحث عالداتا بيز بس بال اى
ما بينفع اباصى الها الاسم مسلا او السعر ..يعنى اقله ابحثلى ع الاسم موجود ولا لا ....هاد الكلام لقدام راح نعرفه كيف نبحث بالاسم وغيره

-ولكن الى بدك تعرفه هان انو دالة الفايند بتبحث بس بال اى دى ...وهى بدى اكتبلك جنبها كومنت بالكلام هاد كمان
Offer::find($Offer_Id); //search in given tabel only by id

-طيب خلينا نحطها بمتغير ..ونعمل تشيك عالمتغير هادا بقاعدة اف

public function editOffer($Offer_Id){

        // Offer::findOrFail($Offer_Id);

        $offer = Offer::find($Offer_Id); //search in given tabel only by id
        if(! $offer){
            return redirect()->back();
        }

        return $Offer_Id;
    }

-هلقيت لو الرقم مش موجود راح يرجعك للصفحة الى قبل ..لو موجود راح يطبعلك اياه
-ممكن ترجعه برسالة كمان ..زى ما كنا نعمل ..تقله بعد الباك ..وذ كزا ...زى ما عملنا برسالة السكسس

-ولقدام راح نعملها كيف نرجع برسالة معنية برضو
===========
هينى عملتها ..شبه رسالة السكس عادى ...لو بدك ترجعه لصفحة all.blade

if(! $offer){
            return redirect()->to('offers\all')->with(['error_id' => 'this id not exist']);
        }

-وبتروح ع صفحة الاوول ..وبتحط الاليرت وين ما بدك ..فوق الجدول مسلا اول الصفحة ..زى هيك
@if (Session::has('error_id'))
    <div class="alert alert-danger">
        {{ Session::get('error_id') }}
    </div>
@endif

-طيب لو مسلا بدك تقله ارجع لورا ..ما تعطيه صفحة معينة ...ارجع لورا يعنى الى هى صفحة الايديت نفسه
if(! $offer){
            return redirect()->back()->with(['error_id' => 'this id not exist']);
        }

-وتروح ع صفحة الايديت وبتعمل نفس الكلاس الى عملنا بالاووول
@if (Session::has('error_id'))
    <div class="alert alert-danger">
        {{ Session::get('error_id') }}
    </div>
@endif
=========================
-تانى خطوة بعد ما تاكدنا انو ال اى دى هاد موجود ولا لا ..نبدا بالشغل تبعنا
-نقله اعمل سيليكت عالبياانت وهاتها

-احنا بدل ما نقله سيليكت اوول ..لا بنعمل سيليكت بايدنا ..لانو بلاش يكون عنا داتا كتيرة بالجدول ..ف الافضل نعمل سيليكت ع الحاجات الى بدنا اياها

$offer = Offer::select('name_ar', 'name_en', 'details_ar', 'details_en', 'price') -> find($Offer_Id);

-يعنى هيك  بقلى ابحث على ال اى دى هاد ...واعملى سيليكت عالبيانات الى فيه الى اعطيته اياها

-عشان ما بدى اعتمد ع هاد $offer = Offer::find($Offer_Id); هاد هيك بجيبلى كل البيانات لو كانت كتيررررة مسلا

-صار عنا الميثود هيك

public function editOffer($Offer_Id){

        // Offer::findOrFail($Offer_Id);

        $offer = Offer::find($Offer_Id); //search in given tabel only by id

        if(! $offer){
            return redirect()->back();
        }

        $offer = Offer::select('name_ar', 'name_en', 'details_ar', 'details_en', 'price') -> find($Offer_Id);

        return $Offer_Id;
    }

-طيب هلقيت بدنا نبعت البيانات هادى الى خزنتها بالمتغير $offer
-بدنا نمررها لصفحة الفيو الى بدنا نعملها ..اما عن طريق الكومباكت او طريقة وذ

$offer = Offer::select('name_ar', 'name_en', 'details_ar', 'details_en', 'price') -> find($Offer_Id);

return view('offers/edit', compact('offer'));

-هلقيت نروح نعمل الفيو الايديت هادى بفولدر الاوفرز ....راح تكون نفسها صفحة الكرييت ...بس بدنا نحط للحقول الفاليو تعتها ..الى هى طبعا وصلتنى بالمتغير $offer الى مررته للفيو

-عملنا نفس الفيو ..بس بالفورم خلينا الحقول الها فاليو ..هى اول حقل مسلا
<input type="text" class="form-control" name="name_en" value="{{ $offer -> name_en }}" id="offername" placeholder="{{ __('messages.offer name in en')}}">

-هيك بنكتب الفاليو مفهومة طبعا
 value="{{ $offer -> name_en }}"

-وباقى  الحقول نفسها ..هلقيت روح اضغط ع زر الايديت راح يجيبلك كل معلومات العرض هاد بفورم

-وغيرنا الزر تاع الفورم تحت كتبنا عليه تحديث وترجمناه

-والفورم هاى طبعا هلقيت بدها تبعتنى ع روات الابديت لما اضغط عليهاا عالزر

-الروات الى بيحفظ هاى البيانات لما اغير عليها ..هو روات الابديت اكيد

-طيب راوت الابديت راح ياخد منى ال اى دى ...لانو انا ما بعمل ابديت لاى حاجة ..بعمل ابديت للرو الى ال اى دى تبعه كزا كزا

-يبقى روات الابديت راح يكون بالشكل هاد ..انو ياخد منى اى دى ..سميه اى شى ..وهان لازم يكون ريكويرد خلى بالك زى الايديت ..يعنى لازم يصلنى رقم للراوت من الفورم ...ازا بالفورم ما مررت الرقم وانت بتبعتهم الروات راح يطلعلك خطا ...بقلك انا لازم يكون عندى متغير ..وينو

-راوت الابديت
 Route::get('edit/{offer_id}', 'CrudController@editOffer');
Route::post('update/{offer_id}', 'CrudController@updateOfeer')->name('offers.update');

-واعطيت الراوت اسم ..عشان افرجيك كيف نكتبه بطريقة الروات ..بدل طريقة url زى ما عملنا بالايديت ...عشان تفهم الطريقتين وتستخدم الى بتريحك ..بس الافضل طريقة تسمية الروات

-نروح عالفورم ونعمل الاكشن تبعها
-اما بقله بالصورة هادى
<form method="POST"  action="{{ url('offers/update/'.$offer->id) }}">

-او بطريقة الروات لانو سميته
<form method="POST"  action="{{ route(offers.update, $offer->id) }}">

-دالة الراوت بتاخد منى اسم الروات ...وفاصلة بنكتب البارميتر رقم 2 الى هو ال اى دى الى بدى ابعته

-استخدم الطريقة الى بتحبها ولكن التانية هى الافضل انو تخلى كل شغلك عليها

-هلقيت بدنا نروح نعمل دالة الابديت ..الى بدها تخزن النا البيانات الجديدة بالداتا بيز ..ونتعلم كيف نعمل عليهم فالديت برضو قبل ما نخزنهم

-يعنى دالة الابديت ...اول حاجة تعلمناه نعمل فالديشن للريقويست الى وصلنى ...بعدين نعمل ابديت للداتا عالداتا بيز

public function updateOfeer(){
        //validation request

        //update data
    }

-لو الفالديشن مش تمام ..راح نرجع للصفحة الى كنا فيها برسايل الايرور ..زى ماكنا نعمل بالكرييت والستور بالزبط ...ولو تمام خلص بقله اعمل ابديت

-واحنا تعلمنا كيف نكتب الفالديشن هان ..وكيف نكتبته بالطريقة الاحترافية فى كلاس برا الكنترولر خالص

-وقلنا خلص راح نعتمد كل شغل حياتنا عالطريقة الاحترافية الى تعلمناها

-طيب احنا ملف الفالديشن عملناه لما كنا نكمل الكرييت والستور ...يعنى جاهز
خلص بدى اتعامل معو نفسه لجملة الايديت والابديت لنفس الحاجة الى هو الاوفر طبعا الى احنا بنشتغل عليه

public function updateOfeer(offerRequest $request){
        //validation request

        //update data
    }

-هى استخدمناه الكلاس الى بيعمل الفالديت ...وخلصنا ن الفالديشن

-الدرس الجاى راح نكمل نعمل ابديت للداتا بيز ازا الفالديشن ما فى ايرور

-خلى بالك بدالة الايديت ما تعمل سيليكت ع الاى دى ..لانو جننتنى بصفحة الابديت ما كان شايفه
$offer = Offer::select('id','name_ar', 'name_en', 'details_ar', 'details_en', 'price') -> find($Offer_Id);

-هينى عملت سيليكت عليه ..عشان استخدمه بصفحة الايديت بالاكشن تبعت الفورم ابعت عالاىدى هاد

================================================================================

   #058 - Laravel How to update database using multi language data part 2

-هلقيت جرب عدل البيانات زى ما هى ..راح يطلعلك ايرور انو هاد الاسم موجود

-طيب جرب عدل عالاسم الانجليزى والعربى ..واعمل ابديت ..راح يبعتك للصفحة
http://localhost:8000/ar/offers/update/17
فاضية ..يعنى شغلنا صح هيك

-هلقيت بدنا نقله انو يعمللهم ابديت بالداتا بيز خلص ..ما دام دخل من الفالديت وبعتنى ع صفحة الابديت ..اعملى ابديت عالداتا بيز هلقيت

-جملة الابديت سهلة جدا زى الى قبلها ..انا بدى اعمل ابديت ع اى جدول جدول الاوفر
يبقى بقله Offer::

-وقبل ما نعمل الابديت صحيح ..بدنا نعمل تشيك ع الاى دى برضو هل موجود ولا لا ..زى ما عملنا بالايديت ...بدى اخده نسخ من الايديت واحطه بالابديت ..كود التشيك

-بس قبل الكلام هاد ..احان مررنا بارميتر ال اى دى من الفيو ..للروات والروات بعتلى اياها عالكنترولر صح ...يعنى بدنا نمرر ال اى دى الى وصلنى بدالة الابديت ..زى ما مررنا بدالة الايديت ..نقطة مهمة اوعى تنساها

-بدها تصير دالة الابديت هيك
public function updateOffer(offerRequest $request, $offer_id){

-انا بغير قاعد بالاسماء عشان ما تفكر انو لازم اسم المتغير نفسه يكون ...هاد مجرد متغير بستلم فيه الحاجة الى اجتنى يعنى ...هلقيت بدنا نعمل تشيك على الاى دى هاد

public function updateOffer(offerRequest $request, $offer_id){
        //validation request

        //check if offer is exist
        $offer = Offer::find($offer_id); //search in given tabel only by id

        if(! $offer){
            return redirect()->back();
        }

        //update data

    }

-ضل علينا نعمل ابديت للداتا ..عن طريق الاوفر اى دى الى معى
-زى ميثود الكرييت فوق الى بتاخد اريه

-عنا برضو ميثود بتعمللنا الابديت اسمها update() وبتاخد اريه
//update data
        Offer::update([

        ])

-طيب احنا بدنا نحدث اشى معين ولا كل اشى اجانى بالريقويست
-راح ناخد الطريقتين ...ازا بدك تعمل ابديت لكل الريقويست
-بتقلو $request->all()

-اووول حكينا عشان يحوللى الريقويست الى وصلنى ع شكل اريه
وهيك انا بعمل ابديت لكل الريقويست الى وصل

/update data
        $offer -> update($request->all());

-$offer هاد الاى دى الى عملت عليه تشيك الى هو هاد $offer = Offer::find($offer_id);

-بقلو اعملى عليه ابديت لكل الريقويست الى وصلنى
        $offer -> update($request->all());

-هلقيت روح جرب غير مسلا الايم عربى وانجليزى والسعر بس ..راح يحدثلك عادى بالداتا بيز

-طيب نعمل الطريقة التانية للناس الى محتاجها
اقله بدى اعمل ابديت لكولون معينة بايدى
مسلا بديش اعمل ابديت لكل الداتا الى اجتلى ..بدى اعمل ابديت للاسم لحالو مسلا ..ممكن هيك انت بدك يعنى

 //update data
        // $offer -> update($request->all());

        $offer -> update([
            'name_ar'    => $request->name_ar,
            'name_en'    => $request->name_en,
            'price'      => $request->price,
            'details_ar' => $request->details_ar,
            'details_en' => $request->details_en,
        ]);

-طيب مسلا انا بدى اياه بعملى ابديت بس للاسم عربى وانجليزى ..ولو غير السعر او التفاصيل ..ما يعمللهم تحديث ..بس يحدثلى الاسم وخلص

 //update data
        // $offer -> update($request->all());

        $offer -> update([
            'name_ar'    => $request->name_ar,
            'name_en'    => $request->name_en,
        ]);

-طيب نرجع للطريقة الاولى خلص ...بدنا نقله لو نجح الابديت رجعلى رسالة نجاح وارجعلى باك لورا

//update data
        $offer -> update($request->all());
        return redirect()->back()->with(['success' => 'تم التحديث بنجاح']);

-ونروح نعرضها بالفيو ..فوق الفورم مسلا ..نقله ازا السشن مخزن الى السككسس اعرضلى اياه ..زى ما عرضناه زمان

@if (Session::has('success'))
    <div class="alert alert-success">
        {{ Session::get('success') }}
    </div>
@endif

-وهيك كل الامور تمام ...ولكن لما تعمل ابديت لو انت بدك تعدل السعر مسلا
راح يرجعلك  خطا انو الاسم موجود مسبقا ..لانو احنا استخدمنا الفالديت تاع الاضافة ...اعتقد انو لازم نعمل فالديت اتنى للابديت نقلو او فى طريقة تانية انو نقله اى اسم تانى غير الاسم الى انا فيه ...زى ما كنا نعمل ايام الزيرو

-خلى بالك منها ابجث عنها واعرف كيف

================================================================================

  #059 - Laravel how to upload and save image to database and folder رفع الصور الملفات لارافل

-بدنا نتعلم كيف نرفع صورة مع الفورم ونخزنها بالداتا بيز ونعمل ابديت عليها

-راح نرفع الصورة ونخزنها بفولدر عنا ...وبدنا نخزن الباث تبعها بالدتا بيز مع جملة الكرييت وكيف نعرضها بعدين

-نفس الكلام كل مرة ..راح نتعلم كيف نعملها بالطريقة العادية الى 90 بالمية بيعملوها ...والفيديو الجاى نتعلم كيف بطريقة احترافية عشان نتميز عن غيرنا

-الطريقتين بيؤدو نفس الوظيفة ولكن واحدة عادية والتانية باحتراف بنختصر فيها اكواد كتيرة

-اول اشى بدنا نروح ع الفورم الى بنعمل منها اضافة عرض جديدة الى بصفحة create.blade.php ونضيف حقل جديد من نوع file عشان نرفع من الصورة

-وطالما عنا حقل فايل ..يبقى الفورم بدها تاخد enctype
<form method="POST"  action="{{ route('offers.store')}}" enctype="multipart/form-data">

-حقل الصورة
<div class="form-group">

    <label for="offerphoto">{{ __('messages.offer photo')}}</label>
    <input type="file" class="form-control" name="photo" id="offerphoto" >

    @error('photo')
    <small class="form-text text-danger">{{$message}}</small>
    @enderror

</div>

-الخطوة التانية برفع الصورة زى كا بنعرف ...بدنا نعمل فولدر نخزن فيه الصور
-الفولدر بنعمل بفولدر ال public الى هو متشاف للكل ..الى بنحط فيها ملفات السى اس اس والصور وملفات الاتش تى امل ال حكينا

-راح نعمل فولدر نسميه images مسلا ...وعشان نرتب شغلنا ما نرمى كل صورنا بالفولدر نفسه ..لا بنقسمه ..بدنا نعمل فيه فولدر نسميه offers مسلا
يعنى لصور العروض ...لو بدك تعمل صور الاعضاء مسلا بتعمللهم فولدر لحالهم وهكذا

-طيب عملنا فولدر images وداخله فولدر offers عشان نخزن فيه الصور

-الخطوة التالتة وركز فيها منيح ...بدنا نروح ع ملف config الى فى app
فى ملف اسمه filesystem.php هو هاد الملف الى بربط فيه الملف الى عملناه عشان نخزن فيه الصور config\filesystems.php

-نفتح الملف ..راح نلاقى فيه حاجات زى هيك ...هاد الملف الخاص بالفايلات كلها

'disks' => [

        'local' => [
            'driver' => 'local',
            'root' => storage_path('app'),
        ],

        'public' => [
            'driver' => 'local',
            'root' => storage_path('app/public'),
            'url' => env('APP_URL').'/storage',
            'visibility' => 'public',
        ],

        's3' => [
            'driver' => 's3',
            'key' => env('AWS_ACCESS_KEY_ID'),
            'secret' => env('AWS_SECRET_ACCESS_KEY'),
            'region' => env('AWS_DEFAULT_REGION'),
            'bucket' => env('AWS_BUCKET'),
            'url' => env('AWS_URL'),
            'endpoint' => env('AWS_ENDPOINT'),
        ],

-بدنا نعمل جملة ال public نسخ لصق تحتها ونغير عليها ..عشان نربط فولدر offers
الى عملناه بفولدر الصور

'offers' => [
            'driver' => 'local',
            'root' => base_path() . ('public/images/offers/'),
            'url' => env('APP_URL').'/public',
            'visibility' => 'public',
        ],

-هادى هيك بتربطلى المسار الى انا راح ارفع فيه الصورة ....لما اجى ارفع الصورة وين راح اخرنها ...بدنا نخزنها بفولدر اسمه offers ...بدك تعرف الطريقة هيك عشان نربط الملف وهى اعيطناه مسار الملف بالروت ..اوعى تتخربط بحرف

-طيب لو بعد هيك بدنا نعمل فولدر اسمه users مسلا لصور الاعضاء

-بننسخ هادى الى عملناها زى ما هى ...بس بتغير كلمة offers ل كلمة users
وبتغيرها بالمسار برضو بدل اووفر بتخليها يوزر ...وهيكا لاى ملف صور

-الخطوة التالتة ..بدنا نروح عالكنترولر ع دالة الكرييت ...عشان نضيف الصورة
الى اجتنى مع الريقويست

-يعنى بدنا نضيفها هان عشان نعمللها انسيرت للداتا بيز
//insert
        Offer::create([
            'name_ar'    => $request->name_ar,
            'name_en'    => $request->name_en,
            'price'      => $request->price,
            'details_ar' => $request->details_ar,
            'details_en' => $request->details_en,
        ]);

-بس قبل ما نعمللها انسيرت للداتا بيز ...بدنا نخزنها بالفولدر الاول صح
الفولدر الى عملناه وربطناه بالفايل سستم توى
-اى فولدر بنعمله لازم لازم نربطه بالفايل سستم

-طيب هلقيت كيف بدنا نخزن الصورة هادى بالفولدر
-اول حاجة بدنا ناخد الاكستنشن تبعها صح ...ونضيف قبل اى حاجة عشوائية عشان اسماء الصورة ما تتشابه معى زى ما احنا عارفين

-ايام الزيرو كنا نستخدم الدالة الى بتجيبلة رقم عشوائى واقله دوت وبعدها الاكستنشن

-هان بدى استخدم طريقة تانية ...بدى اقله دالة الوقت الى انا فيه time()
وبعدها دوت اكستنشن الصورة ..حكينا عنا الف طريقة

-والميثود تبعت الصور هادى الى راح نعملها ...بس نخلص راح نفصلها ب تريت لحالها عشان مش كل ما اجى اعمل كود للصورة اكتبها من جديد ..وهو هاد الطريقة الاحترافية الى راح نتعلمها الدرس الجاى

-طيب نبدا نعمل الميثود والشغل تبع الصورة
-بدنا ناخد الصورة من الريقويست ...صح هيها اجتنى مع الريقويست حكينا
-وبدنا ناخد الاكستنشن منها ...كيف

//save photo in folder
        $file_extention = $request -> photo

-عنا دالة بال بى اتش بى هى الى بتجيبلى الاكستنشن عالجاهز اسمها getClientOriginalExtension()

-صارت هيك
        $file_extension = $request -> photo -> getClientOriginalExtension();

-وهيك بجيبلى الاكستنشن من الصورة الى وصلتنى

-هلقيت بدنا نضيف عليه الوقت الى حكينا عنه عشاان يكون اسم الصورة وما تتكرر
-وما تنسى تعمل الدوت ما بينهم
    $file_extension = $request -> photo -> getClientOriginalExtension();
            $file_name = time() . '.' . $file_extension;

-هلقيت بدنا نعطيه الباث ..المسار الى بدنا نخزن فى الصورة
 //save photo in folder
        $file_extension = $request -> photo -> getClientOriginalExtension();
        $file_name = time() . '.' . $file_extension;
        $path = 'images/offers';

-هلقيت بدى اقله الصورة الى اجتنى من الريقويست اعمللها مووف ..دالة الموف الى بنعرفها ...وبتاخد منها 2 باراميتر ...مسار التخزين ..واسم الصورة
-بدها تصير هيك

//save photo in folder
        $file_extension = $request -> photo -> getClientOriginalExtension();
        $file_name = time() . '.' . $file_extension;
        $path = 'images/offers';
        $request -> photo -> move($path, $file_name);

-هلقيت روح جرب ارفع صورة ..شوف بدها تتخزن بنفس الكلام الى حكيناها وبنفس الملف ولا لا

-رفعت صورة وحفظها بالملف وكل الامور تمام حفظها بالاسم الوقت دوت الاكستنشن وبنفس الفولدر الى اعطيته اياه

-طيب هلقيت كيف بنضيفها للداتا بيز ..بس بخزن بالداتا بيز الاسم الى عملنا وخلص
زى هيك
            'photo' => $file_name,

-صار شغلنا زى هيك فى ميثود الستور

        //save photo in folder
        $file_extension = $request -> photo -> getClientOriginalExtension();
        $file_name = time() . '.' . $file_extension;
        $path = 'images/offers';
        $request -> photo -> move($path, $file_name);

        //insert
        Offer::create([
            'name_ar'    => $request->name_ar,
            'name_en'    => $request->name_en,
            'price'      => $request->price,
            'details_ar' => $request->details_ar,
            'details_en' => $request->details_en,
            'photo' => $file_name,
        ]);

        return redirect()->back()->with(['success' => 'تم اضافة العرض بنجاح']);

-طيب نروح نعمل عمود جديد بالداتا بيز نسميه photo ...وما تنسى تضيفه بالمودل
اى عمود جديد بالجدول لازم تضيفه بالفيلبل بالمودل ..الحقل من نوف فار تشار خلى بالك

-مش مشكلة خيها ريكويرد هلقيت ..ما تعلم على null وانت بتعمل الحقل يعنى هى مطلوبة هيك بتقبلش نل ...لانو احنا لسا ما عملنا اى فالديشن عالصورة

protected $fillable = ['name_ar', 'name_en', 'details_ar', 'details_en', 'price', 'photo', 'created_at', 'updated_at'];

-هى ضفناه بالمودل وعملناه بالجدول ...روح هلقيت ضيف عرض جديد بصورة شوف بدها تتخزن بالفولدر ويتخزن اسمها بالداتا بيز ولا لا

-كلو تماااام ...ضل بس نعرف كيف نعرضها عنا لما نجيبها من الداتا بيز وكيف نعمل عليها فاليديشن

================================================================================

       #060 - What is Laravel Traits - كيفية كتابه كود احترافي

-بدنا نتعلم كيف نكتب كود الدرس الى فات بشكل احترافى اكتر ...بدنا نحط ميثود الصورة الى عملناه ..بتريت ..وكل ما بدى اعمل ميثود الصورة باى مكان تانى مسلا لصور اليوزر ...ما ارجع واكتب نفس الكود الى  كتبته ..لا بس بستدعى ههاد التريت الى عملته وخلص ..وبصير ك انو الكود تاع الصورة الى موجود بالتريت كانو موجود عندى لما استدعيت التريت

-اول حاجة خلينا ناخد كود الصورة ونحطه بميثود تحت الكرييت .. ونقله فوق $this -> الميثود الى عملتها

public function store(offerRequest $request){

        //validate data befor insert to DB

        //save photo in folder
        $this -> saveImage();

        //insert
        Offer::create([
            'name_ar'    => $request->name_ar,
            'name_en'    => $request->name_en,
            'price'      => $request->price,
            'details_ar' => $request->details_ar,
            'details_en' => $request->details_en,
            'photo'      => $file_name,
        ]);

        return redirect()->back()->with(['success' => 'تم اضافة العرض بنجاح']);

    }

    protected function saveImage(){
        $file_extension = $request -> photo -> getClientOriginalExtension();
        $file_name = time() . '.' . $file_extension;
        $path = 'images/offers';
        $request -> photo -> move($path, $file_name);
    }

-هو هيك بالميثود تحت عاملى خط احمر تحت $request لانو هو مش شايفه ..شو هو هاد الريقويست الى انت كاتبلى اياه

-طيب احنا بدنا نخلى الفنكشن هادى داينمك ...عشان تمشى معى وين مكان

-عشان تكون داينمك واى مكان يستخدمها ...بدنا نمررها الصورة الى بتصلنى ..ومكان التخزين الى بدى اخزن فيه الصورة

-يعنى بدها تكون فنكشن ب 2 باراميتر ...واى واحد بدو يستخدمنى ..لازم يمرر الى 2 باراميتر ....طيب شو هما ال2 بارميتر حكينا ..اسم الصورة والفولدر الى بدى اخزن فيه

-بدها تصير الميثود زى هيك

protected function saveImage($photo, $folder){
        $file_extension = $photo -> getClientOriginalExtension();
        $file_name = time() . '.' . $file_extension;
        $path = $folder;
        $photo -> move($path, $file_name);
    }

-هيك صارت داينمك ....هلقيت انا لو بدى استخدمها بدالة الستور ...بدى استخدمها ب2 باراميتر ..خلص اجبارى لازم امرر الها ..لانو هاى فنكشن وذ باراميتر

-وهيك صارت داينمك ..لو بدى استخدمها بصور اليوزر مسلا ..بمررها اسم الصورة ..والفولدر الى بدى اخزن فيه وخلص

-شو هما الباراميتر الى بدهم يتمرروا

//save photo in folder
        $this -> saveImage($request -> photo, 'images/offers');

-طيب هو هلقيت بدالة الكرييت مش شايف الفايل نيم الى انا كاتبه
'photo'      => $file_name,

-عاملى تحته خطا احمر ...لانو انا خلص مسحته ..واستخدمت ميثود هى الى بتعملى الكلام هاد

-يبقى بدنا نجيب اسم الصورة من الميثود نفسها زى هيك

-اول حاجة بدنا نعمل ريتورن لاسم الصورة بالميثود ...بدى اياها ترجعلى اسم الصورة لما استخدمها

protected function saveImage($photo, $folder){
        $file_extension = $photo -> getClientOriginalExtension();
        $file_name = time() . '.' . $file_extension;
        $path = $folder;
        $photo -> move($path, $file_name);

        return $file_name;
    }

-هلقيت بميثود الستور ...بدنا نخزن الدالة باى متغير ..ونستخدم المتغير هاد
- يعنى بدل ما كانت هيك

        $this -> saveImage($request -> photo, 'images/offers');
-بدنا نخليه هيك

        $img_name = $this -> saveImage($request -> photo, 'images/offers');
-سمى المتغير اى حاجة ..وهلقيت بنستخدمه عشان نخزن فيه
            'photo'      => $img_name,

-يا بتخلى اسمه زى الاول عادى بس انا عشان ما تتخربط وتفكر كل اشى مربوط ببعض

-صارت بالاخير هيك وكل الامور تمام ان شاء الله

public function store(offerRequest $request){

        //save photo in folder
        $img_name = $this -> saveImage($request -> photo, 'images/offers');

        //insert
        Offer::create([
            'name_ar'    => $request->name_ar,
            'name_en'    => $request->name_en,
            'price'      => $request->price,
            'details_ar' => $request->details_ar,
            'details_en' => $request->details_en,
            'photo'      => $img_name,
        ]);

        return redirect()->back()->with(['success' => 'تم اضافة العرض بنجاح']);

    }

    protected function saveImage($photo, $folder){
        $file_extension = $photo -> getClientOriginalExtension();
        $file_name = time() . '.' . $file_extension;
        $path = $folder;
        $photo -> move($path, $file_name);

        return $file_name;
    }


-وهلقيت الميثود هادى بتستخطمها وين ما بدك ..بس عشان تقدر تستخدمها عش مستور المشروع كله ...بدنا نحطها ب تريت برا ...عان اى واحد يقدر ياخدها ويستخدمها

-هلقيت روح جرب كمان مرة وارفع صورة ..شوف الشغل تمام ولا فى حاجة غلط ...احان ع فكرة ما عملنا حاجة جديدة نفس الشغل القديم بس طورنا الكود يعنى

-تمام كلو صح ورفعت الصورة بنجاح

-طيب احنا لهلقيت طورنا الكود ...انو بدل ما نكتب كود الصورة داخل ميثود الستور ...انو فصلنا الكود بميثود برا

-طيب ممكن نطور بزيادة هلقيت ...انو نخليه هاى الميثود اى كنترولر عندى يستخدمها مش بس الكنترولر هاد الى انا فيه ...لانو الميثود هيك بس ع مستوى الكنترولر الى انا فيه

-اه وهى طريقة انو نحطها ب تريت

-واحنا فاهمين شو هو التريت ..هو تقدر تقول عبارة عن ملف انو بتقدر تعملو زى الانكلود ...يعنى لو كتبته فيه اى كود وتعمل استدعاء للتريت هاد تعمله يووز ..يعنى كانك حكتله انكلود او كانو الكود او الميثود الى فيه صارت عندك

-يعنى ما علينا الا نعمل تريت ..وناخد هاى الميثود نحطها فيه ..ونستدعى التريت عندى بالكنترولر وخلص

-بدنا نروح على فولدر ال app ونعمل فولدر جديد فيه نسميه Traits مسلا
او اى اسم بدك اياها ...بس احنا سميناه تريت ..عشان بدنا نحط فيه تريتس يعنى

-اى تريت بدنا نعمله هلقيت بنحطه بالملف هاد يعنى ...التريت عبارة عن فايل امتداده بى اتش بى

-خلينا نعمل تريت هلقيت ونسميه مسلا OfferTrait.php او اى ام بدك اياه
بس عشان احنا حاليا شغالين بالاوفر سمته اوفر

-بكتبله النيم سبيس ..وبعديه بعمل تريت بالاسم الى سميت فيه الملف  وبحط فيه الميثود بس بدون protected خلص بدناش اياها بروتيكتك

<?php

namespace App\Traits;

trait OfferTrait
{
     function saveImage($photo, $folder){
        $file_extension = $photo -> getClientOriginalExtension();
        $file_name = time() . '.' . $file_extension;
        $path = $folder;
        $photo -> move($path, $file_name);

        return $file_name;
    }

}

-هلقيت نروح ع ملف الكنترولر ونعمل يوز للتريت هادا
-بندخل جوا كلاس الكنترولر وبقله يوز التريت هاد

class CrudController extends Controller
{
    use OfferTrait;

اول ما كتب اول حرف منو طلعلى اياه ...ولما ضغط عليه عملو ايبورت فوق ...لازم تعمله فوق ايمبورت ..لو انت بتشتغل ع محرر قديم وما بيعملك ايمبورت ...بدك تحط النيم سبيس تعته لحاله فوق
use App\Traits\OfferTrait;

-وهيك تمت العملية بنجاح


===============================================================================

    #061 - قمت بانشاء جروب فيس لحل المشاكل الخاصه بالكورس ومناقشه الاخطاء

-ملاحظة ..المهندس ما عمل كيف نعرض الصورة ..انا عرضتها وعملتلها فالديشن كمان روح وشوفو ..ساهلة جدا

===============================================================================



=================================================================================

         #064 - Laravel delete from database with redirect messages

- بدنا نعمل الحذف
-راح نزود رز تانى اسمه ديليت جنب زر الايديت ..لكل عرض 
-وطبعا زا الايديت راح ياخد معنا ال اى دى تبع العرض هاد عشان الروات ياخده ويبعته للكنترولر ..ويعدين نعمل دالة الحذف بالكنترولر 

<a href="{{route('offers.delete', $offer->id)}}"  class="btn btn-danger">
    {{ __('messages.Delete')}}
</a>

-روات الحذف ممكن ينعمل نوعه delete وممكن ينعمل post ولكن احان هان راح نخلى نوعه get هى هاى اسهل طريقة هلقيت ..ولكن لما نتعامل مع الاجاكس الدروس الجاى راح ناخد الطريقة التانية كيف نعمله بال post

 Route::get('delete/{offer_id}', 'CrudController@deleteOffer')->name('offers.delete');

-نروح نعمل الميثود الى بتحذف 

-زيها زى الايديت ..اول حاجة بدنا نشيك على الاى دى الى فوق ..هل هو موجود بالداتا بيز ولا لا 

public function deleteOffer($Offer_Id){

        $offer = Offer::find($Offer_Id); //search in given tabel only by id

        if(! $offer){
            return redirect()->to('offers/all')->with(['error_id' => 'this id not exist']);
        }
    }

-وعرضت رسالة الايرور بصفة الاوول خليته يرجع ع صفحة الاوول ويعرضها هناك 
-طيب ممكن احنا نشيك ع الاى ددى بطريقة تانية بدل طريقة الفايند هادى 
Offer::find($Offer_Id)

-ممكن استخدم طريقة الوير ...زى هيك 

        $offer = Offer::where('id', $Offer_Id)->first(); 

-حكناله first() لانو انا بدور على عنصر واحد الى هو هاد الى معى ...طالما بدور ع اشى واحد لازم اقله فيرست ..وهى جربتها وزبطت معى ...بدون فيرست ما بتزبط 

-ممكن كمان نحكيله هيك نقله اصغر من او اكبر من او يساوى ...ولكن انا لما اكتبه بالشكلى الى فوق الى انا كاتبه خلص هو لحاله بيفهمها انو يساوى 

-ولكن لو بدى اكبر واصغر بقله 
        $offer = Offer::where('id', '>' , $Offer_Id)->first(); 
        $offer = Offer::where('id', '<' , $Offer_Id)->first(); 
        $offer = Offer::where('id', '=' , $Offer_Id)->first(); 

public function deleteOffer($Offer_Id){

       // $offer = Offer::find($Offer_Id); //search in given tabel only by id
       //طريقة تانية باستخدام الوير ..هى هى نفسها ولكن طريقة تانية 

        // $offer = Offer::where('id', '=' , $Offer_Id)->first(); 
        //نفسها الى تحت ..كانى حكتله يساوى يعنى ..اى واحدة صح 
        $offer = Offer::where('id', $Offer_Id)->first(); 

        if(! $offer){
            return redirect()->to('offers/all')->with(['error_id' => 'this id '. $Offer_Id .' not exist']);
        }


    }

-طيب لو العرض موجود ...بدنا نمسحه ...الحذف بكون بدالة اسمها delete()
-وبدنا نخليه يرجع لنفس صفحة الاول برضو لو تم الحذف ..ويقلى رسالة نجاح ..تم الحف بنجاح 

 $offer-> delete();

return redirect()->route('offers.all')->with(['success_delete' => 'offer deleted successfully']);

-وهيك تما الحذف بنجاح ---صار ميثود الحذف هيك 

public function deleteOffer($Offer_Id){

        $offer = Offer::where('id', $Offer_Id)->first(); 

        if(! $offer){
            return redirect()->to('offers/all')->with(['error_delete' => 'this id '. $Offer_Id .' not exist']);
        }

        $offer-> delete();

        return redirect()->route('offers.all')->with(['success_delete' => 'offer deleted successfully']);


    }

-بالنسبة لرسايل الخطا والنجاح انا ممكن اترجمهم باللغتين عادى برضو زى هيك 
with(['error_delete' => __('messages.offer id not found')])

-ونروح نترجم الكى هاد عادى 

-وانا برسالة الايرور ع فكرة هان ...رجعت معها ال اى دى الى دخله الغلط ..وزبط معى 

-وهى برسالة النجاح برضو 
$offer-> delete();

        return redirect()->route('offers.all')->with(['success_delete' => 'offer name ' . $offer -> name_ar . ' deleted successfully']);

-بقله تم حذف المنتج كزا كزا بنجاح 

-ولو بدى اسمم المنتج يطلعلى حسب اللغة الى انا فيها ...واترجم الكى تبعت الرسالة كمان 
-يعنى المسج راح  تكون عبارة عن اسم المنتج بالعربى او الانجليزى حسب اللغة الى انا فيه ...مع رسالة انو تم حذفه بنجاح واترجمها كمى 

$offer-> delete();

        $offer = Offer::select('name_'.LaravelLocalization::getCurrentLocale().' as name') -> first();

        return redirect()->route('offers.all')->with(['success_delete' => $offer -> name . ' : ' . __('messages.offer delete')]);



=================================================================================

    #065 - what is Ajax and Why Ajax - laravel crud using Ajax لارافل وأجاكس

-بدنا نتعلم كيف نعمل الاضافة والتعديل والابديت والحذف بالاجاكس 

-طيب ليش بنتعلم الاجاكس ..لانو ما فى مشروع بيخلى منها ...الا ان كان بيشتغلوا انجيولار او ع فريم ورك تانى ..هان ما بيحتاجو اجاكس 

-بس المشاريع الكبيرة ..مش من الضرورى انها تكون بتستخدم فريمورك من هدول انجيولار او غيره ..عشان هيك لازم نتعلم الاجاكس 

-الاجاكس هو انو كل العمليات تتم بالباك قراوند بدون ما انت تشوفها وبدون ما الصفحة تعمل ريلود 

-يعنى رقم 1 بالاجاكس ..انو لما اضغط ع اى زر ..ما يروح عالرابط الى بعته عليه ويعمل ريلود ويرجعلى بالبياانت 

-لا ...الاجاكس انو اضغط بدون ما الصفحة تعملى ريلود ..هو بيعمل كل اشى بالخلفية وبرجعلى الرسالة او النتيجة تبعتى 

-رقم 2 ..ولنفترض انو انت عندك سيليكت بوكس بتختار منو المحافظة مسلا ..وسيليكت بوكس تانى فى المدارس كلها بتختار منو المدرسة 

-الفايدة من الاجاكس انو انا لما اضغط  ع اول سيليكت بوكس واختار محافظة ...بالقى السيليكت بوكس التانى بس طلعلى فيه مدارس هادى المحافظة فقط 

-بمجرد ما انا اختر المحافظة هو لحاله راح عالداتا بيز وجابلى مدار المحافظة هادى وعرضلى اياها بدون ما نعمل ريلود وغيره عشان تجيبلى اياهم 

-يعنى انت بتختار النحافظة ..هو بيعمل ريقويست بروح بيعمل جملة كويرى بالداتا بيز زى الريتريف داتا يعنى ..انو يجيبلى الداتا يعنى ..وبرجعلى اياها بريسبونس ..بدون ما ان اشوف اى اشى 

-الريسبونس بيرجع باسماء المداء وبيعمللها ابيند بالسيليكت بوكس التانى 

-هو هاد الاجاكس 

=================================================================================

    #066 - laravel how to Insert data to database using Ajax - Ajax Crud لا

-بدنا نعمل نفس الى عملناه بالداتا بيز بالطرق العادية ...ولكن ع اجاكس 
-بدنا نعمل كنترولر جديد ..وصفحات فيو جديدة ..وراوتات جديدة 

-زى الشغل القديم بالزبط ...بس عشان ما نخلطهم ببعض نخلى كل فرع لحال 
-لارافيل الاجاكس نخليها لحال ...والعادية لحال 

-بدنا ننشئ كنترولر جديد بدل الكراود القديم 
-بدى اخليه برا بفولدر الكنترولر نفسه واسميه OfferController

 php artisan make:controller OfferController

-بدنا نتعامل مع نفس الجدول تبعنا الاوفر ..عشان ما نعمل بداله وياخد وقت ...بالتالى راح نستخدم نفس المودل الى عنا هو هو 

-نفس المرة الى فاتت ...اول حاجة بدنا نعمل ميثود create مسلا اى اسم ...هادى الى بدها تعرضلى الفورم عشان اضيف منها ...بعدين بدى اعمل انسيرت للداتا بالداتا بيز بس بطريقة الاجاكس 

-يعنى بدنا الميثود الى بتعمللها الستور ميثود store
-سميها ستور سميه سيف سميها سيف اوفر اى حاجة 

-هاى راح تختلف عن الستور الى اشتغلناها قبل ..انو هادى راح تعمل حفظ للبيانات بالداتا بيز باسخدام الاجاكس 

class OfferController extends Controller
{
    public function create(){
        //view form to add this offer
    }

    public function store(){
        //save offer in to DB using Ajax
    }
}

-هدول الميثود التنتين الى حاليا راح نشتغل عليهم بهاد الدرس ..نضيف عرض ونعمله انسيرت او حفظ بالداتا بيز 

-بدنا نستخدم الفيو انهيرتنس ..عشان نعمل صفحات الفيو تعاتنا بسرعة 
-فى عنا بالفيو ...فيو اسمه app.blade.php 
-موجود بفولدر layouts بالفيو ...هاد بينزلباى ديفولت لما انشانا المشروع 

-موجود فيه النافبار تبع login   register وتحت النافبار عامل النا ييلد للكونتيت
-ع اساس لو بدنا نعمل انهيرتنس من هاى الصفحة 

-اخر الصفحة هو عاملة هيك ..بعد النافبار تبعها 

        <main class="py-4">
            @yield('content')
        </main>
    </div>
</body>
</html>

-هلقيت صفحاتنا الى بدنا نعمللها للاوفر عشان نفصلها عن الصفحات القديمة ..بدنا نعمل اكستند من  الصفحة هادى ...ونعمل سيكشن للكنتينت 

-بدنا نعمل بالفيو فولدر تانى نسمه ajaxoffers عشان نفرقه ع الوفرز القديم 

-هلقيت بدنا نحط فيه صفحاتنا 

-بدنا نعمل صفحة create.blade.php نعمل اكستند فيها لصفحة ال app.blade
-ونجيب الفورم الى عملناها بصفحة الكرييت القديمة ونحطها بالكونتينت هان 

@extends('layouts.app');

@section('content')
    
@endsection

-هبقيت بدنا نجيب الفورم ونحطها هان بالكنتينت 

-هلقيت بدنا نروح نعمل الرواتس ..مش راح نعمل اكتر من لغة ..خلص عالشغل العادى عشان الوقت ...بدنا ننزل تحت ..ونعملهم بقروب لحالهم 


###############################  Start Ajax Route ###############################

Route::group(['prefix' => 'ajax-offers'], function() {
    
    Route::get('create', 'OfferController@create')->name('ajax.offer.creat');

});

###############################  End Ajax Route #################################

-وهى الميثود ..بتعمل ريتورن لصفحة الكرييت الى فيها الفورم 
public function create(){
        //view form to add this offer
        return view('ajaxoffers.create');
    }

-طيب هلقيت بدنا نشتغل الاجاكس ..وين بدنا نشتغله بصفحة الكرييت تحت الفورم 

-يعنى تحت سكشن الكونتينت 

-بدنا نعمل سكشن جديد نحط فيه الاجاكس تاعنا ..نسميه مسلا سكريبت او اى حاجة 
@section('scripts')
    
@endsection

-وبلزم نكون عملنا الو ييلد بصفحة ال app الى وارث منها 

        <main class="py-4">
            @yield('content')
        </main>
    </div>

    @yield('scripts')
</body>
</html>

-الاجاكس عبارة عن كود جافا سكريبت ..يعنى لازم نكون مستدعيين قبله الجيكويرى 
-خلينا نجيب رابطها سى دى ان عالسريع ونحطه قبلها 

-هى حطيته زى هيك 
<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    
    @yield('scripts')
</body>
</html>

-طيب احنا الى راح نكتبه هلقيت كود جافا سكريبت ...وبما انو احنا بال اتش تى ام ال مش بملف سكريبت وبستدعى ..بالتالى بدى اكتب الكود جوا تاج <script></script>

مفهومة يعنى 

-نبدا كتابة الكود ...او اشى هى منظر الكود الى راح نكتبه 

@section('scripts')
<script>
    $.ajax({
        type: 'post',
        url: "{{ route('ajax.offer.creat')}}",
        data: {
            '' : 2,
        },
        success:function(data){

        }, error:function(reject){

        }

    });
</script>
@endsection

-راح نفهمه كله 

-ميثود الاجاكس كيف بكون شكلها ...اول اشى بتاخد type النوع بوست ولا قيت 
-بعدين بتاخد اليو ار ال ..الروات الى بدها تروح عليه 
-يعنى هى بالزبط زى الفورم الى بنعملها ..بس بدنا نحط النوع تبع الفورم والكشن تبعها هان بكود الاجاكس مش بالفورم فوق 

-يعنى احنا بالفورم فوق مش راح نكتب الاكشن لانو ما بدنا الصفحة تعمل ريلود اصلا ...حتى الميثود بوست ممكن كمان ما تكتبها بالفورم فوق عادى 

-يعنى التايب وال يوارال الى بالاجاكس هما الميثود والاكشن الى بالفورم كانوا 
-يعنى بدا ما الفورم هى الى تعمل submit للبيانات ...لا الاجاكس هى الى راح تعمل سابمينت للفورم ولكن بالباك قرواند 

-طيب بدنا نروح نعمل الروات الى بدها تروح عليه الفورم هادى بالاجاكس 
Route::get('create', 'OfferController@create')->name('ajax.offer.creat');
Route::post('store', 'OfferController@store')->name('ajax.offer.creat');
-طيب هلقيت راح نروح للميثود الستور ...راح تكون هى هى نفس القديمة فش اى اختلاف 
كانت بتعمل فالديشن وبتحفظ الصورة 

-وهان راح نعمل نفس الكلام راح ناخده منها ...بس ما بدنا نعمل فالديشن هلقيت 

-احنا هدفنا بس نوضح كيف نحفظ بالاجاكس ..ولكن هى هى الفالديشن ما فى اى اختلاف 

-صارت ميثود الستور هيك 

public function store(Request $request){
        //save offer in to DB using Ajax
        $img_name = $this -> saveImage($request -> photo, 'images/offers');


        //insert
        Offer::create([
            'name_ar'    => $request->name_ar,
            'name_en'    => $request->name_en,
            'price'      => $request->price,
            'details_ar' => $request->details_ar,
            'details_en' => $request->details_en,
            'photo'      => $img_name,
        ]);
    }

-لاحظ اخذنا الريقويست العادى الى جاى الى باللارافيل مش الى عملنا الى فيه الفالديشن ..وانعمل الو ايمبورت فوق ..ومودل الاوفر ما  كان شايفه مسحته وكتبته من جديد عشان يعمله ايمبورت 

-وهان خلى بالك ما فى عنا نقله ريتورن للصفحة الى قبل برسالة سكسس ..لانو احنا اصلا فش عنا ريلود ...الاجاكس لحالها بتعمل هاد الكلام 

-طيب خلينا نجرب هلقيت ونحفظ بياناتنا 

-نروح نجيب اسم الراوت الى عملنا ونحطه عنا بال يو ار ال تع الاجاكس بدها تصير هيك 

@section('scripts')
<script>
    $.ajax({
        type: 'post',
        url: "{{ route('ajax.offer.creat')}}",
        data: {
            
        },
        success:function(data){
        }, error:function(reject){

        }

    });
</script>
@endsection

-طيب شو هما 

-data : هاى الداتا الى انا بدى اباصيها ..هلقيت راح نعرف شو هى 
-وفى حالة النجاح يرجعلى رسالة وفى حالة الفشل يرجعلى رسالة الى هما success و error

-هلقيت نروح نجرب هاد الكود وهو هيك راح يحفظ بالداتا بيز ولا لا 

-بدنا نروح نفتح الانسبكت على network ونتفرج ع شكل الريسبوس والريقويست وشو الى بصير 

-اول حاجة الصفحة عملت ريلود ...يبقى احنا شغالين غلط ..هاد لما ضغطت عالزر الارسال خلى بالك ..ضغطت عليه اشوف شو بدو يصير ..راح عملى ريلود ..يبقى فى غلط عنا 

-طيب احنا لو بنفكر صح انا قلنا انو الاجاكس هو الى بيعمل سابميت لحاله ..وزر الارسال الى بالفورم معمل سابمينت ..يعنى راح يعمل سابميت غصب عنى اصلا 

-طيب احنا نروح نشير عن السابميت ..ونعطيه id مسلا 
-وبالجيكورى تحت نقله لما اضغط على الاى دى هاد 
-كان الزر هيك 

<button type="submit" class="btn btn-primary">{{ __('messages.send')}}</button>

-صار هيك 

<button id="save_offer" class="btn btn-primary">{{ __('messages.send')}}</button>

-هلقيت بدنا نقله لما اضغط على الزر هادا ..نفذلى الاجاكس تبعنا 

-وممكن نقله امنع الافتراضى كمان ...بخاف مسلا اضغط عالزر يروح يعمل ريلود ..ولا يكون لينك يروح يبعت لل لينك تانى قبل ما ينفذ الاجاكس بالباك قراوند 

-ف انا بالمرة بعمله امنع الافتراضى 
-مع انها ديبريكيتد بس خلينا نعملها مش مشكلة 

-احنا هلقيت بدنا نروح عالروات هاد الى اعطيناه اياه ..بالداتا زيرو ..خلينا نشوف شو راح يعمل هلقيت 

-نضغط ارسال ونشوف بالنيتوورك شو بدو يقللنا 

-طلعلنا الخطا 419 ...هاد الايرور الخاص بال csrf 

name      status       type   
sotre     419          xhr 

-لو تضغط عليها ع كلمة store راح يجيبلك ال response الى رجعلنا بالخطا ..بقللنا 

"message": "CSRF token mismatch.",
    "exception": "Symfony\\Component\\HttpKernel\\Exception\\HttpException",
    "file": "C:\\xampp\\htdocs\\Laravel_Course\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Exceptions\\Handler.php",
    "line": 227,

-بقللها التوكن ..ميس ماتش ..يعنى هو مش شايفه 

-اوك طيب احنا حاطينه بالفورم فوق ....لا حتى لو حاطه هان الاجاكس ما بشوفه 
<form method="POST"  action="" enctype="multipart/form-data">
            @csrf

-حتى لو محطوط بالفورم ..الاجاكس ما راح يشوفه ...يبقى راح نمرره بالداتا ...هلقيت هان اجى دور نفهم شو هى الداتا ...الداتا هى البيانتا الى بنبعتها بالحقول ...ماش احنا قلنا @csrf هى عبارة عن حقل بيبعتلى توكن زيها زى باقى الحقول 

-هلقيت بدنا نمررها بالبيانات تبعت الاجاكس ..لانو حكينا الروات معمول باى ديفولت من اللارافيل انو اول حاجة يشيك هل مبعوت @csrf مع اى داتا جاية الى من نوع post  ولا لا 

-يعنى الاجاكس عندو حاجة اسمها data ..ازا بتباصى فيها بشوف ..ما باصيت فيها ما راح يشوف انت شو باعت 

-بدنا نباصى التوكين جوا الداتا 

$(document).click('#save_offer', function(e) {
        e.preventDefault();

    $.ajax({
        type: 'post',
        url: "{{ route('ajax.offer.store')}}",
        data: {
            '_token' : "{{ csrf_token() }}",
        },
        success:function(data){
        },
        error:function(reject){
        },
    });

-نروح هلقيت عالفورم ونعمل ارسال ونشوف ..شو بدو يقللنا بالنيتورك 
-معلومة ..اى حاجة بتعملها تغير ع كود الاجاكس ..لازم تعمل ريلود للصفحة قبل ما تجرب...بعدين جرب كود الاجاكس تبعك ...لانو هاد جافا سكريت ...لازم تعمل ريلود للصفحة من جديد عشان تاخد الاكشن 

name      status       type   
sotre     500          xhr 

-طلعلنا الايرور 500...هاد الايرور يعنى فى خطا عندك بالكود 
-نشوف شو الخطا 

"message": "Call to a member function getClientOriginalExtension() on null",
    "exception": "Error",
    "file": "C:\\xampp\\htdocs\\Laravel_Course\\app\\Traits\\OfferTrait.php",

-هان هو مش شايف انو فى داتا جاية الو ..وقبل الايرور هاد ..طلع للمهندس ايروو 500 كان فيه انو هو مش شايف الميثود save_imge() ...لانو المهندس ما كان مستدعى التريت تبعها 

-استدعى التريت ..بعدين طلعلو الميثود هاد الى طلعلى انو مش شايف داتا هان ...بقلى انت عامل استخدام للميثود هادى تعت الاكستنشن ..طيب وين الداتا الى انت بعتتها عشان نعملك اياها 

-يعنى احنا لازم نبعت داتا ....بس اليوم راح نبعت الداتا بدون الصورة ..ونخلى الصورة للدرس الجاى 

-طيب احنا بنجيب الداتا بالجيكورى من الحقول ..معروفة بنقله هاتى الفاليو تبعت الحقل كزا كزا ..زى هيك 

-لو بدى اجيب الاسم من حقل الاسم ..هيك بنجيبه 
$("input[name='name_ar']").val()

-بدنا نجيب كل الحقول بالطريقة هادى ونبعتهم مع الداتا ...وخلى بالك من الاسم وانت بتحطهم لانو بدو يخزنلك اياه بلجدول بعمود الاسم الى انت حطيته 

data: {
            '_token' : "{{ csrf_token() }}",
            'name_ar' : $("input[name='name_ar']").val(),
            'name_en' : $("input[name='name_en']").val(),
            'details_ar' : $("input[name='details_ar']").val(),
            'details_en' : $("input[name='details_en']").val(),
            'price' : $("input[name='price']").val(),
            'photo' : $("input[name='photo']").val(),
        },
    
-هلقيت نروح نجرب وندخل بيانات 

-برضو طلعلى نفس الايرور ولكن بقلى انو المرة هاى شايف الصورة ك سترنق

message": "Call to a member function getClientOriginalExtension() on string",
    "exception": "Error",
    "file": "C:\\xampp\\htdocs\\Laravel_Course\\app\\Traits\\OfferTrait.php",
    "line": 8,
    "trace": [

-بقلى انو هو مش شايف الصورة ..هو شايفها ك سترنق 

-طيب نوقف الصورة من هان ..ومن دالة الستور ..ونخزن البيانات بدون الصورة ..لانو الصورة فيها تريك ..ونوقف ميثود الصورة الى بالستور كمان 

-يعنى بدنا نجرب على هيك 

public function store(Request $request){
        //save offer in to DB using Ajax
        // $img_name = $this -> saveImage($request -> photo, 'images/offers');

        //insert
        Offer::create([
            'name_ar'    => $request->name_ar,
            'name_en'    => $request->name_en,
            'price'      => $request->price,
            'details_ar' => $request->details_ar,
            'details_en' => $request->details_en,
            // 'photo'      => $img_name,
        ]);
    }

-والاجاكس بدون الصورة 

<script>
    $(document).on('click', '#save_offer', function(e) {
        e.preventDefault();

    $.ajax({
        type: 'post',
        url: "{{ route('ajax.offer.store')}}",
        data: {
                    '_token' : "{{ csrf_token() }}",
                    'name_ar' : $("input[name='name_ar']").val(),
                    'name_en' : $("input[name='name_en']").val(),
                    'details_ar' : $("input[name='details_ar']").val(),
                    'details_en' : $("input[name='details_en']").val(),
                    'price' : $("input[name='price']").val(),
                    // 'photo' : $("input[name='photo']").val(),
                },
        success:function(data){
        },
        error:function(reject){
        },
    });

-ع فكرة ...انا رجعت click عالقديمة on click 
$(document).on('click', '#save_offer', function(e) {

-جربت اعملها بالطريقة السهلة الى تعلمته مع الزيرو نقله كليك ع طول 
$(document).click('#save_offer', function(e) {

-لما عملته هيك ...منع الافتراضى تبع زر الفايل الصورة كمان ..صرت لما اضغط عليه ارفع صورة ..ما يفتحلى ولا يعمل اى اكشن ..عشان هيك رجعته ..شكلو عملى منع افتراضى لكل اشى لما عملت كليك لحالها 

-طيب نجرب هلقيت بدون الصورة 

-طلعلى الحالة 200 يعنى الشغل مزبوط وكل اشى تمام 
name      status       type   
sotre     200          xhr 

-ولو تفوت ع النيتورك وتنزل تحت راح تلاقى كاتبلك البيانات الى بعتها

Form Data 
_token: p6KqvXnjhDfy0YRjjuPCUxrWAG2Y229WLyKjbUpn
name_ar: جوال سامسونج 
name_en: Samsung Phone 
details_ar: رام 4 جيجا 
details_en: Ram 4 GB
price: 580

-وهلقيت روح عالداتا بيز راح تلاقيه ضافلك االعرض بدون الصورة 

- ع فكرة ...انا عشان ادخل بدون الصورة لانى وقفتها ...رحت عالجدول وخليت حقل الصورة يقبل null عشان ما بدى ارفع ..عشان ما يطلعلى خطا يقلى وين الصورة مطلوبة 


-يعنى فى نهاية الدرس بدنا نقول ..انو الاكواد تبعت  الكنترولر هى هى كلها نفسها ولكن الى بيختلف معنا انو كيف بدنا ناخد الداتا ونرسلها من الفورم ..بدل ما كنا نرسلها من الفورم نفسها وتعمللنا ريلود للصفحة ..صرنا ناخدها بكود اجاكس بس هى كل الفرق اما باقى اكواد الكنترولر وغيره كلو نفس الشغل القديم 

================================================================================

    #067 - Laravel save image to database using Ajax and show response json

-كيف بدنا نرفع الصورة 

-ما علينا الا نحط enctype: 'multipart/form-data', للاجاكس ..زى ما كنا نعمله بالفورم

-وفى عنا 3 اشياء جديدة بدنا نحطها ..ولبعدين بنفهمهم 
processData: false,
contentType: false,
cache: false,

-طيب قبل ما نروح نجرب ....هلقيت عنا البيانات احنا لما جبناها ..جبناها باطريقة هادى 

data: {
        '_token' : "{{ csrf_token() }}",
        'name_ar' : $("input[name='name_ar']").val(),
        'name_en' : $("input[name='name_en']").val(),
        'details_ar' : $("input[name='details_ar']").val(),
        'details_en' : $("input[name='details_en']").val(),
        'price' : $("input[name='price']").val(),
        'photo' : $("input[name='photo']").val(),
    },

-طيب فرضا انا كان عندى 30 حقل مسسلا ...بدى اقعد اكتب فيهم بالطريقة هادى 

-عنا طريقة بتجيبلنا الداتا الى بالفورم كلها بسطر واحد 

-وهى هاى الطريقة الى راح تنفعنا بقصة الصورة ..لانو انا جربت ارفع صورة لما حطيت 
enctype ..رحت ارفعها رجع يقلى 419 تبع ال csrf مع انو انا حاطه بالاجاكس 

-ف المهندس بقول انو هاى الطريقة هى الى راح تنفعنا بقصة الصورة 

-اول حاجة بدنا نطلع عالفورم فوق ونعطيها id عشان اتعامل معه تحت بالاجاكس يعنى 
<form id="offerForm" method="POST"  action="" enctype="multipart/form-data">

-هينى اعطيتها اى دى id="offerForm" 

-هلقيت بدى اتعامل مع هاد ال اى دى بالاجاكس تحت عشان اجيب منو كل بياانت الفورم 

-بنيجى بنعرف متغير مسلا نسميه formData ...وبنقله 

var formData = new FormData($('#offerForm')[0]);

-FormData(): هادى ميثود بالجيكويرى جاهزة 

-يعنى انا هيك قدرت اجيب الفورم كلها بمتغير وهيك ريحت حالى بدل ما اكتب الداتا كلها بايدى تحت ..هيك جابلى كل الداتا تبع الفورم وحطيتها بمتغير 
هلقيت باخد المتغير هاد ..وبحطه تحت بال داتا 

-صار عنا كود الاجاكس هيك ..وهى هادى الطريقة الى راح تثبتها عندك تستخدمها لاى فورم سواء اضافة ولا ابديت ولا اى حاجة 

<script>
    $(document).on('click', '#save_offer', function(e) {
        e.preventDefault();
        
        var formData = new FormData($('#offerForm')[0]);

    $.ajax({
        type: 'post',
        enctype: 'multipart/form-data',
        url: "{{ route('ajax.offer.store')}}",
        data: formData,
        processData: false,
        contentType: false,
        cache: false,
        success:function(data){
        },
        error:function(reject){
        },
    });

    });
    
</script>

-هلقيت روح جرب ...رفعت الصورة مع البياانت ورفعت وكلو تمام التمام
-المهندس اجى يرفع رفعت معو وحفظها بالداتا بيز بالصورة ..ولكن ما حمل الصورة عندو بملف الصور ..كان ناسى يرفع الكومنت عن دالة الصورة الى وقفناها بدالة الستور الدرس الى فات 

-يعنى بالنسبة لكود الستور ..هو هو تبع لارفيل اعادية اخدناه نسخ لصق حكينا كل التغير فقط انو كيف نبعت الداتا بدل الفورم نبعتها من اجاكس وخلص 

-طيب شو بالنسبة للفالديشن ..بكل سهولة راح نعمل نفس الى كنا نعمل بالطريقة العادية هو هو نفسه ولا اشى راح يختلف 

-يعنى خلينا نجيب الريقويست الى عملنا فيه الفالديت ونحطه بدالة الستور تعتنا عادى فش مشكلة 

-بدل ما كنت بستغل عالريقويست العادى زى هيك 
public function store(Request $request){

-حط الريقويست الى عملنا فيه فالديشن بكل سهولة 
public function store(offerRequest $request){

-يعنى الاختلاف بس بالكرييت ..انو انا باخد الداتا من الفورم وبعدين بباصيها للكنترولر الى بيعملى كل حاجة 

-طيب احنا هلقيت بدنا نقله ازا العملية تمت بنجاح اعرضلى رسالة نجاح ...غير هيك طلعلى رسالة انو فيه خطا زى ما كنا نعمل ...لانو عنا هان الصفحة ما بتعمل ريلود حكينا 

-طيب كيف بدنا نعملها 

-بالكنترولر القديم ..كنا لما بدنا نعرض اى حاجة نقله ..ريدايركت باك وخد معك الرسالة الى كتبتلك اياها ...لانو الصفحة كانت تعمل ريلود وترجع بالاول 

-هان الجزئية هادى هى الى راح تختلف معى بالاجاكس ..مش راح تزبط نقله اعمله ريدايركت باك ...هان شو بدنا نقله 

-بدنا نقله 

return response() -> json();

-هادر راح ترجعلى الحاجة الى انا عايزها من هنا ..راح توديها بالميثود الى انا جايبها هنا بالكرييت 

-يعنى الحاجة الجديدة بس انو هاى راح تحل محل الريتورن ريدايركت باك 

-الجيسون راح نتعلمه قدام بشكل موسع لما نصل laravel api الخاصة بالموبيايل 

-طيب احنا بدنا نرجع شكل الريسبونس هاد ..نقله انو العميلة تمت بنجاح مسلا او العملية فشلت ..كيف بنعملها 

-الجيسون هاد راح ياخد اريه اسوسيتف كى وفاليو ..وبتقدر تكتب فيه شو ما بدك 
ولما لما نشرح الجيسون بشكل موسع لقدام ..راح نتعلم كيف نفصله ب تريت منفصل كمان 
عشان ما نكتب كل شوية هاد الريسبونس ..خلص بنفصل بتريت وكل ما بدى اياها بجيبه 

-بدنا نقله مسل stats ونقله انها ترو ..بس عشان نعمل علينا تشيك هناك لا غير 
ونقله المسج 

return response() -> json([
            'status' => true,
            'msg'  => 'تم الحفظ بنجاح ',
        ]);

-status : انا بقله انو لو حفظ ..خليلها ترو ..عشان اعمل عليها تشيك هناك 

-ولو انت عايز ترجع داتا معك ..عادى بتقله شو هى الداتا الى انت بدك ترجعلها معك ..بس احنا هان مش عايزين نرجع داتا معك ..لو بدك ترجع بالطريقة هادى زى هيك 
return response() -> json([
            'status' => true,
            'msg'  => 'تم الحفظ بنجاح ',
            'data' => 
        ]);

-احنا هان بس بدنا نرجعله انو تمت بنجاح ولا لا 

-طيب كيف انا هلقيت بدى اعرف انو هو حفظ بالداتا بيز صح ولا غلط ما حفظ 

-احنا عاملين المتغير $offer الى حاطين فيه دالة الكرييت 
-دالة الكريت الى بتحفظ بالداتا بيز وراح ترجعلى الى حفظته بالمتغير اكيد لانو انا مساوى المتغير بالدالة ..يبقى بدنا نعمل تشيك عالمتغير هاد 

-بدنا نقله if ($offer){}

-يعنى لو فيه اوفر ....ولو ما فى اوفر يعنى الس نقله رجعلى رسالة الفشل 

-صارت عنا ميثود الستور زى هيك 

 public function store(offerRequest $request){
        //save offer in to DB using Ajax
        $img_name = $this -> saveImage($request -> photo, 'images/offers');

        //insert
        $offer = Offer::create([
            'name_ar'    => $request->name_ar,
            'name_en'    => $request->name_en,
            'price'      => $request->price,
            'details_ar' => $request->details_ar,
            'details_en' => $request->details_en,
            'photo'      => $img_name,
        ]);

        if($offer)
        return response() -> json([
            'status' => true,
            'msg'  => 'تم الحفظ بنجاح ',
        ]);

        else
        return response() -> json([
            'status' => false,
            'msg'  => 'فشل الحفظ اعد المحاولة مرة اخرى',
        ]);
    }

==================
ملاحظة : قاعدة اف لما يكون فيها سطر واحد فقط ..ممكن نكتبها بدون الاقواس زى هيك 
if($offer)
        return response() -> json([
            'status' => true,
            'msg'  => 'تم الحفظ بنجاح ',
        ]);
-او هيك بالطريقة الى احنا عافينها كلو واحد 
if($offer) {
        return response() -> json([
            'status' => true,
            'msg'  => 'تم الحفظ بنجاح ',
        ]);
       }

-لانو هادى تعتبر كلها سطر واحد خلى بالك وبنهايته فاصلة منقوطة 
return response() -> json(['status' => true,'msg'  => 'تم الحفظ بنجاح ',]);

-لكن لو بدنا نكتب فيها اكتر من سطر لازم نستخدم الاقواس 
===================

-طيب كيف بدنا نعمل تشيك عالكلام هاد هناك بالجيسون ...بدنا نروح عالبروبيورتز السكس والايرور الى حكينا راح نشرحهم لقدام 

-احنا هلقيت راح نستخدم السكس بس مش راح نستخدم الايرور 
لانو الرسالتين الى عملناهم ...احنا رجعناهم لما يكون ال status 200
انو نجح 

-ف الاتنين راح يكونو بالسكس ..انو راح نرجع داتا يعنى 

-السكس كان هيك 

success:function(data){

        },

data : الداتا هاى الى مممرة بالفنكشن ..هادى فيه الاريه الى بعتناها ..يعنى يا الاريه الاولى تبعت تمت بنجاح او الاريه التانية الى فشل الحفظ 

-طيب يش بدنا نقله فيها نقله لو  data.status = true الى احنا كتبناها هناك 
اعرضلى data.msg 

-خلينا نعرضلها باليرت هلقيت 
success:function(data){
            if(data.status == true)
            alert (data.msg)
        },

-حكناله اعرضلى المسج الى انا رجعته هناك اعرضلى اياه باليرت ..سواء المسج الاول او التانى 

-صار الاجاكس هيك 
$.ajax({
        type: 'post',
        enctype: 'multipart/form-data',
        url: "{{ route('ajax.offer.store')}}",
        data: formData,
        processData: false,
        contentType: false,
        cache: false,
        success:function(data){
            if(data.status == true)
            alert (data.msg)
        },
        error:function(reject){
        },
    });

-هلقيت خلينا نروح نجرب ....خلى بالك احنا فعلنا الفالديشن 

-يعنى خلينى اعمل ارسال للفورم وهى فاضية نشوف شو راح يطلعلنا 

-طلعلنا الستيتس 422

name      status       type   
sotre     422          xhr 

-هاد الستيتس الخاص بالفالديشن الى عاملينه ..نشوف شو مطلعلنا فيه 

{"message":"The given data was invalid.","errors":{"name_ar":["\u0627\u0633\u0645 \u0627\u0644\u0639\u0631\u0636 \u0645\u0637\u0644\u0648\u0628"],"name_en":["\u0627\u0633\u0645 \u0627\u0644\u0639\u0631\u0636 \u0645\u0637\u0644\u0648\u0628"],"price":["\u0633\u0639\u0631 \u0627\u0644\u0639\u0631\u0636 \u0645\u0637\u0644\u0648\u0628"],"details_ar":["\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u0639\u0631\u0636 \u0645\u0637\u0644\u0648\u0628\u0629"],"details_en":["\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u0639\u0631\u0636 \u0645\u0637\u0644\u0648\u0628\u0629"],"photo":["\u0635\u0648\u0631\u0629 \u0627\u0644\u0639\u0631\u0636 \u0645\u0637\u0644\u0648\u0628\u0629"]}}

-مرجعلى رسايل الايرور فالديشن الى انا عاملهم ..بس عشان انا اللغة عربى طلعهم مشفر 
مع انى  انا نزلت الاضافة تعت الجيسون وزبط معى بالمتصفح ..بس هان بالنيتوورك مش عارف ليش عرضها مشفر ....ما علينا 

-لو خليت اللغة انجليزى 
واروح اشوف الستيتس لما بعته فاضى 
{"message":"The given data was invalid.","errors":{"name_ar":["offer name required"],"name_en":["offer name required"],"price":["offer price required"],"details_ar":["offer details required"],"details_en":["offer details required"],"photo":["oferr img required"]}}

-فعلا الرسايل الى انا كاتبهم 

-طيب نروح ندخل بياانات صحيحة ونبعت الفورم بالاجاكس نشوف راح يرجعنا رسالة بالاليرت ولا لا 

-فعلا زبطت حفظ البياات بالاجاكس وبدون ما يعمل ريلود للصفحة وطلعلى الرت برسالة تم الحفظ بنجاح والستيتس 200 تحت 

-لو رحنا على النيتورك على Headers وننزل تحت راح الاقى الداتا الى بعتتها 

Form Data
token: p6KqvXnjhDfy0YRjjuPCUxrWAG2Y229WLyKjbUpn
name_ar: جوال سامسونج 30
name_en: Samsung Phone 30
price: 500
details_ar: رام 4 جيجا 
details_en: Ram 4 GB
photo: (binary)

-طيب روح على Preview
status: true, msg: "تم الحفظ بنجاح "}
msg: "تم الحفظ بنجاح "
status: true

-روح على Response
{"status":true,"msg":"\u062a\u0645 \u0627\u0644\u062d\u0641\u0638 \u0628\u0646\u062c\u0627\u062d "}

-عشان عشان انا كاتب رسالة تم الحفظ بنجاح بالعربى كمان طلعلى اياها مشفرة لانو ما ترجمتها للغتين انا 

-راح نتعلم كيف نعرض رسايل الفالديشن برضو تحت الحقول بالاجاكس ..الى طللعت النا توى بالستيتس 422

-طيب بدنا نعرض الرسالة بديف بدل الاليرت هاد 
-نعمل ديف فوق الفوم ونعرض فيها الرسالة زى ما كنا نعمل قبل 
لما كنا نقله اف السشن هاز كزا كزا 

-طيب احنا هان فش عنا سشن ..لانو حكينا السشن بيجى  ب with طيب هان لا عنا وذ ولا عنا سشن ..لانو وذ كانت بتحط النا كى بالسشن 

-طيب هان كيف بدنا نعرضها ..احنا ما استخدمنا with
احنا استخدمنا دالة تانية تبعت الريسونس جيسون واعطيناها المسج ...الى انا بصل الها بالاجاكس عن طريقى الداتا تبعت السكسس وعرفنا كيف 

-احنا راح نعمل ديف الاليرت سكس ..ونخفيه ...ونعطيه اى دى ...عشان نقدر نخفيه ونظهره بالجيكويرى عن طريق ال اى دى هاد او كلاس اى حاجة يعنى 

-حطيته فوق الفورم وكتبنا فيه المسج الى بدنا اياها 
<div class="alert alert-success" id="success_msg" style="display: none;">
  تم الحفظ بنجاح
</div>

-طيب هو مخفى ...وقتيش بدنا نظهره ...لما تكون datat.status == true

-بنرجع بنقله بدل ما تعرضلى المسج الى انا كاتبها هناك ورجعتلى ..تعرضها باليرت 
لا..ازا الستيتس ترو ...اعملى اظهار للديف الى انا خافيه واكتب فيه رسالة نجاح 

success:function(data){
            if(data.status == true) {
                $('#success_msg').show();
            }
        },
    
او هيك كلو واحد حكينا طالما انا كاتب سطر واحد بس 

success:function(data){
            if(data.status == true)
                $('#success_msg').show();
            
        },

-وهيك المسج الى انا كتبتها هناك بدالة الستور بالجيسون لو امسحها عادى لانو انا خلص استخدمت غيرها الى انا كتبتها وخفيتها عندى هان 

-لو انت حابب ترفع اكتر من صورة اعتبرها ساسك الك واعملها لحاله 

-بس راح اقلك على دالة ممكن تساعدك اسمها ...دروب زون ...هادى توولز بتساعددك ترفع اكثر من صورة باستخدام الاجاكس 

================================================================================

 #068 - laravel delete from database using Ajax- Ajax crud لارافل مع اجاكس

-راح نعمل زر حذف تانى ..نسميه مسلا حذف اجاكس ..ونشتغل عليه الحذف 
بدنا اياها يحذف العرض ويختفى من وجهى بدون ما الصفحة تعمل ريلود ..والصفحة ثابتة يعنى طريقة الاجاكس 

-اول حاجة بدنا ناخد صفحة الاوول ونعمل زيها بفولدر تبعنا تاع الاجاكس
ونعمللها راوت ..ونعمللها ميثود بالكنترولر تعرضلى العروض 
-كلو نفس الشغل القديم ولا اى اختلافات الاخلاف حكينا بس انو نخليه يحذف بالاجاكس 

-نعمل الصفحة ونسميها all.blade.php نفس القديمة هى هى 
-بس راح اعمل زى صفحة الكرييت اخد وراثة من صفحة الااب ...واخد من صفحة الاول القديمة الجدول كله ونحطه عنا ...واعملت الراوتات ع اللغتين ع فكرة ..وضفت بالصفحة هان يو ال تعرضلى اللغتين عشان اغير منهم 

-وهى الراوت
Route::get('all', 'OfferController@all')->name('ajax.offer.all');

-وهى الدالة نفسها هى هى 

public function all(){
        
        $offers = Offer::select('id', 'name_'.LaravelLocalization::getCurrentLocale().' as name', 'price', 'photo', 'details_'.LaravelLocalization::getCurrentLocale().' as details') -> get(); //return collection
        
        return view('ajaxoffers.all', compact('offers'));
    }

-طبعا فاهمين الفرق بين get() انو بتجيبلى كل اشى بالداتا بيز 
اما first() بتعمل سيليكت على رو واحد بالداتا بيز بس ..يعنى بعطيها مسلا اى دى عرض وبتجيبلى بيانات العرض هاد لحاله 

-طيب ممكن احنا نعمل limit اقله مسلا جيبلى بس 10 مسلا 
$offers = Offer::select('id', 'name_'.LaravelLocalization::getCurrentLocale().' as name', 'price', 'photo', 'details_'.LaravelLocalization::getCurrentLocale().' as details')->limit(10) -> get();

-وفعلا جربتها ع 5 عروض ورجعلى بس 5 عروض بالجدول 

-ايش يعنى انو القيت بترجلعى collection 
-جرب انت اعمل ريتورن الها قبل ما تعمل ريتورن فيو ..شوف كيف بدو يرجعلك الداتا 
-بدى اعمل ريتورن ل 5 عروض عنا ..راح يرجعلى اياهم ع هاد الشكل 

============
[
{
"id": 34,
"name": "جوال سامسونج A12",
"price": "500",
"photo": "1629484869.jpg",
"details": "رام 4 جيجا"
},
{
"id": 35,
"name": "جوال سامسونج A31",
"price": "500",
"photo": "1629484938.jpg",
"details": "رام6 جيجا"
},
{
"id": 36,
"name": "جوال سامسونج A51",
"price": "5009",
"photo": "1629484960.jpg",
"details": "رام 8 جيجا"
},
{
"id": 37,
"name": "جوال سامسونج A51f",
"price": "500",
"photo": null,
"details": "رام 4 جيجا"
},
{
"id": 38,
"name": "جوال سامسونج A51A",
"price": "500",
"photo": null,
"details": "رام6 جيجا"
}
]

-هاد هو شكل الريسبونس الى راجعلى من الداتا بيز 
-هو هاد الكوليكشن الى برجعلى اياه وانا بعمل فور لوب عليه 

==============================

-طيب عملنا الصفحة وعرضنا كل العروض عنا 
-بس الجدول ما كان ملون عنا ...رحت جبت رابط البوتستراب سى دى ان وحطيت بصفحة app الى اانا عامل اكستند منها ...لما حطيته لاحظت تلونت اه ...بس الخط صغر كتير 
-لما رحت عالانسبكتب ...لقيت فى ملف scc ل صفحة الapp موجود بالببليك برضو ..محطوط فيه الخط للبودى 
body {
    margin: 0;
    font-family: "Nunito", sans-serif;
    font-size: 0.9rem;

-لما حطيت لينك البوتستارب اخد منو 0.9rem ف طلع صغير 
-ممكن تروح ع ملف السى اس اس وتعدله 

-نيجى هلقيت للحذف ...بدى احذف زر الحذف القديم ..واعمل زر حذف اجاكس ويبعتنى ع روات حذف الاجاكس الى بدنا نعمله 

-اول حاجة خلينا نجيب شغل الاجاكس الى عملنا بصفحة الكرييت ونحطه برضو بصفحة الاوول الى عملناها ...لانو بدنا نعدل عليه هان بصفحة الاول بدل ما نكتبه من جديد 

-طيب هلقيت بدنا نروح عالجدول ونعمل زر جديد نسمه حذف اجاكس مسلا .وخلينى اترجمه بالملف بالملفين لانو صرت اشتغل لغتين انا 
-وخلى بالك الزر هاد مش راح ياخد لينك href لانو اجاكس بدنا اياه 

-يعنى الزر القيم هيو 
<a href="{{route('offers.delete', $offer->id)}}"  class="btn btn-danger">
    {{ __('messages.Delete')}}
</a>

-بدنا نعمل واحد تانى جنبه نقله حذف بالاجاكس ....ونعطيه اى دى ..عشان نستخدم بجملة الاجاكس تحت زى ما عملنا بزر الارسال تبع الفورم ...عشان نقله لما اضغط على الزر هاد نفذلى جملة الاجاكس تبعتى id="delete_btn"

<a href="" id="delete_btn"  class="btn btn-danger">
    {{ __('messages.Delete Ajax')}}
</a>

-هلقيت بالاجاكس تحت بدنا نقله لما نضغط علازر هاد ونعطيه الاى دى ..ونخلى e برضو عشان يمنع الافتراضى ..هادى معناها امنع الافتراضى يعنى ك انى ما ضغطت عليها هى معناها 

-وهان مش فورم عشان ناخد منها الداتا كلها لا ...هان بدنا نرجع لكود الاجاكس الى عملنا قبل الصورة ...الكود القديم 

-والداتا راح نباصى فيها بس ال اى دى تبع العرض الى انا ضغطت عليه عشان نمسحه بس هو الى راح اباصيه وخلص 

-يعنى الاجاكس راح تاخد ال اى دى هاد وتروح تباصيه للكنترولر والكنترولر ينفذ عليه جملة الديليت نفس الشغل القديم 

-واوعى تنسى تباصى التوكين برضو صحيح 
-يعنى بدنا نباصى التوكين وال اى دى ...التوكين بكل مرة راح تباصيه خلص مفهومة 

-طيب هلقيت بدنا نجيب ال اى دى ونحطه بالداتا الى بدنا نباصيها ..لانو دالة الديليت الى بالكنترولر بتاخد منا اى دى عشان تحذفه 

-طيب هلقيت ركز ...ال اى دى هاد كيف بدنا ناخده ونحطه بالداتا تحت 

-يبقى لاززم يكون تحت الزر الى انا بضغط عليه الى هو زر الديليت 
-يبقى بدنا نجيب ال اى دى تبع العرض ..ونحطه تحت الزر ..طيب كيف بنحطه 
-طريقة سهلة جدا ..طريقة الكاستم اتربيوت الى اخدناها مع الزيرو 

-نقله بالزر data-id=""   او offer-id="" اى حاجة مهى هادى كاستم اتربيوت من عنا 
وبنحط فيها ال اى دى الى اجانى مع الاوفر لما عرضتهم 

-صار الزر عنا زى هيك 
<a href="" offer-id="{{ $offer->id }}" id="delete_btn"  class="btn btn-danger">
    {{ __('messages.Delete Ajax')}}
</a>

-هلقيت بدنا نقله بجملة الاجاكس ...اول ما ادوس ع الزر هاد تبع الديليت ...هاتلى الاتربيوت كاستم هاد ....عشان امرره بالداتا معى 

$(document).on('click', '#delete_btn', function(e) {
        e.preventDefault();

        $('#delete_btn').attr('offer-id');
    
-او ممكن اقله this لانو انا ضاغط عليه اصلا 
$(document).on('click', '#delete_btn', function(e) {
        e.preventDefault();

        $(this).attr('offer-id');

-ونخزناه بمتغير ..عشان نمرر المتغير هاد تحت بالداتا زى هسك مسلا 
        var offer_id =  $(this).attr('offer-id');

-var او let هى هى نفسها بالجافا سكريبت لما بدى اجى اعرف متغير 

-وبالنسبة لل3 بروبيرتى الى حطيناهم اخر مرة وقلنا لقدام بنشرحهم ..انا هان مش محتاجهم لانو هان ما بجيب داتا فورم كاملة انا ..انا هان يادوب بباصى داتا بس 

-ونخلى رسايل النجاح والفشل عنا عادى ما احنا راح نعرضها اصلا فش مشكلة 

-صار عنا كود الاجاكس بالشكل هاد 
$(document).on('click', '#delete_btn', function(e) {
        e.preventDefault();

        var offer_id =  $(this).attr('offer-id');

    $.ajax({
        type: 'post',
        url: "{{ route('ajax.offer.store')}}",
        data: {
            '_token' : "{{ csrf_token() }}",
            'id' : offer_id,
        },
        
        success:function(data){
            if(data.status == true)
                $('#success_msg').show();
        },
        error:function(reject){
        },
    });

-طيب هلقيت اى اجاكس لازم يكون الو راوت يروح عليه زيو زى الفورم 
-بالاول كان عنا راوت الديليت بياخد اى دى ونوعه get لانو الصفحة كانت بتعمله ريلود قلنا عادى نستخدم القيت براوت الديليت كان زى هيك بالاول 
Route::get('delete/{offer_id}', 'CrudController@deleteOffer')->name('offers.delete');

-طيب احنا هلقيت بالاجاكس فش عنا ريلود للصفحة يبقى نخليه نوعه post وومكن نخليه قيت فش مشكلة ...بس احنا نخليه بوست احسن ..اونا عامل نوعه بالاجاكس بوست كمان 

Route::post('delete', 'OfferController@delete')->name('ajax.offer.delete');

-وناخد اسمه ونحطه بالاجاكس بدل القديم 
 type: 'post',
        url: "{{ route('ajax.offer.delete')}}",
        data: {
            '_token' : "{{ csrf_token() }}",
            'id' : offer_id,
        },

-ونروح هلقيت نعمل ميثود الديليت الى بروح عليها بالكنترولر راح تكون نفس الميثود القديمة برضو 

-ولكن القديمة كانت تاخد باراميتر ..ال اى دى الى اجاها من الروات ....ولكن احنا هان اجاكس ...يبقى بناخد الريقويست ......طالما احنا شغالين اجاكس يبقى خلص تعاملنا كلو مع الريقويست ..وازا بتلاحظ براوت الديليت ما حطينا متغير لل اى دى عشان نمرره للدالة زى الشغل القديم 

-بالاجاكس بنتعامل مع الريقويست ..الريقويست الى فيه الداتا الى احنا بنعتها ومنو بناخد ال اى دى 

-طيب قبل ما نحط الشغل القديم بالدالة ...خلينا نعمل ريتورن للريقويست الى اجانى ..اشوف جايبلى معو الا اى دى تبع الاوفر الى انا بضغط عليه ولا لا 

public function delete(Request $request){

        return $request;

    }

-طيب نروح هلقيت نجرب شغلنا هل قدرنا نجيب ال اى دى الى تحت الزر ولا لا 

-روح اضغط ع زر الحذف عند اى عرض شوف بالنيتوورك بدو يعرضلك ال اى دى هاد ولا لا 

-فعلا لما اضغط ع العرض 34 ..بيطلعلى 
name      status       type   
delelt     200          xhr 

-فعلا راح ع راوت الديليت وهى الحالة 200

-طيب فوت عالريسبونس وشو شو ماخد 

{"_token":"p6KqvXnjhDfy0YRjjuPCUxrWAG2Y229WLyKjbUpn","id":"34"}

لما اضغط عالعرض 35 بيطلعلى 
{"_token":"p6KqvXnjhDfy0YRjjuPCUxrWAG2Y229WLyKjbUpn","id":"35"}

-وبدون ما الصفحة تعملى ريلود 
-يبقى هيك شغلنا تمام 

-طيب المهندس كان عندو 3 عروض 12 و13 و14 

-كان لما يضغط عليهم كلهم يرجعلو 12 الى هو اول واحد عندو ..ف بقول فى مشكلة 

-بقول المشكلة انو احنا بنتعامل مع زر الديليت عن طريق ال اى دى ..وال اى دى احنا بنعرف انو بنعطيه لحاجة ما بتكرر لانو مععرف فيد للعنصر نفسه ...ولكن احنا زر الديليت هاد نفسه بنستخدمه لكل العروض الى عنا ...يعنى بيتكرر ..بالتالى لازم نستخدم معو الكلاس من ال اى دى 

-راح غير  ال اى دى خلاها ل كلاس ..وتحت بالاجاكس بدل ما كانت 
$(document).on('click', '#delete_btn', function(e) {

-خلاها 
$(document).on('click', '.delete_btn', function(e) {

-بالاخير طلعت الشمكلة عندو ناسى يسكر تاج ابصر ايش شكله تاج الكلاس والكود كان بيطلعلو غلط بس هى مشكلته ...وخلاها كلاس زى ما غيرها عادى ..انا عندى زابطة عل اى دى هيها 


-طيب نرجع هلقيت لميثود الديليت طالما ان شغال صح وال اى دى بيجى معى بالريقويست ..بدنا نجيب نفس الشغل الى اشتغلناه بالميثود القديمة هو هو ..بس بدل ما ناخد ال اى دى من الى دى الى كان يجينى ...لا بدنا ناخده ن الريقويست وخلص

-وحكينا انو بالاجاكس فش عنا حاجة اسمها ريتيرن ريدايركت باك ...عنا الريبونس جيسون بدالها 

يبقى نستخدم الريسبونس جيسون برضو هان ..ناخدها من دالة الستور ونحطها بالديليت 

-نقله بعد ما تحذف ...رجعلى رسالة نجاح 
-صارت الميثود هيك 
public function delete(Request $request){
        
        $offer = Offer::where('id', $request->id)->first(); 

        $offer-> delete();

        if($offer)
        return response() -> json([
            'status' => true,
            'msg'  => 'تم الحفظ بنجاح ',
        ]);

    }
 
 -وهاى الرسالة طبعا عارفين وين بنستلمها ..بالاجاكس بالسكسس ...واحنا خليناها 
 بس عشان ما بدى اعرضها باليرت ..بدى اعرضها برضو زى هديك المرة بديف فوق الجدول 

 -بروح برضو بعمل ديف فوق الجدل وبخفيه وبنعمل نفس القصة الى عملناها بالفورم عادى 

 <div class="alert alert-success" id="success_delete_msg" style="display: none;">
        تم الحذف بنجاح
</div>

-والاجاكس صار هيك 

 $.ajax({
        type: 'post',
        url: "{{ route('ajax.offer.delete')}}",
        data: {
            '_token' : "{{ csrf_token() }}",
            'id' : offer_id,
        },
        
        success:function(data){
            if(data.status == true)
                $('#success_delete_msg').show();
        },
        error:function(reject){
        },
    });

-هلقيت روح احذف عرض ...فعلا حذفت عرض 34 حذفه وطلعلى رسالة النجاح فوق ...ولكن العرض ضل بوجهى 
-لكن لما عملت ريلود للصفحة راح خلص 

-طيب كيف بدنا نحذفها ..وترنحذف من مكانها تروح من وجهى بدون ما اعمل ريلود 

-راح نعمل تريك بسيط جدا ...احنا بنعرف انو كل رو عندى بالجدول الى انا عارضه ..هو عبارة عن رو بالداتا بيز ..صح 

-يعنى احنا لما نقله فور ايتش ..الفور ايتش كلها ..هى عبراة عن صف واحد اصلا 
-يعنى هاى كلها 
 @foreach ($offers as $offer)
          <tr>
-بغاية اخر الفور ايتش الى احنا عاملينها عبارة عن رو واحد 

-طيب لو احنا نعطى <tr> هاد الى عنا نعطيه كلاس نسميه مسلا offerRwo
<tr class="offerRwo">

-ونروح نلزق بااسم الكلاس رقم ال اى دى تبع الاوفر نفسه ..زى هيك 
          <tr class="offerRow{{ $offer -> id}}">
-فاهم انت القصة كيف اخدنا ال اى دى تبع الاوفر عادى زى ما بناخده من المتغير الى اجانى 
@foreach ($offers as $offer)
          <tr class="offerRow{{ $offer -> id}}">
            <td class="success">{{ $offer -> id}}</td>
            <td class="warning">{{ $offer -> name}}</td>
            <td class="danger">{{ $offer -> price}}</td>
            <td class="info">{{ $offer -> details}}</td>

-هلقيت عاد روح عالانسبكت ...بتلاقى رو العرض 35 الكلاس تبعه زى هيك اسمه 
offerRow35  والعرض 36 بتلاقى الروم تبعه ماخد الكلاس offerRow36

-طيب يعنى انا ميزت كل رو هلقيت 

-طيب بدنا نعمل حركة تانية هلقيت ..بدنا نروح ع دالة الديليت ..ونرجع مع الجيسون داتا ....نخليه يرجعلى ال اى دى  دى الى اجانى مع الريقويست ...الى بالاصل اجانى مع الداتا ....نرجعه معانا بالريسبونس جيسون
-نسيه ميلا id او اى اسم عشان نستخدمه هناك زى المسج 

if($offer)
        return response() -> json([
            'status' => true,
            'msg'  => 'تم الحفظ بنجاح ',
            'id' => $request->id,
        ]);

-طيب رجعناها معانا وين بنستلمه ..حكينا بالداتا بالسكس زى المسج لما تكون الداتا ترو 

-بدنا نروح نقله بالجيكويرى هاتلى الرو الى الكلاس تبعه اسمه offerRow وجنبه ال اى دى هاد الى رجع معى ..عشان نصل للصف الى حذفناه نفسه ..ونقله احذفه بالجيكورى 

-لانو اسم الكلاس مع رقم ..والرقم هاد انا مش عارف ..بعرفو من الريسبونس الى رجعته 

-طيعا بالجيكوييرى احنا عارفين كيف بنعمل ابيند يعنى كونكات بعلامة الزايد +
-والدالة الى بتحذف بالجيكويرى  اسمها ريموف 

-صارت لاسكس هيك 

success:function(data){
            
            if(data.status == true){
                $('#success_delete_msg').show();
            }

            $('.offerRow'+data.id).remove();
        },

-هلقيت روح احذف اى رو ..راح تلاقيه انحذف مباشرة بروح من وجهك وبتطلعلك الرسالة 


=================================================================================

             #069 - laravel update database using Ajax
  
-الايديت والابديت 
-نفس الكلام الى بنحكيه كل درس ..الشغل هو هو والميثودات هى هى ولكن بدنا نخليها اجاكس 

-نروح نعمل الروات ..وبدون ما نمرر ال اى دى ..لانو حينا بنمرره بالفورم بودى ..هناك بالاجاكس بالداتا بناخده 

Route::get('edit', 'OfferController@edit');
Route::post('update', 'OfferController@update')->name('ajax.offer.update');

==========

-نروح نعمل دالة الايديت ..نفس  دالة الايديت القديمة بالزبط مع شوية تغير ..الريقويست والجيسون طبعا ..بدها تصير هيك 

public function edit(Request $request){

        $offer = Offer::find($request -> offer_id); //search in given tabel only by id

        if(! $offer){
            return response() -> json([
                'status' => false,
                'msg'  => 'هذا العرض غير موجود',
            ]);
        }

        $offer = Offer::select('id','name_ar', 'name_en', 'details_ar', 'details_en', 'price') -> find($request -> offer_id);

        return view('ajaxoffers/edit', compact('offer'));

    }
 
-طبعا انا هان سميته $request -> offer_id يبقى لا اعمل الاجاكس بدى اسميه بنفس الاسم offer_id لانو هو الى راح استلمه هان ..واروح عالداتا بيز اجيب بيانات الرو هاد بالفايند ..وحكينا الفايند زيها زى الفيرست بتجيبلى بيانات رو واحد فقط ...وبمررها للفيو وبعرضها هناك 

=========


-نروح نعمل الفورم تبعت الايديت ..برضو راح تكون نفس الفورم تبعت الكرييت ولكن بدنا نحط فيها الفاليو لليوزر عشان يعدل عليهم 

-نسخنا صفحة الكرييت وحطيناها بصفحة الايديت وهلقيت بدنا نضيف بس الفاليو ع الحقول الى وصلتنى من الكنترولر لما مررتها 

-زى هيك عليهم كلهم 
<input type="text" class="form-control" name="name_ar" value="{{ $offer -> name_ar }}" id="offername" placeholder="{{ __('messages.offer name in ar')}}">

-وحكينا الاكشن تبع الفورم ما بعهمنا ...واعطيناها اى دى عشان نتعامل معو بالاجاكس 
خلينا نعطيها اى دى بالاسم هاد offerFormUpdate

<form id="offerFormUpdate" method="POST"  action="" enctype="multipart/form-data">

-وننزل تحت عالزر ...برضو نعطيه اى دى ..ونسميه ابديت مسلا ونترجمه 

<button id="update_offer" class="btn btn-primary">{{ __('messages.send')}}</button>

-هلقيت ننزل ع كود الاجاكس تحت ..نفس الى عملنا ولكن نغير اسم اى دى الززر للاسم الجديد تاع الابديت 

    $(document).on('click', '#update_offer', function(e) {

-ونغير اسم الفورم عشان ناخد منها كل بياانتها مرة واحدة الى انكتبت بالحقول عشان نحدثهم كلهم 

        var formData = new FormData($('#offerFormUpdate')[0]);

-شكل الاجاكس خلص هو هو ...راح مثبته عنا ونصير نشتغل عليه كل حاجة حكينا 
النوع بوست واليو ار ال راح نعطيه اسم راوت الابديت الى احنا راح نروح عليه لما نضغط عالزر 

-والباقى كله نفسه ..صار زى هيك الاجاكس 

 $(document).on('click', '#update_offer', function(e) {
        e.preventDefault();

        var formData = new FormData($('#offerFormUpdate')[0]);

    $.ajax({
        type: 'post',
        enctype: 'multipart/form-data',
        url: "{{ route('ajax.offer.update')}}",
        data: formData,
        processData: false,
        contentType: false,
        cache: false,
        success:function(data){
            if(data.status == true)
                $('#success_msg').show();
        },
        error:function(reject){
        },
    });

    });
    
-هلقيت نروح ع صفحة الاوول ..ونورد زر جديد نسميه ايديت اجاكس 
جنب زر حذف اجاكس ...عشان نبعته ع صفحة الفورم تبعت الايديت 

-بس قبل ..احنا حكينا انو روات الايدت والابديت  ما بياخدو باراميتر ال اى دى وحذفناهم قلنا انهم بيتعامل بالريقويست 

-لاااا ..الايديت بياخد اى دى ..اما الابديت ما بياخد ..خلينا نروح نعطى للايدت بارميتر ....ونعطيه تسميه كمان 

-كانو زى هيك 
Route::get('edit', 'OfferController@edit');
Route::post('update', 'OfferController@update')->name('ajax.offer.update');

-صارو هيك 
Route::get('edit/{offer_id}', 'OfferController@edit')->name('ajax.offer.edit');
Route::post('update', 'OfferController@update')->name('ajax.offer.update');

-وهلقيت بدنا نرجع نعمل الزر تبع الايديت اجاكس ..ونباصى فيه ال اى دى تبع العرض الى احنا ضغطنا عليه 

<a href="{{ route('ajax.offer.edit', $offer->id)}}"  class="btn btn-success">
    {{ __('messages.Edit Ajax')}}
</a>

-وهلقيت روح اضغط ع زر تعديل اجاكس راح يطلعلك فورم التعديل

-هلقيت بدنا نخليه يعمللها ابديت بالاجاكس 

-بدنا نروح نعمل ميثود الابديت هلقيت ..الى راح تاخد من كود الاجاكس ...لانو حكينا لما نضغط ع زر الابديت الى هو حفظ ...بدو ياخد منى كود الاجاكس الى بروح ع راوت الابديت ..وروات الابديت بدو يروح ع ميثود الابديت 

-نعمل الميثود 
-اول حاجة بس نخليها ترجعلنا الريقويست نشوف شغلنا صح ولا لا والريقويست اجى معنا ولا لا 

public function update(Request $request){

        return $request;

    }

-اول حاجة الصفحة ما عمل معى ريلوود 
-فعلا روح عالنيتوورك راح تلاقيها هيك 
Name   Status   type
update  200     xhr

-ولو تفوت عليها 
{"_token":"vtMGEZ7vE2gAZoqTjY1GPivoqh2oiqVzgM1bINwo","name_ar":"\u062c\u0648\u0627\u0644 \u0633\u0627\u0645\u0633\u0648\u0646\u062c 45","name_en":"Samsung Phone 45","price":"500","details_ar":"\u0631\u0627\u06456 \u062c\u064a\u062c\u0627","details_en":"Ram 6GB"}

-نرجع لميثود الابديت راح تكون نفس ميثود الابديت العادية برضو 

-بس قبل اى حاجة ...احنا بدنا ال اى دى تبع العرض الى انا بدى اعمله ابديت بالداتا بيز ...وانا مش باعت ال اى دى بالفورم مع البيانات الى اجتنى بالريقويست 

-عادى ...بنروح بنحط فيللد مخفى ونحط فيها ال اى دى ونبعته مع الريقويست 
        <input type="hidden" name="offer_id" value="{{ $offer -> id }}" >

-هلقيت روح جرب كمان مرة راح تلاقيه وصلك بالريقويست مع الداتا الى معى 
{"_token":"vtMGEZ7vE2gAZoqTjY1GPivoqh2oiqVzgM1bINwo","offer_id":"41","name_ar":"\u062c\u0648\u0627\u0644 \u0633\u0627\u0645\u0633\u0648\u0646\u062c 45","name_en":"Samsung Phone 45","price":"500","details_ar":"\u0631\u0627\u06456 \u062c\u064a\u062c\u0627","details_en":"Ram 6GB"}

-هيو "id":"41" du] بعد التوكين ع طول 

-هلقيت بدنا نروح ع دالة الابديت 

public function update(Request $request){

        //validation request

        //check if offer is exist
        $offer = Offer::find($request -> offer_id); //search in given tabel only by id

        if(! $offer){
            if(! $offer){
                return response() -> json([
                    'status' => false,
                    'msg'  => 'هذا العرض غير موجود',
                ]);
            }
        }

        //update data
        $offer -> update($request->all());
        return response() -> json([
            'status' => true,
            'msg'  => 'تم التحديث بنجاح ',
        ]);

    }


-هلقيت روح جرب ...راح يحدث معك البيانات ويطلعلك رسالة تم التحديث بنجاح 
احنا عملناها بصفحة الايديت واخفيناها وعرضناها بالسكس تحت 

-معلومة ..لما اقله 
success:function(data){
            if(data.status == true)
                $('#success_msg').show();
        },

-الداتا هاد function(data) بيحصل عل كل البيانات الى احنا بنمررها بالجيسون هناك

-يعنى بجيبلى كل البيانات الى انا بمررها هان 
return response() -> json([
            'status' => true,
            'msg'  => 'تم التحديث بنجاح ',
        ]);


-ضل علينا كيف نعمل الفالديشن وكيف نظهر مسجات ايرور الفالديشن تحت الحقول ..للدرس الجاى 
-لانى خلى بالك الايرور الى كنا نطبعه قبل الاجاكس الى زيك هيك 
@error('details_ar')
  <small class="form-text text-danger">{{$message}}</small>
@enderror

-هاد ما بينفع نعمله بالاجاكس ...لانو فش عنا سشن بالاجاكس حكينا يعنى مفش ايرور انعمل الو فلاش بالسشن ....بالاجاكس راح نعرضهم بطريقة تانية 


-وبالنسبة كيف نحدث الصورة ما شرحها ..كان كل شرحها بدون الصورة 


=================================================================================

  #081 - laravel validate ajax request and show error messages - لأارافل اجاكس

-كيف نعمل الفالديشن ونعرض الايرر تبعه بطريقة الاجاكس ...شارحه بفيديو 82

-حكينا شغل الكنترول واحد سواءا اجاكس ولا غيرو ....والفالديشن عنا واحد فش عنا فالديش لارافيل اجاكس وفالديشن لارافيل عادية ..لا كلو بينعمل بنفس الطريقة 

-عملنا الفالديشن بالاول وفصلناها بكلاس منفصل ..وكنا نستدعيه بدل الريقويست ازا بتتزكر قبل الاجاكس 

-طيب هلقيت راح نروح ناخد نفس الكلاس الى كنا نشتغل عليه الى بيعمل الفالديش تبع الاووفر العروض ...اسمه offerRequest.php 

-راح نستخدمه بميثود الستور تبعت الاجاكس بدل الريقويست العادى 

 public function store(offerRequest $request){

-وهينا اصلا مستخدمينه ...وحكينا يومها انو لو ادخل الحقول فاضية ..لو تروح عالنيتوورك راح يرجعلك الستيتس 422 الخاص بالفالديشن 
ورجعلى 
{"message":"The given data was invalid.","errors":{"name_ar":["offer name required"],"name_en":["offer name required"],"price":["offer price required"],"details_ar":["offer details required"],"details_en":["offer details required"],"photo":["oferr img required"]}}

-رجعلى المسجات الى انا عاملها بالفالديشن ومترجمها عربى وانجليزى 

-طيب احنا الدرس الى فات بالابديت ما استخدمنا كلاس الفالديشن 

-لو بتلاحظ كنا لما نعمل تحديث للبيانات وهى نفس البيانات ما غيرنا عليها  مسلا 
بروح بقلك الستيتس 200 وبيكتبلك تم التحديث بنجاح 

-ولو تروح عالنيتوورك راح تلاقى الريسبونس هيك 
{"status":true,"msg":"\u062a\u0645 \u0627\u0644\u062a\u062d\u062f\u064a\u062b \u0628\u0646\u062c\u0627\u062d "}

-طيب جرب فضى حقل التفاصيل الى بالعربى والانجليزى ابعتهم فاضين 
-راح تلاقيه ضرب معك ستيتس 500 وطلعلك بالريسبونس اكسبشن 
"message": "SQLSTATE[23000]: Integrity constraint violation: 1048 Column 'details_ar' cannot be null (SQL: update `offers` set `details_ar` = ?, `details_en` = ?, `offers`.`updated_at` = 2021-08-22 17:42:03 where `id` = 41)",
    "exception": "Illuminate\\Database\\QueryException",
    "file": "C:\\xampp\\htdocs\\Laravel_Course\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Connection.php",

-بقلك عندى كونسترينت ...قيود انو الحقل التفاصيل ما بيقبل قيمة فاضية 
constraint violation: 1048 Column 'details_ar' cannot be null

-طيب جرب دخل حقل السعر ارقام وحروف مسلا قله السعر (800usd)
-برضو راح يدخله عادى ..لانو انت مش عامل فالديشن اصلا 

-طيب لو بدنا نعمل فالديشن عليه ...راح نعمل زى دالة الستور ..راح نحط ريقويست الفالديشن بدل الريقويست العادى 

-يعنى بدل 
    public function update(Request $request){

-بدنا نقله 
public function update(offerRequest $request){

-بكل سهولة ...بس اعطيناه كلاس الفالديشن وخلص 

-يعنى نفس شغلنا القديم 

-هلقيت روح دخل السعر ارقام وحروف ..شوف راح يقبل ويقله الستستس 200 وتم التحديث بنجاح 

-ولا راح يقلك ستيتس 422 الخاص بالفالديشن 
{"message":"The given data was invalid.","errors":{"name_ar":["offer name must be unique"],"name_en":["offer name must be unique"],"price":["offer price required must be only numeric"],"photo":["oferr img required"]}}

-طلعلى الفالديشن بالريقويست ريسبونس ...يبقى الامرو تمام 

-ولو تفوت جنب Response فى حاجة اسمها Preview
راح تلاقيه مرجع فيها 
{message: "The given data was invalid.",…}
    errors: {name_ar: ["offer name must be unique"], name_en: ["offer name must be unique"],…}
    name_ar: ["offer name must be unique"]
    name_en: ["offer name must be unique"]
    photo: ["oferr img required"]
    price: ["offer price required must be only numeric"]

-يعنى الايرور هاد هو رجعلى لحاله باى ديفولت بالكنسول فى اوبجيكت اسمه errors 
والابجيكت هاد بجيبلك اياهم مترجمين انت كيف مترجمهم ..وازا مش عامل رسايل انت ..بجيبلك الرسايل الديفولت 

-طيب كيف احنا بدنا نمسك الرسايل ههادى الى رجعتلى بالاوبجيكت ايرورز ونعرضهم تحت كل حقل 

-بالاول قب الاجاكس كنا نقله ريتورن ريدايرك باك ..وذ ايرورز ..يعنى يخزن الايرروز هاى بالسشن يعمللها بفلاش ...وانا لما يعملى ريتورن عالصفحة كنت اعرضهم هناك 
بالطريقة هادى @error() ونكتب الايرور الى بدى اعرضها تحت كل حقل 

-طيب احنا عنا هان بالاجاكس حكينا فش الكلام هاد ..فش عنا سشن 
احنا بنرجع الى بدنا اياه بريتورن ريسبونس جيسون 

-وبنروح بنستقبل بالجاف سكريبت تحت ..بكود الاجاكس ..كنا نستقبله بالسكس 

-طيب الايرور تعت الفالديشن كيف بدنا نرجعها ونستقبلها هان 
راح نستقبلها ب 
error:function(reject){
        },

-اول حاجة بدنا نعملها خلينا نروح تحت كل حقل ..ونعمل السمول الى بنعرض فيها رسالة الايرور 
ونعطيه اى دى باسم الحقل الى انا فيها ....يعنى مسلا السعر بالاول كان هيك 
@error('price')
<small class="form-text text-danger">{{$message}}</small>
@enderror

-حكينا هان ما في عنا @error('price')

-بدى اخلى السمول لحالها واعطيها اى دى باسم الحقل الى انا فيه يدل عليه يعنى 
مسلا اسميه price_error ...ونششل المسج منها خلى بالك {{$message}}

<small id="price_error" class="form-text text-danger"></small>

-واروح اعمل لكل الحقول الى عنا نفس الكلام عشان انادى عليها تحت واعطيها الايرور تبعها 

<small id="name_ar_error" class="form-text text-danger"></small>
<small id="name_en_error" class="form-text text-danger"></small>
<small id="price_error" class="form-text text-danger"></small>
<small id="details_ar_error" class="form-text text-danger"></small>
<small id="details_en_error" class="form-text text-danger"></small>
<small id="photo_error" class="form-text text-danger"></small>

-يعنى اخدنا ال name تبع كل حقل زى ما هو بالزبط وضفنا عليه _error هيك سمسنا ال اى دى 

-طيب ايش الخطوة التانية هلقيت 

-حكينا انو بالكنسول بيجينى الرسايل باوبجيكت اسمه errors ...يبقى لازم اعمل فور لوب عليه 

-كيف بنعمل فور لوب عليهم بالجافا سكريب ..عن طريقة ميثود اسمها each()

-احنا حكينا الايرور بيرجعلى هيك 
{message: "The given data was invalid.",…}
    errors: {name_ar: ["offer name must be unique"], name_en: ["offer name must be unique"],…}
    name_ar: ["offer name must be unique"]
    name_en: ["offer name must be unique"]
    photo: ["oferr img required"]
    price: ["offer price required must be only numeric"]

-وبدنا نعمل عليهم لووب بميثود ال اييتش ...يعنى مسلا بدنا نقله ...اول خطا عنا شو اسمه name_ar: ["offer name must be unique"] 
بدنا نقله الاسم هاد name_a ونضيف عليها _error ....وابعت فيه الايرور وسجلها معايا 

-راح نستخدم هادى الطريقة ونثبتها بكل شغلنا دايما ..بدى اكتبها واشرحها تحت ونشوف شو بدنا نحط فيها 

error:function(reject){

            var response = $.parseJSON(reject.responseText);
            $.each(response, function(key, val){
                $("#" + key + "_error").text(val[0]);
            });

        },

-شو معنا الكلام هاد الى مكتوب

-اول حاجة الكلام هاد بنكتبه بالفنكشن تبعت الايرور وليس فنكش السكس 
لانو الايرور هادد بيرجع باى ديفولت من لارافيل برجعلى الفالديشن الى احنا فصلنا بكلاس برا 

عنا الريجيكت error:function(reject) هو الى بجيبلى الريسبونس 

-انا هان بقله رجلى الريسبونس ع شكل تيكست 
var response = $.parseJSON(reject.responseText);

-وخزنته بمتغير اسمه ريسبونس اى اسم سميه عادى ...هلقيت بدنا نعمل لوب عالمتغير هاد الى خزنا فيه الريسبونس ع شكل تيكست 

-خلى بالك المتغير هاد بجيبلى الحاجاتين الى رجعولنا بالريسبونس 

-بجيبلى المسج ..الى  هى الرسالة هادى 
{message: "The given data was invalid.",…}

-وبجيبلى اوبجيكت الايرورز هاد 
errors: {name_ar: ["offer name must be unique"], name_en: ["offer name must be unique"],…}
    name_ar: ["offer name must be unique"]
    name_en: ["offer name must be unique"]
    photo: ["oferr img required"]
    price: ["offer price required must be only numeric"]

-طيب احنا ما بدنا المسج شو دخلنى فيها ..انا بدى اوبجيكت الايرورز الى فيه مسجات الفالديشن 

-يبقى بدى اقله responses.errors يعنى اعملى لوب على الايرورز الى بمتغير الريسبونس الى انا جبته 

-يعنى بدها تصير بدل 
$.each(response, function(key, val){

-بدنا نقله 
$.each(response.errors, function(key, val){

-يعنى انا هيك لفيت بلووب على الايرورز الى هو اريه اوف اوبجيكت ..اما المسج هى مسج واحدة شو بدى فيها الوب عليها 

-ميثود ال ايتش هاى بتاخد الكى والفاليو ..انا مررتهم عالفنكشن بهاد الاسم 
function(key, val) سميهم اى اسم عادى بس هو هيك اوضح اشى ..عشان بدنا نستخم التسمية تحت باللوب 

-هلقيت بدنا نقله اختار الى ال اى دى هاد ....الى هو اى دى السموول الى بدى اعرض فيه ...وحط فيه الفاليو تبعت الكى هاد 
$("#" + key + "_error").text(val[0]);

-مفهومة ما بدها شرح 

-طيب بدنا نقله التيكست تبعها حط فيه قيمة الفاليو تبعت الكى هاد 
-مسلا كانت هيك 
name_ar: ["offer name must be unique"]

-الكى هو name_ar
-الفاليو هو ["offer name must be unique"]

-يعنى الفاليو عبارة عن اريه ...يعنى ممكن تاخد اكتر من قيمة ف انا بدى اول اندكس فيها الى هى اول رسالة ف بقله الاندكس تبعها الزيرو بدى اول واحد ...وهى اصلا بترجعلى بس رسالة واحدة يعنى بس برضو لانها اريه بقله اعطينى الاندكس 0 الى فيك 
text(val[0])

-صارت عنا جاهزة هيك 

error:function(reject){

            var response = $.parseJSON(reject.responseText);
            $.each(response.errors, function(key, val){
                $("#" + key + "_error").text(val[0]);
            });

        },

-وهاى هى اسهل طريقة عنا لنعرض فيها اخطاء الفالديشن باى فورم عنا سواءا اضافة او تحديث ...يعنى راح نثبتها بكل شغلنا هيك 

-طيب هلقيت خلينا نروح نجرب نعمل اضافة لعرض جديد ...ندخل كل الحقول فاضية ونعمل ارسال 

-فعلا طلعلى ايرورز الفالديشن تحت كل حقل وبدون ما الصفحة تعمل ريلود 

-طيب هلقيت روح دخل بحقل السعر ولا اى حقل دخل فيه بياانات واعمل ارسال 

-ضلت الرسايل موجودة كلها ...ولكن فعليا مسج ايرور السعر راح ...بس ضل بوجهى

-طيب انا كيف بدى اياه يروح من وجهى مباشرة مجرد ما انا ادخل فى قيمة صح 
وارجع اعمل ارسال 

-هان بدنا نقلو اعملى ريست reset لكل حقول السمول الى بتعرضلى المسجات مجرد ما اضغط ع زر الارسال .....يعنى فضيلى اياهم من قيمهم وارجع حط القيم الجديدة 

-انت راح تلاحظ مجرد رمشة عين انو انعمل الها ريست كلها ورجعت المسجات تحت الحقول الى ما زالت خطا ...والى اتدخل فيها قيم صح خلص راح منها الايرورو ..لانو انا لما ضغط كمان مرة انعمل الهم ريسيت ..رجع يحطها ما لقاها خلص ما بيعرضها 

-طيب كيف بدنا نعمل الكلام هاد ....بدنا نعمل بالجيكويرى ...اقله لما اضغط عالزر ..فضضيلى حقول السموول كلها من التيكست 

-طريقة سهلة جدا ...بدنا نجيب كل الحقول الى عنا ..ونقله خلى التيكست تعتها فاضية 

$(document).on('click', '#save_offer', function(e) {
        e.preventDefault();

        $("#name_ar_error").text("");
        $("#name_en_error").text("");
        $("#price_error").text("");
        $("#details_ar_error").text("");
        $("#details_en_error").text("");
        $("#photo_error").text("");

-وهيك كلوو تمام

-واعملت نفس الشغل كله بصفحة اليديت عشان وانا بعمل ابديت كمان 

================================================================================

  #070-laravel Middleware create your custom middleware - لارافل middlewares

- بدنا نتعلم كيف نعمل ميدل وير بايدينا ..زى الى لارافيل عاملاهم 

-بدنا نتعلم كيف نعمل laravel multi Authentication using gurds

-راح نعرف شو معناها ونعرف شو معنا قاردس ...ولكن قادرس انت اعرف معاناه هلقيت انها نوع 

-الميدل وير ..هو حماية او طبقة لارفايل عاملاه عشان تخلى ناس معينى تزور بعض الصفحات ..وناس تانية ما تقدر تزورها عشان ما تحققت فيها الشروط 

-زى مسلا اول الكورس ..كان عنا راوت اسمه home كل ما نيجى نزوره واحنا مش عالمين تسجيل دخول ...كان يرجعنا ع صفحة اللوق ان ..هو هاد الميديل وير 

-يعنى طالما انت مش متسجل بالسشن تبع البراوزر اسمك وايميلك ...خلص بيعملك ريدايركت لصفحة اللوق ان 

-هاد معمول باى ديفولت من لارافيل جاى مع نظام التسجيل وتسجيل الدخول الى احنا نزلناه واشتغلنا عليه ..حكينا نو عاملى ميدل وير باى ديفولت هو كان اسمه auth 

-يعنى لازفايل عاملة صفحة باى ديفولت بتيجى مع نظام التسجيل وتسجيل الدخول
اسمها home 
- هاى بدون ما تعمل تسجيل دخول ما راح تقدر تفوت عليها 
لكن اعمل تسجيل دخول ...اول ما بيعرضلك بيعرضلك صفحة الهووم وبقلك انت الان عملت تسجيل دخول 

-وانا عملت اول الكورس راوت اسمه تشيك برضو حطيت عليه الميدل وير الاوث 
//Middleware
Route::get('chek', function () {
    return "teto";
})->middleware('auth');

-لو تجرب توزره وانت مش عامل تسجيل دخول برضو ما راح يدخلك 

-واعملنا كمان ميدل وير الفيرفيكيشن 
//الدرس 28 Login And Regester

Auth::routes(['verify' => true]);

Route::get('/home', 'HomeController@index')->name('home')->middleware('verified');

-الا هو انك تعمل تاكيد من الايميل من الرابط الى راح يصلك ..شرحناها اول الكورس 
-انو هاد يوزر لازم يكون معمول فيرفيكيشن للايميل تبعه 

-وع فكرة هاى كمان المفروض تنكتب بالشكل هاى برضو 

Route::get('/home', 'HomeController@index')->name('home')->middleware('verified', 'auth');

-ولكن هاى الاوث باى ديفولت جاى مع لارفايل ومحطوط وجاهز سواءا كتبناه هان ولا لا 

-طيب احنا مش كاتبينه هان ...طيب ليش هو ازا عمل فيرفكيشن بيتحول لصفحة الهوم واحنا مش عاملين عليه الميدل وير اوث 

-لا هو موجود زى ما حكينا ...ولكن حكينا الميدل وير بينكتب اما بالشكل هاد عالروات 
او بالشكل التانى الى هو نحطه بالكنترولر نفسه ع مستوى الكنترولر كله بنحطه بالكنستراكت 

-يعنى انت لو تروح تفوت ع 'HomeController@index' راح تلاقيه محطوط ع ميثود الاندكس عادى 
-هى الكنترولر ..انا باقى عامله جوا ع مستوى الكنترولر 
 public function __construct()
    {
        $this->middleware('auth');
    }

    public function index()
    {
        return view('home');
    }

-وحكينا انو بتقدر تعمل اكسيبت لمثود معينة كمان لو مش عايز تطبق عليها 

-طيب احنا هلقيت فهمنا ايش هو الميدل وير 

-طيب ايش هو المكتوب فيه ..عشان لو بدى اعمل حاجة زيه ..افرض مسلا انا بدى اعمل كاستم اوث بايدي...كيف بدنا نكتبه 

-طيب احنا بنعرف ملف الكيرنال الى فيه الميدل ويرات ...وحكينا اى ميدل وير بنعمله لازم نعمله ريجيستر بملف الكيرنال هاد ...يعنى فيهم كان جاى مع لارفايل باى ديفولت ..وفى منهم احنا حطيناهم زى ال5 تعين مكتبة الكامرا 

-وهلقيت اى ميدل وير احنا بننشاه بايدينا لازم نسجله هان برضو بالكيرنال 

-من الحاجات الى بتنزل مع لارافيل باى ديفولت الى هو الاوث 
protected $routeMiddleware = [
        'auth' => \App\Http\Middleware\Authenticate::class,
        'auth.basic' => \Illuminate\Auth\Middleware\AuthenticateWithBasicAuth::class,
        'bindings' => \Illuminate\Routing\Middleware\SubstituteBindings::class,
        'cache.headers' => \Illuminate\Http\Middleware\SetCacheHeaders::class,
        'can' => \Illuminate\Auth\Middleware\Authorize::class,
        'guest' => \App\Http\Middleware\RedirectIfAuthenticated::class,
        'password.confirm' => \Illuminate\Auth\Middleware\RequirePassword::class,
        'signed' => \Illuminate\Routing\Middleware\ValidateSignature::class,
        'throttle' => \Illuminate\Routing\Middleware\ThrottleRequests::class,
        'verified' => \Illuminate\Auth\Middleware\EnsureEmailIsVerified::class,
    
-طيب شو المكتوب فيه هاد الاوث 
-احنا عرفنا وظيفته بس ما عرفنا الكود الى مكتوب فيه ..لو نروح نفوت عليه ..اضغط كنترول وكليك شمال لما تقف عليه ..بيبعتك عالكلاس تبعه 

-فتحلنا الكلاس تبعه Authenticate.php 

-مكتوب فيه  

<?php

namespace App\Http\Middleware;

use Illuminate\Auth\Middleware\Authenticate as Middleware;

class Authenticate extends Middleware
{
    /**
     * Get the path the user should be redirected to when they are not authenticated.
     *
     * @param  \Illuminate\Http\Request  $request
     * @return string|null
     */
    protected function redirectTo($request)
    {
        if (! $request->expectsJson()) {
            return route('login');
        }
    }
}

-طيب لو رحنا دخلنا برضو منو على اليوز الى فيك 
use Illuminate\Auth\Middleware\Authenticate as Middleware;

-راح يدخلنا عالكلاس الاصلى تبعه 

-هاد الكلاس هو الى بيعمل تشيك على اليوزر ..فى ميثود اسمها هاندل ..ولقدام كل شغلنا راح يكون بميثود الهاندل هادى 
public function handle($request, Closure $next, ...$guards)
    {
        $this->authenticate($request, $guards);

        return $next($request);
    }


-هادى هى الى بتهندل الريقويست ...بتنادى على ميثود اسمها authenticate
        $this->authenticate($request, $guards);
-بتقلو اعملى اوثونتكيت للريقويست والجارد ..الجارد حكينا معناها نوع ..يعنى نوع الشخص الى داخل هل هو يوزر عادى ولا ادمن ولا مشرف ولا اى حاجة 
-وراح نتعمق فيها كتير لسا الجارد 

-طيب الميثود هادى لو ننزل تحت راح نلاقيها 
protected function authenticate($request, array $guards)
    {
        if (empty($guards)) {
            $guards = [null];
        }

        foreach ($guards as $guard) {
            if ($this->auth->guard($guard)->check()) {
                return $this->auth->shouldUse($guard);
            }
        }

        $this->unauthenticated($request, $guards);
    }

-هادى الميثود بتعمل auth->guard($guard)
-بتعمل اوث جارد ..سواء اى جارد جاي النا يوزر مسؤول مشرف دكتور وبتعمله تشيك 
$this->auth->guard($guard)->check()

-check() : هادى ميثود بتعمل عليه تشيك ..هل هو داخل ولا لا ..ازا داخل يبقى تمام 
مش داخل بتعملو رسالة انو انت مش داخل ..عن طريق ميثود unauthenticated
        $this->unauthenticated($request, $guards);

-لو ننزل تحت راح نلاقى الميثود هادى برضو وراح نلاقى مكتوب فيها الرسالة انو انت مش داخل 
protected function unauthenticated($request, array $guards)
    {
        throw new AuthenticationException(
            'Unauthenticated.', $guards, $this->redirectTo($request)
        );
    }

-بتقلو Unauthenticated وبعدها اسم الجارد 
-وبتعمل ريدايركت عن طريق ميثود ريدايركت برضو راح تلاقيها تحت 
protected function redirectTo($request)
    {
        //
    }

-وهيك بمنتهى البساطة مبدايا عرفنا السستم كيف ماشى ..عشان نقدر نعمل حاجة زيها 

-هاد رقم واحد ...رقم اتنين ..بدنا نتعلم كيف ننشا ميدل ووير زى هاد الى شرحنا وكيف نعمله ريجيستر بالكيرنال ...وراح نشوف الوظيفة تبعته واحنا نعملها ع كيفنا 

==============

                نبد شغلنا ونقول بسم الله الرحمن الرحيم 

-بدنا نعمل راوت يبعتنا ع كنترولر فيها ميثود الميثود ترجعلى صفحة مكتوب فيها 
انت الان مسجل دخول او بالانجليزى you are login
-ازا انت قدرت تفوت ع هاى الصفحة يبقى انت اوثونتكيتك خلص سواءا مشرف ولا ادمن ولا يوزر ع حسب ما نقله 

-طيب خلينا نروح نعمل الكنترولر نسميه مسلا اى اسم CustomAuthController 
ونحطه كمان بفولدر ال auth تبع الكنترولر عشان نكون منظمين 
C:\xampp\htdocs\Laravel_Course (master -> origin)
λ php artisan make:controller Auth\CustomAuthController
Controller created successfully.

-بدنا نعمل ميثود اسمها adult يعنى الناس البالغين فوق 18 سنة مسلا 

-هاد المثال موجود بالدوكيومنتيش تبعت لارافيل ..هو اكتر مثال راح يوضحلنا الفكرة 

-الميثود راح تعرضلى صفحة اسمها index موجود بفولدر راح نعمله اسمه CustomAuthController

class CustomAuthController extends Controller
{
    public function adult(){
        return view("customAuth.index");
    }
}

-نروح نعمل الفولدر بالفيوز ونحط فيه صفحة الاندكس 
@extends('layouts.app')
@section('content')
    <div class="container">
        <p class="alert alert-success">You Are Allowed</p>
    </div>
@endsection

-نروح نعمل الروات هلقيت 
Route::get('adults', 'Auth\CustomAuthController@adult');

-وومكن نكتب النيم سبيس فوق عادى ..بالقروب زى ما كنا نكتب البريفكس وغيرها 
لانو انا حكيت الكنترولر هاد بفولدر الاوث خلى بالك مش برا ..يعنى النيم سبيس تبعته الاوث 

-زور الرابط عشان تتاكد شغلنا صح لهلقيت 
http://localhost/Laravel_Course/public/adults

-فعلا رجعلنا الفيو تعتنا 
You Are Allowed

-طيب احنا هلقيت اى واحد بيقدر يفوت عالصفحة سواءا مسجل دخول ولا مش مسجل سواءا يوزر عادى ولا ادمن ....يبقى الخطوة الجاية بدنا نعمل ميدل وير نقله فيه انو ممنوع حد يزور هاى الصفحة الا البالغين الى عمرهم فوق 18 سنة 

-ولازم تكون اووثونتكيشن عندى انت عشان اجيب العمر تبعك ..يبقى برضو بدنا نروح عالداتا بيز ونضيف عمود العمر بجدول اليوزر 

-عشان اعمل عليه تشيك بعد ما يعمل تسجيل دخول طبعا ...اعمل تشيك على عمره ازاهو بالغ اخليه يفوت الصفحة مش بالغ لا ما يفوتها 

-طيب نروح نعمل الميدل وير ونسميه اى اسم مسلا نقلهCheckAge

-الامر الى بينشا النا ميدل وير هو 
λ php artisan make:middleware CheckAge

C:\xampp\htdocs\Laravel_Course (master -> origin)
λ php artisan make:middleware CheckAge
Middleware created successfully.

-راح تلاقيه انضاف بفولدر ال Middleware الى بال app

-لو نفتحه راح نلاقيه بالشكل هاد 
<?php

namespace App\Http\Middleware;

use Closure;

class CheckAge
{
    /**
     * Handle an incoming request.
     *
     * @param  \Illuminate\Http\Request  $request
     * @param  \Closure  $next
     * @return mixed
     */
    public function handle($request, Closure $next)
    {
        return $next($request);
    }
}

-هان بميثود الهاندل مجرد انو بدنا نكتب اللوجيك تبعنا 

-طيب اول خطوة بعد ما انشانا الميدل وير حكينا بدنا نسجله بملف الكيرنال
-نروح ع ملف الكيرنال ونسجله ...ناخد اى ميدل وير فيه نسخ لصق ونغير الاسم فيه 
-زى هيكك
        'CheckAge' => \App\Http\Middleware\Authenticate::class,

-هلقيت ضل انو نكتب اللوجيك تبع الميدل وير ..ونحطه على الراوت الى بدنا اياه
-او ممكن نحطه ع كنترولر كامل زى ما حكينا 

-خلينا نروح نحطه عالروات الى عملنا ..ولكن لسا ما راح يعملى اشى لانو انا ما كتبت فيه اى لوجيك لسا 
Route::get('adults', 'Auth\CustomAuthController@adult')->middleware('CheckAge');

-طيب احنا حكينا ما راح يعمللنا اى حاجة لانو فاضى لسا ما فى لوجيك 
-طيب انا بعد ما حطيته ...بالاول كان يدخلنى عليه وانا مش مسجل دخول ...لكن لما حطيته وهو فاضى كمان ...ما دخلنى رجعنى ع صفحة اللوق ان 

-معلومة هان ...اى ميديل وير بنعمله ..يعنى بدو يعمل تشيك على شخص موجود عنا بالداتا بيز ...يبقى لازم الشخص هاد بالمستوى الاول يكون اوثونتكيشن 

-يعنى انت جرب اعمل تسجيل دخول وبعدين زور الروات ..راح تزوره بدون اى مشكلة هلقيت 
-واى واحد مسجل دخول برضو راح يقدر يزور الرابط لانو لسا ما كتبنا فيه اى لوجيك يعنى هو وقلته واحد لهلقيت 

=========
-معلومة تانية عالهامش ..المهندس كان ناسى الباسورد تبعه ..المهم عمل ريست للباسورد وبعتلو الرابط عالايميل الى بنعمل منو ريسيت 
-المعلومة انو الرابط الى بيصلك عالايميل عشان تعمل منو ريسيت للباسورد مدته بس 60 دقيقة ...بعده بصير غير مفعل بينعمل الو اكسبير خلص يعنى مش راح يشتغل معك خلصص 
وهاد برضو ميدل وير معمول من لارافيل كمان باى ديفولت 
=========


-بس اول حاجة خلينا نروح نسمى الروات تبعنا ونعملو بقروب وخلص وننظم شغلنا 
ونخلى النيم سبيس والميدل وير فوق 
-يعنى بدل ما كان هيك 
Route::get('adults', 'Auth\CustomAuthController@adult')->middleware('CheckAge');

-صار هيك 
Route::get('adults', 'Auth\CustomAuthController@adult')->middleware('CheckAge');

Route::group(['middleware' => 'CheckAge', 'namespace' => 'Auth'], function(){

    Route::get('adults', 'CustomAuthController@adult')->name('adult');

});

==================


-طيب احنا فش عنا حقل العمر بالداتا بيز خلينا نروح نعمله 
-نعمل بجدول اليوزر حقل اسمه age ونعطيه قيمة ديفولت مسلا 14 سنة ...يعنى اخلى الحقل يقبل قيمة نل ..ولو اليوزر وهو  بدخل ببياانته نسى يكتب العمر تبعه ..تنحط باى ديفولت 14 ..مفهومة 
-عملنا الحقل ..واعطى لكل اليوزر القديمة الى عندى اعمارهم كلهم 14 سنة لانو عملته باى ديفولت 14 سنة 

-وطلما زودنا حقل جديد ...يبقى لازم نروح عالمودل المكافء لجدول اليوزر ونضيفه بالفيلبل عشان يتشاف معنا ...اوعى تنسى الخطوات هادى 
protected $fillable = [
        'name', 'email', 'password', 'mobile', 'age', 'expire'
    ];

-هلقيت بدنا نروح عالميدل وير الى عملناه ع ميثود الهاندل ونكتب اللوجيك تبعنا 
-طبعا ميثود الهاندل ماخدة الريقويست 
public function handle($request, Closure $next)

-واحنا حكينا من الريقويست بنقدر نصل لاى بيانات بدنا ايااه ..لانو انا بفورم داخل من فورم يبقى فى ريقويست اجى معى ومنو بصل للى بدى اياه 

-هلقيت بدنا ناخد من الريقويست هاد العمر تبع الشخص الى سجل دخول ..ونعمل عليه تشيك ازا هو اكبر من 18 ولا لا ازا اكبر نقله خليه يكمل الريقويست تبعه وين ما هو رايح ....ولكن ازا اصغر ارجعه عالصفحة الى هو جاى منها مسلا اقله ريتورن باك 

public function handle($request, Closure $next)
    {
        //logic middleware
        if($request -> age < 18){
            return redirect()->back();
        }
        
        return $next($request);
    }

-طيب انا بقله return $next($request); خليه يكمل بالريقويست تبعه ..يعنى يكمل عالمكان الى هو رايح عليه ...طيب طيب شو هو المكان الى رايح عليه ..الى هو الراوت الى انا عامل عليه الميدل وير هاد الى دخل عيه ..يعنى مفيش لازمة انو نكتبه هان خلص ...والروات هاد عليه ميثود والميثود هادى بترجعلنا الصفحة تعتنا االى كاتبين فيها you are Allowed


==============================================

-معلوماااااااااااات مهنمة احنا حكيناها غلط بالاول 

-معلومة رقم 1 

-انا كيف بدى اعرف اليوزر الى عندى عمره 18 سنة ولا لا ..احنا حكينا فوق عن طريق الريقويست وانو داخل من فورم وباخد العمر من الريقويست 
//logic middleware
        if($request -> age < 18){
            return redirect()->back();
        }

-ولكن الشرح الجديد الى حكاه المهندس 

-انا كيف بعرف عمر اليوزر ...فى ميثود المفروض الكل يكون عارفها ..انو كيف انا بحصل على معلومات الشخص الى عامل ااوثونتكيشن ..يعنى الى سجل دخول 

-لو انت قلت 
        Auth::user();
-هادى بتجيبلى بياانات كل اليوزر الى داخل عنا ...يعنى تقدر تصل منها على الجدول الى اسمه يوزر ..ببياناته كله يعنى تصل لاى حقل بدك اياه 

-يعنى لو بدى اصل لل اى دى بقله 
Auth::user() -> id;

-او عنا طريقة تانية عن طريق ميثود بتجيبلى ال اى دى مباشرة مسلا زى هيك 
-ميثود بتجيبلى ال اى دى مباشرة من الاوث نفسه زى هيك 
        Auth::id();

-ولكن احنا بدنا نثبت الطريقة الاولى معنا عشان نشتغل عليها ..يعنى لو بدى اصل للعمر شو بقله 
        Auth::user() -> age;

-هيك انا وصلت لعمر الشخص من جدول اليوزر 

-طيب خلينا نسجله بمتغير عشان نستخدمه بال اف تحت 

-صارت ميثود الهاندل بالطريقة الصحيحة زى هيك 

public function handle($request, Closure $next)
    {
        //logic middleware
        $age = Auth::user() -> age;
        if($age < 18){
            return redirect()->back();
        }
        
        return $next($request);
    }

-هيك اول حاجة لازم انت تكون عامل لوق ان 
-خلى بالك لما استخدمت الاوث عملى ايمبورت الو فوق 
use Illuminate\Support\Facades\Auth;



=====================

-معلومة رقم 2

-حيكنا لما زرنا الروات بعد ما حطينا عليه الميدل وير وهو فاضى ...انو رجعنا لصفحة اللوق ان ..وشرحنا ليش ..انو اى ميدل وير بينحط لازم بالدرجة الاول يعمل عليه تشيك هو اوثونتكيشن ولا لا 

-طبعا الكلام هاد غلط ...هو حولنا لصفحة اللوق ان لانو انا احنا بملف الكيرنال اخدنا نسخ لصق وغيرنا بس الاسم ونسيت اغير المسار واحط فيه اسمه الكلاس صح 

-انا اخدت ميدل وير الاوث الى هو هاد 
        'auth' => \App\Http\Middleware\Authenticate::class,

-وعدلت عليه بس الاسم الى بالكى خليته هيك 
        'CheckAge' => \App\Http\Middleware\Authenticate::class,

-ونسينا نكتب اسم كلاس الميدل وير ال عملناه ....هو هيك ماخد ميدل وير الاوث خلى بالك \App\Http\Middleware\Authenticate::class

-احنا عاد بدنا نخليه ياخد الميدل وير تبعنا الى هو الكلاس الى انشاناه بدها تصير هيك 
        'CheckAge' => \App\Http\Middleware\CheckAge::class,

-عشان هيك كان يرجعنى ع صفحة اللوق ان ..لانو انا مستخدم فيه ميدل وير الاوث كنت بس مغير اسمه  

-'CheckAge' وهان الاسم عادى ممكن تغيره وتستدعى بالروات بنفس الاسم هاد الى انت كتبته يعنى هاد مجرد اسمه للميدل وير الى هو هاد 
\App\Http\Middleware\CheckAge::class,

-هلقيت روح وقف شغل اللوجيك الى بالهاندل ...وروح زور الروات عادى راح يدخلك عليه سواء مسجل دخول ولا لا ...لانو لسا الميدل وير فاضى ما عملنا فيه لوجيك 

==========


-طيب هلقيت نرجع نخلى اللوجيك الى كتبناه بالهاندل ونروح نزور الراوت الى عملنا عليه الميدل وير الى اسمه adults خلى بالك انا عمرى 14 هلقيت بالداتا بيز يعنى المفروض ما يدخلنى 

-اول ما نعمل تسجيل دخول ..طبعا بدخل مباشرة ع صفحة الهوم 
http://localhost/Laravel_Course/public/home

-طيب وانت بصفحة الهوم ادخل ع الروات الى عملنا عليه الميدل وير تعتنا 
http://localhost/Laravel_Course/public/adults

-راح يرجعك ع نفس صفحة الهوم الى انت كنت فيها ..لانو احنا حكناله لو عمره اقل من 18 اعملو ريتورن ريدايركت باك ..يعنى للصفحة الى اجى منها 

-طيب مسلا كنا بالصفحة هادى 
http://localhost/Laravel_Course/public/ar/offers/all

-وانت فيها روح فوت برضو ع نفس الرابط ...برضو راح يرجعك لنفس الصفحة 

-طيب المهندس كان فاتح الصفحة نفسها ال ادولت 
http://localhost/Laravel_Course/public/adults

-وراح عمل الهندل والشغل اللوجيك الى عملناه ...ومنها اجى يزور الرابط كمان مرة لا خلى عمره 14 

-هان طلعلو ايرور 

This page isn’t working
localhost redirected you too many times.
Try clearing your cookies.
ERR_TOO_MANY_REDIRECTS

-شو معناه الايرور هادا 
localhost redirected you too many times.

-انو هو رجع للصفحة الى اجى منها ...شو هى الى هى صفحة ال ادولت ..عمل اف لقاه اصغر من 18 ...رجع لنفس الصفحة ....وهكذا بضل يعملو لووب ومش عارف يطلع منها 
لانو انت حاكيله ارجعلى للصفحة الى قبل ...طيب هو الصفحة الى قبل اساس هى صفحة ال ادولت الى خلى عليها ميدل وير بشروط ...عشان هيك راح غير بال اف 
وكتبلو يحولو مش ريدايركت باك ...لا اعطاه صفحة تانية خالص ..يقلو انو انت مش مسموح الك تشوف الصفحة اسم الراوت الى عملو الى بيبعته عالصفحة no.adult 

-وقلو بدل 
            return redirect()->back();
-خلاه يعمل ريدايركت عالراوت الجديد الى بيبعته ع صفحة مكتوب فيها انت غير مسموح الك 
            return redirect()->route('no.adult');


-انا ما بدى اعملها خلينى زى ما انا هيك ..هو بالصدفة يعنى طلع معو الخطا هاد ..ومنيحح الى طلع عشان نتعرف عليه 

-طيب هلقيت روح عالداتا بيز وغير عمر اليوزر خليه ل 18 ...وتعال زور الراوت نفسه ...راح يخليك تزوره عادى لانو خلص انت عمرك اكتر من 18 

-وهيك خلصنا المثال تبعنا وفهمناه الحمدلله 

-انت لو فهمت المثال البسيط هاد ..راح تعمل اصعب مثال بيجى ع بالك خلص 

-الدرس الجاى راح نتكلم عن الملتى جاردس ..ونخليه فى عنا يوزر وادمن 
اليوزر يقدر يشوف بس الموقع نفسه تاع الفرونت اند ..اما الادمن يقدر يزور لوحة التحكم 

==================

-معلومة عالهامش 

-انت لما تكون عامل تسجيل دخول ...طبعا راح يحولك ع صفحة الهوم 
وان عامل تسجيل دخول ...لو بدك تزور ثفحة ال login مش راح يبعتك عليها 
لانو انت عامل تسجيل دخول خلص ..بضل يعملك ريدايركت ع صفحة الهوم ..لانو انت سجلت دخولت وتسجلت بالسشن تبع البراوز 

-الى بدك تفههمه هان ...انو هاى برضو ميدل وير لارفايل عاملاها برضو باى ديفولت 

-ازا حابب تشوفه اسمه RedirectIfAuthenticated.php بفولدر الميدل وير بتلاقيه 
-وموجود فيه هاى الميثود الهاندل الى بتعملك ريدايركت ع صفحة الهوم 
public function handle($request, Closure $next, $guard = null)
    {
        if (Auth::guard($guard)->check()) {
            return redirect(RouteServiceProvider::HOME);
        }

        return $next($request);
    }

===============================================================================

    #071 - laravel multi guards multiple authentication guards لارافل

-بدنا نعرف كيف نعمل الجارد ..فهمنا كيف نعمل الميدل وين هلقيت بدنا نفهم الجارد يعنى خاص بالحماية ...مسل جارد نوعه ادمن ..جارد نوعه يوزر عادى 

-بدنا عمل صفحتين مسلا ..واحدة ك انها الموقع العادى نخلى اليوزر الى نوع الجارد تبعه يوزر يفوت عليها 

-وصفحة ك انها صفحة الادمن نخلى بس الى نوع الجارد تبعه ادمن هو الى يفوت عليها 

-ولازم نكون عاملين تسجيل دخول عالموقع 

-طيب نروح نعمل الصفحتين الى حكينا عنهم ...ونخيهم بفولدر الفيوز مباشرة ما بدنا نحطهم باى فولدر 

-الصفحة الاولى نسميها مسلا site.blade.php
@extends('layouts.app')
@section('content')
    <div class="container">
        <p class="alert alert-success">You Are user and you are log in</p>
    </div>
@endsection

-اى شخص معو يوزر نيم وباسورد ومسجل دخول يقدر يشوفها 

========

-والصفحة التاينة نسميها admin.blade.php
@extends('layouts.app')
@section('content')
    <div class="container">
        <p class="alert alert-success">You Are admin and you are log in</p>
    </div>
@endsection

-ك انها لوحة التحكم تعت الادمن يعنى ...وهادى الى راح يزورها لازم يكون الو يوزرنيم وباسورد ومسجل دخول ولكن انت ادمن 

=========

-نروح نعمل الراوت تبعتنا ع نفس الكنترولر الى شغالين عادى برضو مش مشكلة 
Route::get('site', 'Auth\CustomAuthController@site')->name('site');
Route::get('admins', 'Auth\CustomAuthController@admin')->name('admin');

-نروح نعمل الميثودات 
-وتاكد انو الكنترولر الى احنا عاملينه مش حاطين فيه بالكنستراكت ميدل وير 
عشان بلاش لما نيجى نجرب يعملك مشاكل وما تكون عارف انو فى عندك ميدل وير بالاساس 
وعنا الكنترولر طيعا فش عليه ميدل وير ...احنا حطينا الميدل وير الى عملناها ع رابط ال ادولت برا 

public function site(){
        return view("site");
    }

    public function admin(){
        return view("admin");
    }

-جربتهم للراوت وعرضولى وكلو الامور تمام هيك 

-طيب هلقيت الصفحتين هدول فش عليهم ولا ميدل وير ولا جاردس ...يعنى اى واحد راح يقدر يزوره سواءا مسجل دخول ولا لا سواءا ادمن ولا يوزر 

-طيب شو هو الجارد ....حكينا هو النوع 
-طيب احنا عنا كم نوع جاردس بدنا نعمله اتنين حكينا ..يوزر وادمن 
-طيب لو بدنا نعمل جارد جديد مشرف مسلا ولا بروفيسور نخليهم يزورو بس صفحات خاصة فيهم ..هل فى مشكلة ..لا طيبعا ...لانو حكينا انو عنا ملتى جاردس ..قد ما بدك اعمل 

-طيب قبل ما نعمل الجارد تبعينا 

-لو نفكر شوية ...ماش السستم تبع التسجيل وتسجيل ادخول تبع اللارافيل الى نزلناه 
الى بيعمللنا اوثونتكيشن 

-ماش المفروض انو يكون فى جارد ...مهو هاد يوزر 

-صحيح ...معمول فيه جارد اسمه يوزر ...هادا الديفولت جارد معمول باى ديفولت ...طيب هاد وين بنلاقيه..عشان نشوف كيف معمول ونعمل زيه 
-وايش يعنى جارد ووين بدور 

-لو تروح ع فولدر ال config وتفوت ف فايل اسمه auth.php 
هاد الملف مسؤول عن كل حاجة بالاوثونتكيشن 

-اول حاجة راح تلاقى اريه اسمه ديفولت 
'defaults' => [
        'guard' => 'web',
        'passwords' => 'users',
    ],

-الجارد اسمه ويب هاد الديفولت تبعك الى بدور بجدول اسمه يوزرس

-لو تنزل تحت راح تلاقى الجارد تبعنا الويب 

'guards' => [
        'web' => [
            'driver' => 'session',
            'provider' => 'users',
        ],

        'api' => [
            'driver' => 'token',
            'provider' => 'users',
            'hash' => false,
        ],
    ],

-الديفولت جارد تبعنا حيكنا اسمه ويب ...بيدور بالدرايفر ..داريفر هاد يعنى السشن ...يعنى اى حاجة بتتخزن بالسشن ...كش شغلنا بالاوتنتكيشن بيتخزن بالسشن طالما انت شغال مواقع ويب ...اما لو شغال تطبيقات موبايل ...ولسا لقدام راح نتكلم عليها بكون الدرايفر اسمه توكين ...ما تهتم فيه هلقيت خلينا بالويب هلقيت 

-نرجع لجارد الويب 
'guards' => [
        'web' => [
            'driver' => 'session',
            'provider' => 'users',
        ],
    
-حيكنا الدرايفر ويب ...طيب شو البروفايدر ..يعنى الجدول ...كل جارد الو جدول بدور فيه ...وهان جارد الويب ..الجدول تبعه الى بدور فيه هو جدول اليوزرس 

-يبقى الديفولت اوثنتكيشن الى بيجى باى ديفولت مع لارافيل الو جارد وهينا عرفناه اسمه ويب 

-طيب ليش ما كتبناه الجارد هاد واحنا بنجيب باليوزر اى دى 

-يعنى لما عملنا الميدل وير الجديد تبعنا جبنا اليوزى اى دى او عمره زى هيك 

        $age = Auth::user() -> age;

-ليش ما كتبنا الجارد فيه ...يعنى هو المفروض ينكتب بميثود الاوث ونحط فيها اسم الجارد ..ميثود الاوث بتاخد اسم الجارد ..يعنى المفروض زى هيك كتبناها 
        $age = auth('web')::user() -> age;
-بس احنا ما كتبناه لانو هو ديفولت عادى لو كا كتبناه ..ليش نكتب الكلام هاد كله مع انو هو ديفولت ونقدر نجيبه بالطريقة هادى ع طول 
        $age = Auth::user() -> age;

-يعنى هاد ممكن تنساله سؤال بمقابلة عمل وهو هاد الى راح يميزك عن غيرك 
يقله شو يعنى هاد ....بدك تقلو انو مفروض يكون بميثود الاوث نحط اسم الجارد ولكن عشانه ديفولت خلص ما بنحطه 

-يعنى ممكن نكتبها بالميثود زى هيك ونخليها فاضية لانو الجارد ديفولت 
        $age = auth()::user() -> age;
-او نكتبها بطريقة الكلاس نفسه كلاس الاوث
        $age = Auth::user() -> age;

وتقله انو الجارد هاد متعرف بملف الكونفيق بملف الاوث ..وبيعمل سيرش يعنى بدول بجدول اليوزر 

-يعنى انت هيك ممتاز فهمت القصة كلها ..انو الاوثنتكيشن تبع لارفيل الى معمول باى ديفولت ..الو جراد اسمه ويب ...والويب هاد بدول بجدول اليوزر هو هيك معمول ديفولت 

-يعنى لما كتبناله $age = Auth::user() -> كيف لارافيل عرفت انو بدى العمر تبع اليوز وجابتلى اياه من جدول اليوزر مش من جدول تانى غيرو مسلا ما راحت تدول بجدول العروض مسلا ..ليش راح مباشرة تدول بجدول اليوزر ورجعتلى النتيجة .....لانو شرحناها فوق خلص انو باى ديفولت الها جارد اسمه يب والجارد هاد بدور بجدول اليوزر 

-طيب احنا هيك فهمنا الطبخة كيف ماشية وصرنا محترفين 
-طيب هلقيت بدنا نعمل 2 جاردس واحد لليوزر العادى وواحد للادمن 

-بمنتهى البساطة بدنا نروح نعمل زى ما لارافيل عاملة الويب تبعها 
-راح ناخده نسخ لصق تحته ونغير عليه 

-جارد الويب الديفولت ...هو باى ديفولت بدور بجدول اليوزر العاديين اصلا 
يعنى خلص هو هاد راح يكون تبع اليوزر ..راح نكتب عليه كومنت عشان نفهم 
بدى اكتب فوقه //users site يعنى هاد هو الى راح يفوت ع صفحة السايد تبعتنا او  ع الموقع الفرونت اند 

-يبقى احنا بدنا نعمل واحد تانى نسميه ادمن ونخليه يدور بجدول الادمن 
راح نعمل جدول للادمن طبعا ونعمل الو مودل كمان 

-عملنا جارد الادمن ..سميته admin وحكتله بالبروفايدر  يبحث بجدول اسمه admins راح ننشا هلقيت 

'admin' => [
            'driver' => 'session',
            'provider' => 'admins',
        ],

-الاسم سميه اى حاجة بدك اياها هاد مجرد اسم بس ...سميه admin سميه manager اى حاجة بدك اياها ولكن البروفايدر ..بدك تركز هاد اسم الجدول الى بدنا نبحث فيه 

===============
-يعنى انت جارد الويب ممكن تغير اسمه عادى مش شرط تلتزم فيه ...عادى غيره هان سميه مسلا site واطلع فوق ع اول الصفحة وغيره باريه الديفولت خليه اسمه site برضو وخلى بالك ازا بدك تغير اسمه وين مكان بدك تلاقيه بدك تتعامل معو بالاسم الجديد هاد 
===============

-صارت الجاردس زى هيك 
'guards' => [
        //users site
        'web' => [
            'driver' => 'session',
            'provider' => 'users',
        ],

        //admin
        'admin' => [
            'driver' => 'session',
            'provider' => 'admins',
        ],

        'api' => [
            'driver' => 'token',
            'provider' => 'users',
            'hash' => false,
        ],
    ],

-وننزل تحت هلقيت عالبروفيادرز ..كان فيها بس جدول اليوزر زى هيك 
'providers' => [
        'users' => [
            'driver' => 'eloquent',
            'model' => App\User::class,
        ],

-بدنا نضيف الها كمان جدول الادمن زى ما حكينا اوعى تنسى تضيفه هان 
'admins' => [
            'driver' => 'eloquent',
            'model' => App\Models\Admin::class,
        ],

-انا بدى احطه المودل تبعه بفولدر المودلز الى عملناه ما بدى اخليه برا زى اليوز وبدى اسميه Admin المودل الى بدى اعمله 
-مفروض نكون عاملينه يعنى هو والجدول بعدين نعمل الكلام هاد 

-صارت عنا البروفايدرز زى هيك 
'providers' => [
        'users' => [
            'driver' => 'eloquent',
            'model' => App\User::class,
        ],
        'admins' => [
            'driver' => 'eloquent',
            'model' => App\Models\Admin::class,
        ],

-طيب نروح هلقيت ننشا الجدول تبعنا ...نسميه admins
-عملت الجدول وخليت فيه 4 اعمدة id  name  email  password ...ما حطيت فيه الكرييت والكرييت ابديت تعين الوقت ...خلص لما اعمل المودل بعملهم فولس 

-نروح نعمل المودل واخليه بفولدر المودلز ..وبدى اسميه Admin 
C:\xampp\htdocs\Laravel_Course (master -> origin)
λ php artisan make:model Models\Admin
Model created successfully.

-نروح عالمودل هلقيت ونعمل فيه الفيلبل والهيدن الى حكينا عنهم 
-هى المودل تبعنا 
<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Model;

class Admin extends Model
{
    protected $table = "admins";
    protected $fillable = ['name', 'email', 'password'];
    protected $hidden = ['password'];
    public $timestamps = false;
}

-طيب هلقيت الخطوة الجاية ..انو بدنا نعمل ميدل وير عالناس هادى ..نقلو لازم يكون مسجل دخول عندى ولازم يكون نوع الجارد تبعه ادمن او نوع الجارد تبعه ويب الى هو تاع اليوزر العاديين 

-طيب معلومة مهمة ما كنا ناخد بالنا منها بالاول 

-احنا لما كنا نكتب ميدل وير الاوث ع اى راوت مسلا راوت التشيك ..كنا نكتبه زى هيك 
Route::get('chek', function () {
    return "teto";
})->middleware('auth');

-طيب انا هلقيت لو كنت عامل تسجيل دخول ...ورحت ازور هاد الروات 
http://localhost/Laravel_Course/public/chek

-راح يفتحلى وراح يطبعلى كلمة تيتو ....ليش لانو عليه ميدل وير الاوث ..وميدل وير الاوث معناه انو لازم اكون مسجل دخول الى يوزر نيم  وباسورد ومسجل دخول 

-لو ما كنت مسجل دخول ما راح اقدر ازور رابط التشيك هاد 

-طيب انا لما كنت مسجل دخول .....بناءا على ايش هو دخلنى وفتحلى الراوت 
كيف عرف من انا ووين راح يدور عليا 

-حكينا انو لازم يكون الو جارد والجارد بيبحث بجدول معين ...وفعليا هاد الميدل وير الى اسمه اوث ..فعليا الو جارد باى ديفولت اسمه ويب وبيبحث بجدول اليوزر حكينا 

-يعنى هو فعليا مفروض احنا نكتبه هيك ...نقله الميدل وير وشو نوع الجارد تبعه 

-يعنى ميدل وير على جارد ...يعنى الميدل وير هاد راح يتطبق على مين ..على اليوزر ولا على الادمن ولا على الدكاترة ولا ع مين بالزبط .....يعنى الميدل وير هاد راح يبحث باى جدول 

-طيب هى لارافيل شمت ع ايدها وراحت بحثت بجدول اليوزر ولقتنى مسجل هناك والى اسم وبياانت ...واجت فتحتلى الروات 

-لا طبعا ما شمت على ايدها لانو هو باى ديفولت ميدل وير الاوث حكينا بياخد جارد اسمه ويب الى بدور بجدول اسمه يوزر 

-يعنى احنا المفروض نكتب الميدل وير زى هيك اسم الميدل وير وجنبه الجارد تبعه 

-زى هيك middleware('auth:web')

Route::get('chek', function () {
    return "teto";
})->middleware('auth:web');

-ولو تجرب تكتبه زى هيك ...راح يزبط عادى معك ولا راح يعملك اى مشاكل ...ولكن هو عشان باى ديفولت عارفه انو الجارد تبع الاوث اسمه ويب خلص ما بنكتبه جنبها 

-فعلا خليته بالطريقة هادى مكتوب ورحت ورت الروات وانا مسجل دخول دخلنى عليه بدون مشاكل 

-يعنى انا هلقيت لما بدى صفحة الادمن ما يزورها الا الى مسجلين عندى بجدول الادمن ويكونو عاملين تسجيل دخول ...بدى اقله الميدل وير اوث على ادمن زى هيك 
middleware('auth:admin');

-admin هاد الجارد الى احنا اعملناه الى بدورلى بجدول ال admins

-طيب عشان نجرب شغلنا صح جرب اعمل ميدل وير اوث على ادمن براوت التشيك زى هيك 
Route::get('chek', function () {
    return "teto";
})->middleware('auth:admin');

-وروح زور راوت التشيك 
-ما دخلنى رجعنى للصفحة الى انا فيها كنت ...لانو هو هيك راح دور بجدول الادمن ..ما لقانى مسجل هناك ...ما دخلنى رجعنى ريدايركت باك للصفحة الى انا فيها 

-وهيك كل شغلنا تمام الحمدلله 

-وكذلك الميدل وير الى عملناه تبع البالغين ..لما كتبنا اسم الميدل وير تبعه ما كتبنا الجارد تبعه ..لانو خلص لارافيل بتعررف لحاله انو الجارد الديفولت عندها هو جارد الويب ..يعنى بتدور بجدول اليوزر ع طول ...لانو بفايل الكونفيق تبع الاوث موجود انو الديفولت تبعه جارد الويب خلص 

'defaults' => [
        'guard' => 'web',
        'passwords' => 'users',
    ],


================================================================================

     #071 - laravel multi guards multiple authentication guards لارافل

-نروح نطبق الى عملناه الدرس الى فات عنا عالراوت الى عملناها 

Route::get('site', 'Auth\CustomAuthController@site')->middleware('auth:web')->name('site');
Route::get('admins', 'Auth\CustomAuthController@admin')->middleware('auth:admin')->name('admin');

-وحكينا الاول ممكن نكتبه بدون ويب زى هيك 
Route::get('site', 'Auth\CustomAuthController@site')->middleware('auth')->name('site');

-طيب هلقيت روح جرب فوت ع راوت السايت 
http://localhost/Laravel_Course/public/Site

-راح تفتحلك الصفحة عادى ..لانو انا مسجل بجدول اليوزر اصلا وعامل تسجيل دخول 

-طيب فوت ع راوت الادمن 
http://localhost/Laravel_Course/public/admins

-مش راح يدخلك ..راح يحولنى ع صفحة الهوم لانو راوت الادمن معمول عليه ميدل وير الاوث على جارد ادمن يعنى بدور بجدول الادمن راح يدور بجدول الادمن ما لقانى فحولنى ع صفحة الهوم 

-طيب لو انا عملت تسجيل خروج ..ورحت بدى  ادخل ع راوت الادمن برضو
-راح تلاحظ انو راح يحولنى ع صفحة اللوق ان ..تبعت اليوزر العاديين الى معمولة باى ديفولت من لارفيل http://localhost/Laravel_Course/public/login

-طيب الادمن مفروض يفوت ع لوحة التحكم من صفحة لوق ان خاصة فيه للادمن 

-طيب بدنا نروح نعمل صفحة لوق ان عشان يفوت منها الادمن 
نخلي اسمها مسلا admins/login عشان يفت منها الادمن 
 http://localhost/Laravel_Course/public/admins/login

-اول اشى بدنا نروح ع جدول الادمن بالداتا بيز ...ونخدل ادمن بايدينا 
وبالنسبة للباسورد انا راح اخد الباسورد المشفر من 1 ل 9 الى بجدول اليوزر واحطه عندى هان للادمن لانو لازم يكون مشفر ..وانا بدخله بايدى قاعد 

-لانو الادمن فش الو صفحة تسجيل زى اليوزر العادى ...بس الو صفحة تسجيل دخول 
لو الو صفحة ريجيستر ..ع هيك كل الناس بتقدر تسجل عندى بجدول الادمن وتصير ادمن 

-المهندس بقول ..احنا ممكن ندخله بالتنكر بدل ما ندخله بالطريقة هادى بايدينا 
شو هى طريقة التنكر انا مش عارف بقول راح يشرحها 

-بدى اسميه thaer admin والباسورد زى ما حكيت من 1 ل 9 انسخه من جدول اليوزر 
والايميل بدى احط ايميلى 

هى لما دخلته بالداتا بيز عشان تتزكر البيانات ازا بتحب من هان 
INSERT INTO `admins` (`id`, `name`, `email`, `password`) VALUES ('', 'thaer admin', 'eng.thaerellouh@gmail.com', '$2y$10$aJlislC8l41ooBgcOvBnuuIFyKe1J8r0Wh2EdePus4L9PHslSxd6y');

-المهندس قال راح ننسخ الباسورد من اليوزر وناخده عنا ...والدروس الجاية راح نتعلم كيف ندخل الادمن عن طريق التنكر لانو الادمن ما بينفع يكون اله صفحة ريجيستر يسجل منها 

-طيب هلقيت لو نروح نفوت باسم الادمن هاد او ايميلو من صفحة اللوق ان العادية الديفولت تبعت لارافيل ...مش راح نقدر نفوت برضو ...لانو صفحة اللوق ان هادى الديفولت معمول عليها ميدل وير الاوث على جارد الويب الديفولت يعنى بدور بجدول اليوزر مش جدول الادمن 

-طيب احنا راح نعمل راوت ..يبعتنا ع صفحة فيها فورم لوق ان للادمن 
-مفروض نعمل كنترولر للادمن ..بس عشان الوقت بنعملو ع نفس الكنترولر خلص 

Route::get('admin/login', 'Auth\CustomAuthController@adminLogin')->name('admin.login');

-ما حطينا عليها الميدل وير عالروات ...عادى لانو اى واحد ممكن يقدر يشوفها ..ولكن مش راح يقدر يفوت منها ع صفحة الادمن الى بدنا نعملها او الى عملناها قبل وحطينا عليها الميدل وير اوث  جارد ادمن ..منا بدى اخلى الفورم هاى تبعت تجسيل الدخول تبعتنى عالصفحة الى عملناها الى حطينا عليها الميدل وير هادى 
Route::get('admins', 'Auth\CustomAuthController@admin')->middleware('auth:admin')->name('admin');


-نروح نعمل الميثود ونعمل الفيو تعت الفورم 
public function adminLogin(){
        return view("auth.adminLogin");
    }

-الفيو راح تكون بسيطة جدا بدون فالديشن ولا اشى لانو احنا فاهمين الكلام هادا طبعا وكيف نعمله

-راح ناخد صفحة اللوق ان العادية تعت لارفايل نسخ لصق ونعدل عليها نكتب فيها بالترويسة مسلا صفحة دخول الادمن عشان نميزها 
راح نعملها بفولدر الاوث برضو الى بالفيوز ..جنب صفحة اللوق ان العادية يعنى 

-التغير فيها بس بدنا نغير الترويسة تبعتها ونغير الروات تبعت الفورم نخليه ع راوت تبعنا راح نعمل ..عشان يعمل تشيك عالادمن الى بدو يسجل دخوله هل هو موجود عنا بجدول الادمن ولا لا 
ولكن الراوت تبع فورم اللوق ان العادية بروح بيعمل تشيك ع جدول اليوزر 

-يعنى بدل 
<div class="card-header">{{ __('Login') }}</div>

<div class="card-body">
    <form method="POST" action="{{ route('login') }}">

-بدها تصير 

<div class="card-header">تسجيل دخول الادمن</div>

<div class="card-body">
    <form method="POST" action="{{ route('save.admin.login') }}">

-خلينا نروح نعمل الراوت هاد الى حطيناه route('save.admin.login')
-هاد الروات الى بدها تروح عليها الفورم تبعت تسجيل دخول الادمن 
-خلينا نعمله وبدو يكون من نوع بوست لانو بدو يتعامل مع فورم 

Route::post('admin/login', 'Auth\CustomAuthController@checkAdminLogin')->name('save.admin.login');

-ع فكرة اسم الروات admin/login نفس الى قبله ...ليش خليته بنفس الاسم 
عادى طالما هما نوعين مختلفين واحد بوست وواحد قيت مش مشكلة مش راح يتخربط فيهم لما ينادى عليهم ..وازا بدوك تغيرو عادى غيرو 

Route::get('admin/login', 'Auth\CustomAuthController@adminLogin')->name('admin.login');

Route::post('admin/login', 'Auth\CustomAuthController@checkAdminLogin')->name('save.admin.login');

-طيب نروح نعمل الميثود الى كتبناها بالورات هادى checkAdminLogin
هادى الى بدها تعمل تشيك عالادمن الى سجل دخول هلو هو موجود عنا بالجدول ولا لا 

-طيب الميثود هادى كيف بنعملها 
public function checkAdminLogin(){
        
    }

-الميثود هادى راح تكون ماخدة جارد اسمه ادمن يعنى راح تعمل تشيك وتدور بجدول الادمن 

-طيب ميثود اللوق ان العادية احنا ما كتبناها ..لانو هى كانت ديفولت معمولة من لارافيل وجاهزة 

-طيب الميثود هادى كيف بدنا نعملها ...المهندس جابها جاهزة وبدو يشرحها بقول اختصارا للوقت هو عملها وحطها جاهزة وبدو يشرحها 

-هى الميثود انا كتبتها 

public function checkAdminLogin(Request $request)
    {
        $this->validate($request, [
            'email'   => 'required|email',
            'password' => 'required|min:6',
        ]);

        if (Auth::guard('admin')->attempt(['email' => $request->email, 'password' => $request->password])) {

            return redirect()->intended('/admins');
        }

        return back()->withInput($request->only('email'));
    }

-شو معناها الميثود 

-اول اشى انا بدى ادخل بالايميل وبالباسورد بالتالى بدى اعمل عليهم فالديت زى هيك وعارفين الطريقة وفاهمينها من قبل ..لانهم جايين الى من ريقويست ..وعشان استخدمت الريقويست لازم ينعمل الو ايمبورت فوق خلى بالك 
$this->validate($request, [
            'email'   => 'required|email',
            'password' => 'required|min:6',
        ]);

-طيب تانى حاجة اعملنا شرط 
if (Auth::guard('admin')->attempt(['email' => $request->email, 'password' => $request->password])) {

            return redirect()->intended('/admins');
        }

-اول حاجة احنا حكينا انو الميثود هادى راح تعمل تشيك ع جدول اسمه ادمينز لانو عينا جارد الادمن وحكينا جارد الادمن بيبحث بجدول الادمنز الى علمناه 

Auth::guard('admin') مفهومة يعنى انا بقله انو الشخص الى سجل دخول بدك تعمل عليه تشيك بجارد الادمن الى سجلناه بملف الاوث وقلنا لما سجلناه انو بيبحث بجدول الادمنز 

attempt يعنى شوفلى هدول متسجلين عنا بالجدول الى رحنا نبحث فيه ولا لا 

شو هما هدول ...الايميل الى موجود بالجدول هل بيساوى الايميل الى اجانى من الريقويست ...والباسورد الموجود بالجدول هل يساوى الباسورد الى اجانى مع الريقويست ولا لا 

-لو متسجلين فعلا ولقاهم الميثود هادى attempt راح ترجع ترو 

-بالتالى اعملى ريتورن ريدايركت للادمن 
return redirect()->intended('/admins');

-/admins شو هى هادى الى بدى اعمل ريتورن عليها ...هادى الصفحة الى عملناها وحطينا عليها ميدل وير الاوث على ادمن وقلنا ممنوع حد يزورها الا يكون بجدول الادمن ..هادى 
Route::get('admins', 'Auth\CustomAuthController@admin')->middleware('auth:admin')->name('admin');

-غير هيك راح يرجع بالخطا 
return back()->withInput($request->only('email'));

-ع فكرة انا عشان استخدمت ميثود attempt لهلقيت المحرر عاملى خطا احمر تحت 
ممش عارف ليش ..مع انى عامل ايمبورت للاوث فوق ...ولكن الموقع شغال عادى بالمتصفح ما بيعملى ولا خطا ...ولكن ازا مسحت الجارد ادمن من قبلها عادى بروح عنها الخط الاحمر زى هيك يعنى اخليها 
if (Auth::attempt(['email' => $request->email, 'password' => $request->password]))
-بس طبعا لو خخليتها هيك عالفاضى راح يبحثى ع جارد الويب بجدول اليوزر 

-ما علينا المهم بالمتصفح ما بتعملى خطا 

-طيب بس قبل ما نروح نجرب شغلنا 
انا بصفحة اللوق ان الديفولت ..كنت عامل الدخول بايميل او جوال ...وكنت بعمل افالديشن عالحقل الى سميناه للاسمين يومها كان identify

-طيب انا هان عامل الفالديشن ع الايميل والباسورد 

-عشان هيك بدى اروح ع صفحة لوق ان الادمن الى عملناها قبل شوى ..واوقف حقل الدخول بالايميل او الجوال ..وافعل اول حقل تاع الدخول بالايميل الى وقفناه يومها ...الى هو الاصلى الى لارافيل عاملاه اصلا انو ادخل بالايميل 


-خلينا نروح نجرب هلقيت 

-انا وانا بجرب كان عندى خطا ومش عارف شو هو ...وطلعت روحى فوق الساعتين لما عرفت وين الخطا عندى ...انو شغلى كلو صح الى انا عامله فش ولا مشكلة 

-بس المشكلة قديمة من الدرس الى فات 

-انا لما عملت المودل تبع جدول الادمن ...عملت عن طريق الامر الى بيعمل مودل 

-وعملى مودل الادمن زى هيك 

namespace App\Models;

use Illuminate\Database\Eloquent\Model;

class Admin extends Model
{
   
}

-وانا حطيت فيه شغل الهيدن والفيلبل صار زى هيك 
namespace App\Models;

use Illuminate\Database\Eloquent\Model;

class Admin extends Model
{
    protected $table = "admins";
    protected $fillable = ['name', 'email', 'password'];
    protected $hidden = ['password'];
    public $timestamps = false;
}

-ولكن المهندس يومها اخد مودل اليوزر الاصلى الى محطوط برا User.php
هاد المودل الى حيكنا بينزل باى ديفولت مع لارافيل مع سستس الدخول والتسجيل هاد مربوط بجدول اليوزر 

-المهم اخدو نسخ لصق وغير عليه 
-انا ما رضيت اخدت نسخ لص عشان ما اغير النيم سبيس تبعته ...قلته بعمل عن طريق الامر عشان بدى احطه بملف المودلز الى انا عامله ف بدى يحطلى النيم سبيس جاهزى 

-المهم طلعت كل مشكلتى لما اجيت اجرب منو 
-انا لما انشاته كانت بالشكل هاد 
namespace App\Models;

use Illuminate\Database\Eloquent\Model;

class Admin extends Model

-عامل اكستند من مودل 

-ولكن مودل اليوزر الى المهندس نسخه وغير اسمه ل Admin.php 
عامل اكستند من 
class User extends Authenticatable implements MustVerifyEmail

-لما اخدت مسحه منو ايمبليمنت تبع فيرفاى الايميل قال مش لاومنا نعمل فيرفاى ايميل هلقيت وخلاه هيك 
class Admin extends Authenticatable

-وخلى فيه بس الفيلبل والهيدن وغير الحقول الى فيهم لحقول جدول الادمن الى عملو 
وكان موجود فيه ميثود اسمها الكاست تحت مسحها قال ما بدنا اياها برضو 

-اخده زى ما هو وغير عليه الفيلبل والهيدن 

-ما علينا من هالكلام ....المهم انا كيف حليت المشكلة تبعتى 

-كان المودل عندى هيك  بالاول 
namespace App\Models;

use Illuminate\Database\Eloquent\Model;

class Admin extends Model
{
    protected $table = "admins";
    protected $fillable = ['name', 'email', 'password'];
    protected $hidden = ['password'];
    public $timestamps = false;
}

-بس غيرت الاكستند من مودل لكلاس تانى الى هو Authenticatable 
واخدت اليوز تبعو كمان عشان يتعرف عندى 
use Illuminate\Foundation\Auth\User as Authenticatable;

-صار المودل تبعى هيك 
<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Model;

use Illuminate\Foundation\Auth\User as Authenticatable;
class Admin extends Authenticatable
{
    protected $table = "admins";
    protected $fillable = ['name', 'email', 'password'];
    protected $hidden = ['password'];
    // public $timestamps = false;

    protected $guard = "admin";

}

-بالنسبة لهادى 
protected $guard = "admin";

المهندس ضافها قال لو بدك تحطها حطها ..ما بدك خلص مش مشكلة 

-وهلقيت رحت اجرب بعد كل شغلى هاد فعلا لما دخلت الايميل والباسورد فعلا دخلنى ع صفحة الادمن وسجل دخولى فوق باسم thaer admin الى انا عملته 

-ع فكرة غيرت ايميلى وانا بجرب وبخربط خليته t@gmail.com

-طلعت المشكلة مش من بالاخر 

-المهم هلقيت روح زور روات 
http://localhost/Laravel_Course/public/admin/login

-راح يجيبلك فورم تسجيل دخول الادمن 
-سجل دخول بالايميل هاد وباسورد من 1 ل 9 راح يدخلك ع صفحة الادمن الى عملناها الى هيا هاى 
http://localhost/Laravel_Course/public/admins

-وكل عام وانت بخير 

================================================================================
  
              73 - طلب لدعم المحتوي وتكمله المحتوي للافضل

================================================================================

     #073 - حل تاسك ومشكله عدم زياده مشاهدات فيديو اليويتيوب الشخص المسجل

===============================================================================

   #074 - laravel Relationships شرح العلاقات بين الجداول بمثال شبيه بفيزيتا




